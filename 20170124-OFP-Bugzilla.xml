<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "http://issues.openipfastpath.org/page.cgi?id=bugzilla.dtd">

<bugzilla version="5.0rc2"
          urlbase="http://issues.openipfastpath.org/"
          
          maintainer="its@enea.com"
          exporter="Andriy.Berestovskyy@cavium.com"
>

    <bug>
          <bug_id>1</bug_id>
          
          <creation_ts>2015-03-16 14:49:36 +0100</creation_ts>
          <short_desc>test</short_desc>
          <delta_ts>2015-06-03 08:03:45 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Other</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>mansod@gmail.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>bogdan.pricope@enea.com</cc>
    
    <cc>dan.lilliehorn@enea.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263355-Tcn-HfYxq3wjdUVzTNZ4J9CkGN6MiYGvjtcrJT6rtvU</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>1</commentid>
    <comment_count>0</comment_count>
    <who name="">mansod@gmail.com</who>
    <bug_when>2015-03-16 14:49:36 +0100</bug_when>
    <thetext>testing skdfsdf1112311</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>2</bug_id>
          
          <creation_ts>2015-05-07 16:21:59 +0200</creation_ts>
          <short_desc>Move private header files to public for eg TCP and UDP so that the structures can be used universally</short_desc>
          <delta_ts>2015-06-26 12:36:40 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - UDP</component>
          <version>unspecified</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dan Lilliehorn - Enea">dan.lilliehorn@enea.com</reporter>
          <assigned_to name="Andras Berger">andras.berger@nokia.com</assigned_to>
          <cc>andras.berger@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263355-Z-GCmgn1jbBIEbzUoH3o1zwizNDLI7q7zbMtk10BVQM</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2</commentid>
    <comment_count>0</comment_count>
    <who name="Dan Lilliehorn - Enea">dan.lilliehorn@enea.com</who>
    <bug_when>2015-05-07 16:21:59 +0200</bug_when>
    <thetext>Move private header files to public for eg TCP and UDP so that the structures can be used universally.

(used for bugzilla testing, just picked the last entry in our task list)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>3</bug_id>
          
          <creation_ts>2015-06-02 15:58:51 +0200</creation_ts>
          <short_desc>BSD style API compatibility</short_desc>
          <delta_ts>2015-11-24 10:54:41 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Socket API</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>andras.berger@nokia.com</cc>
    
    <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263355-P9UJxHEUstrXqXAuF2GdMalVLcZN4FpRGDQpgZtMunU</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>3</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-02 15:58:51 +0200</bug_when>
    <thetext>BSD style API compatibility

Hannu:

Notes:
Should be possible using a wrapper - ufp header files contains the interface - we could use netgraph

Status:
We need to check all the time we are not conflicting with anything. Hannu takes care of this.

Action:
keep (and clarify)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5</commentid>
    <comment_count>1</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-02 16:08:39 +0200</bug_when>
    <thetext>Assigned: Hannu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>114</commentid>
    <comment_count>2</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 10:54:41 +0100</bug_when>
    <thetext>As discussed with Hannu, this can be removed now.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>4</bug_id>
          
          <creation_ts>2015-06-02 16:04:38 +0200</creation_ts>
          <short_desc>Define which Linux headers that can be used.</short_desc>
          <delta_ts>2015-11-24 10:55:23 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Socket API</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263355-A1q7f7Hd8aChZCYtR2bkf1PmP6TKDsZU4j0ZWGO0FDc</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>4</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-02 16:04:38 +0200</bug_when>
    <thetext>There are many functions in Linux that helps in networking. Which of these can and should be used in OpenFP? We use prefix where we need it, to prevent linking problems.


Note:
Shall we assume that we are in Linux? (i.e. shall we be less general than ODP, which does not assume any operating system?)

State: OnHold
keep and clarify</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6</commentid>
    <comment_count>1</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-02 16:10:12 +0200</bug_when>
    <thetext>Assigned: Hannu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>115</commentid>
    <comment_count>2</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 10:55:23 +0100</bug_when>
    <thetext>Doesn&apos;t apply anymore. So closing.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>5</bug_id>
          
          <creation_ts>2015-06-02 16:15:11 +0200</creation_ts>
          <short_desc>Define runtime API</short_desc>
          <delta_ts>2015-11-24 11:45:59 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Interface configuration</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263355-_RUhm_PE2iZ-PaxMF2CER9Lv8NjMlKxbeYq5fPAnl-U</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-02 16:15:11 +0200</bug_when>
    <thetext>Define runtime API

Status:
keep and clarify</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>118</commentid>
    <comment_count>1</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 11:24:38 +0100</bug_when>
    <thetext>Hi, nowadays there is no discussion as such, I propose to close this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>133</commentid>
    <comment_count>2</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-24 11:45:59 +0100</bug_when>
    <thetext>The API is ready for open-source release</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>6</bug_id>
          
          <creation_ts>2015-06-02 16:21:22 +0200</creation_ts>
          <short_desc>Optimize code</short_desc>
          <delta_ts>2015-11-24 11:46:55 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263355-ygn5_y1frrY8QBTrYLfdM7E1DdToxaWMfvD9S52dM40</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-02 16:21:22 +0200</bug_when>
    <thetext>Optimize code

Status:
OnHold
Keep and break down</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>119</commentid>
    <comment_count>1</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 11:25:46 +0100</bug_when>
    <thetext>IMO, there is no point to hold a ticket indefinitely for this purpose. If anyone else agree we should close this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>134</commentid>
    <comment_count>2</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-24 11:46:55 +0100</bug_when>
    <thetext>Optimization phase before public release completed with available boards.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>7</bug_id>
          
          <creation_ts>2015-06-02 16:25:22 +0200</creation_ts>
          <short_desc>Port mbuf related stuff to ODP buffers - buffer reassembly</short_desc>
          <delta_ts>2015-11-24 10:56:14 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Socket API</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263355-NS0qs_cC9DGBuhgEsawX06ZSJlRQY2wsFH0qJAe8dQA</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-02 16:25:22 +0200</bug_when>
    <thetext>Port mbuf related stuff to ODP buffers - buffer reassembly

Note:
Needs ODP packet segments

Status:
Need to check if ODP functionality is good enough - could be doable but perhaps not optimal 

State:
Keep
Booked

Assigned:
Hannu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>116</commentid>
    <comment_count>1</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 10:56:14 +0100</bug_when>
    <thetext>Reported to be done.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>8</bug_id>
          
          <creation_ts>2015-06-02 16:30:22 +0200</creation_ts>
          <short_desc>TCP reassembly. This is different from general reassembly.</short_desc>
          <delta_ts>2015-11-24 10:56:40 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - TCP</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263355-NoS5nwrlFjdr_340alzkqrAB-hvSwnIL4iSmmz4GqHc</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-02 16:30:22 +0200</bug_when>
    <thetext>TCP reassembly. This is different from general reassembly.

Status:
keep but divide into what is needed for sockets going forward

State:

Assigned: Hannu</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>117</commentid>
    <comment_count>1</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 10:56:40 +0100</bug_when>
    <thetext>Done.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>9</bug_id>
          
          <creation_ts>2015-06-03 08:12:21 +0200</creation_ts>
          <short_desc>Protocol SCTP</short_desc>
          <delta_ts>2015-11-26 12:44:13 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - SCTP</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263355-KOelJKk-YhpfF-JefdUd8YDZRdg3af1FQUZyTt7Psjw</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>11</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:12:21 +0200</bug_when>
    <thetext>Implement/port SCTP

Note:
May use code from FreeBSD

State:
Keep and clarify</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>120</commentid>
    <comment_count>1</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 11:26:25 +0100</bug_when>
    <thetext>Is this applying anymore?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>135</commentid>
    <comment_count>2</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-24 11:48:06 +0100</bug_when>
    <thetext>A nice to have feature. We keep it as a backlog for future roadmap features.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>10</bug_id>
          
          <creation_ts>2015-06-03 08:20:31 +0200</creation_ts>
          <short_desc>ACL - Define requirements</short_desc>
          <delta_ts>2015-11-24 11:29:32 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>ACL</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>11</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263355-YKNBoi8GcZzfysOryQMDiawuqbW7u_ZTqylMmkYTcxw</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>12</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:20:31 +0200</bug_when>
    <thetext>ACL - Define requirements. Cisco style?

Note:
Shall we start this? Secondary priority for now

State:
Starting

Assigned:
Sorin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>121</commentid>
    <comment_count>1</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 11:29:32 +0100</bug_when>
    <thetext>Several tickets for one purpose, so closing.

*** This bug has been marked as a duplicate of bug 11 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>11</bug_id>
          
          <creation_ts>2015-06-03 08:22:53 +0200</creation_ts>
          <short_desc>ACL - Implement</short_desc>
          <delta_ts>2015-11-26 13:20:55 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>ACL</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263355-v8kLjbXiItJzQXrU_JXKJnryZQi5LaroWhnk8_p3dOg</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>13</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:22:53 +0200</bug_when>
    <thetext>ACL - Implement</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>16</commentid>
    <comment_count>1</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:32:28 +0200</bug_when>
    <thetext>Assigned:
Sorin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>122</commentid>
    <comment_count>2</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 11:29:32 +0100</bug_when>
    <thetext>*** Bug 10 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>12</bug_id>
          
          <creation_ts>2015-06-03 08:30:25 +0200</creation_ts>
          <short_desc>Overload protection</short_desc>
          <delta_ts>2015-06-03 08:30:25 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>QoS</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263355-STzcX-Ibuk0MPV-CdeKxOkw68PAKJv380NJ1rr2nne8</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>14</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:30:25 +0200</bug_when>
    <thetext>Overload protection

Status:
keep and prioritize</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>13</bug_id>
          
          <creation_ts>2015-06-03 08:31:33 +0200</creation_ts>
          <short_desc>Hierarchical scheduler (DPDK: port, subport, pipe, traffic class)</short_desc>
          <delta_ts>2015-06-03 08:31:33 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>QoS</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263355-5xNtCcIQA4AAtIwuGe8UOOweY07vLgTMWElk1ha_Cvk</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>15</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:31:33 +0200</bug_when>
    <thetext>Hierarchical scheduler (DPDK: port, subport, pipe, traffic class)


Status:
Keep and prioritize</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>14</bug_id>
          
          <creation_ts>2015-06-03 08:34:43 +0200</creation_ts>
          <short_desc>Automation - Continuous testing</short_desc>
          <delta_ts>2015-11-24 11:35:40 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Testing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263355-_WnY3Uh5ADGcV3TNZcmjSzX5ENlyrvFo3aFLP3ZJ1KA</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>17</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:34:43 +0200</bug_when>
    <thetext>Automation - Continuous testing</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>123</commentid>
    <comment_count>1</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 11:33:40 +0100</bug_when>
    <thetext>The continuous testing should include functional, unit, and regression testing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>125</commentid>
    <comment_count>2</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 11:34:09 +0100</bug_when>
    <thetext>*** Bug 15 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>127</commentid>
    <comment_count>3</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 11:34:45 +0100</bug_when>
    <thetext>*** Bug 16 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>129</commentid>
    <comment_count>4</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 11:35:40 +0100</bug_when>
    <thetext>*** Bug 17 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>15</bug_id>
          
          <creation_ts>2015-06-03 08:35:17 +0200</creation_ts>
          <short_desc>Automation - Regression testing</short_desc>
          <delta_ts>2015-11-24 11:34:09 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Testing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>14</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263355-zcgNRnVRCDdDE65VQYn7_nMo2-UU9pBc_WEDO-0ddkw</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>18</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:35:17 +0200</bug_when>
    <thetext>Automation - Regression testing</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>124</commentid>
    <comment_count>1</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 11:34:09 +0100</bug_when>
    <thetext>

*** This bug has been marked as a duplicate of bug 14 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>16</bug_id>
          
          <creation_ts>2015-06-03 08:36:59 +0200</creation_ts>
          <short_desc>Unit testing</short_desc>
          <delta_ts>2015-11-24 11:34:45 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Testing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>14</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263355-Mh8HwkUXBOhR_drlQDBS5A7wjS37nkMC2hA0-V13KWs</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>19</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:36:59 +0200</bug_when>
    <thetext>Unit testing</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>126</commentid>
    <comment_count>1</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 11:34:45 +0100</bug_when>
    <thetext>

*** This bug has been marked as a duplicate of bug 14 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>17</bug_id>
          
          <creation_ts>2015-06-03 08:37:33 +0200</creation_ts>
          <short_desc>Functional testing</short_desc>
          <delta_ts>2015-11-24 11:35:40 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Testing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>14</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-W6QAAB2p_9Aeke13jzlproOicuGBxOymxFcHRPN-fu0</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>20</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:37:33 +0200</bug_when>
    <thetext>Functional testing</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>21</commentid>
    <comment_count>1</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:39:21 +0200</bug_when>
    <thetext>Note:
Send traffic to fpm and receive output from fpm 

Ola tried mininet, can we use Ostinato?

Status:
OnHold
keep and break down into smaller tasks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>22</commentid>
    <comment_count>2</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:40:14 +0200</bug_when>
    <thetext>Find tools for testing</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>128</commentid>
    <comment_count>3</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 11:35:40 +0100</bug_when>
    <thetext>

*** This bug has been marked as a duplicate of bug 14 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>18</bug_id>
          
          <creation_ts>2015-06-03 08:41:41 +0200</creation_ts>
          <short_desc>Performance testing</short_desc>
          <delta_ts>2015-06-16 15:08:15 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Testing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Andras Berger">andras.berger@nokia.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-HH9g_L4jtzHVfanYvPxkaQPVeNyQIs5vs87sOrZH8Nc</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>23</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:41:41 +0200</bug_when>
    <thetext>Performance testing
Measure traffic performance of OpenFP

Note:
Find tools for testing

State:
Keep and break down into smaller tasks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>46</commentid>
    <comment_count>1</comment_count>
    <who name="Andras Berger">andras.berger@nokia.com</who>
    <bug_when>2015-06-03 15:41:15 +0200</bug_when>
    <thetext>First round of measurements on Octeon3 is done (with pre-release odp). Results sent to mailing list. Areas to be improved discussed.

Next round of measurement is underway with new pre-release version of odp-octeon3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>50</commentid>
    <comment_count>2</comment_count>
    <who name="Andras Berger">andras.berger@nokia.com</who>
    <bug_when>2015-06-16 15:07:54 +0200</bug_when>
    <thetext>2nd round of testing was comleted using odp-octeon drop #2. There was a big improvement in throughput.
UDP socket / event interface performance improved, especially scalability.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>19</bug_id>
          
          <creation_ts>2015-06-03 08:43:18 +0200</creation_ts>
          <short_desc>Environment - bare metal</short_desc>
          <delta_ts>2015-11-24 11:52:20 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Testing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-2WjeTmt9Yby65BMAduEMnT7KFANNGWcHjVMglD_iiAc</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>24</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:43:18 +0200</bug_when>
    <thetext>Environment - bare metal</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>130</commentid>
    <comment_count>1</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 11:36:51 +0100</bug_when>
    <thetext>Can anyone elaborate in what is this all about?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>136</commentid>
    <comment_count>2</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-24 11:52:20 +0100</bug_when>
    <thetext>Run OFP in an environment that excludes Linux.
OFP application should run in other OSs and have no dependency to Linux or others.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>20</bug_id>
          
          <creation_ts>2015-06-03 08:43:46 +0200</creation_ts>
          <short_desc>Environment - core isolation and tickless</short_desc>
          <delta_ts>2015-06-03 08:43:46 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Testing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-w4onSXoST0sMwvX8LOTghL1zJX9uqnURdnTzS4FxC-g</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>25</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:43:46 +0200</bug_when>
    <thetext>Environment - core isolation and tickless</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>21</bug_id>
          
          <creation_ts>2015-06-03 08:44:13 +0200</creation_ts>
          <short_desc>Environment - virtual</short_desc>
          <delta_ts>2015-06-03 08:44:13 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Testing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-HaSpZvezWlJfk7ew65eeng-Mukp_-6EvqfqwWaX_Mwc</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>26</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:44:13 +0200</bug_when>
    <thetext>Environment - virtual</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>22</bug_id>
          
          <creation_ts>2015-06-03 08:45:50 +0200</creation_ts>
          <short_desc>Tools - Traffic generator</short_desc>
          <delta_ts>2015-06-03 08:45:50 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Testing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-BU-ThlHYh1_gOT0E5WBuNlpvEDz8hI1JqRpNLRjQLdE</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>27</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:45:50 +0200</bug_when>
    <thetext>Find a traffic generator</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>23</bug_id>
          
          <creation_ts>2015-06-03 08:46:37 +0200</creation_ts>
          <short_desc>Tools - Sikuli</short_desc>
          <delta_ts>2015-11-24 11:53:50 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Testing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-D0WM5DvJf9w6n-GhhFvd-gb6QbMe1taEdZ050DIid40</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>28</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:46:37 +0200</bug_when>
    <thetext>Tools - Sikuli</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>131</commentid>
    <comment_count>1</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 11:39:14 +0100</bug_when>
    <thetext>I think this should be closed unless anyone is interested in working in the integration of this tool.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>137</commentid>
    <comment_count>2</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-24 11:53:50 +0100</bug_when>
    <thetext>This tool did not come to discussion since the start of the incubation project.
It can be close as this is not used in ODP and we don&apos;t plan to use it.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>24</bug_id>
          
          <creation_ts>2015-06-03 08:48:56 +0200</creation_ts>
          <short_desc>Add/change naming for public/internal functionality</short_desc>
          <delta_ts>2015-11-24 11:54:26 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-M3gmV7v4D13Pu3JeZKGRyAxIE6v194NfJfuVN6vOVzg</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>29</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:48:56 +0200</bug_when>
    <thetext>Add/change naming for public/internal functionality

Note:
Discussed on 3 December meeting. Public calls can have odpfp_ prefix. Internal calls _odpfp or _. Internal local static calls don’t need any prefix. We can do this latter by using a script in a future task.

Note:
We should do this before public launch.

State:
Keep and add to all other things needed for public launch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>132</commentid>
    <comment_count>1</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 11:41:17 +0100</bug_when>
    <thetext>This seems to be addressed nowadays, even though I don&apos;t remember to have heard any official intention on this. If you feel this is no longer applicable, let me know, to close this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>138</commentid>
    <comment_count>2</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-24 11:54:26 +0100</bug_when>
    <thetext>This task was done.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>25</bug_id>
          
          <creation_ts>2015-06-03 08:59:04 +0200</creation_ts>
          <short_desc>Support/feature documentation</short_desc>
          <delta_ts>2015-06-03 08:59:04 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Documentation</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-Y4DQeHeMAnERmK2cJb8T9CXMVv5c-cDpS0qsB3f0bB8</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>30</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 08:59:04 +0200</bug_when>
    <thetext>Support/feature documentation

Note:
Can be a root textfile from the start


Assigned: Ulf</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>26</bug_id>
          
          <creation_ts>2015-06-03 09:01:07 +0200</creation_ts>
          <short_desc>Move some logging and debug features to a debug only configuration</short_desc>
          <delta_ts>2015-10-22 14:24:09 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Logging</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-5Xzsyq-A1cxAfp94IJiJ6WBaHnWEw2YTZPXOfA2re44</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>31</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 09:01:07 +0200</bug_when>
    <thetext>Move some logging and debug features to a debug only configuration</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>71</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 12:04:29 +0200</bug_when>
    <thetext>Can this be closed?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>27</bug_id>
          
          <creation_ts>2015-06-03 09:02:29 +0200</creation_ts>
          <short_desc>Conformance Test TCP protocol</short_desc>
          <delta_ts>2015-06-03 09:02:29 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - TCP</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-J9tYNOtkXWbWpO6D-K6QT1aYmKQWjLiKzJ-7qg-iN60</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>32</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 09:02:29 +0200</bug_when>
    <thetext>Conformance Test TCP protocol

Assigned: Sorin

Status:
Ongoing</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>28</bug_id>
          
          <creation_ts>2015-06-03 09:05:39 +0200</creation_ts>
          <short_desc>IPv6 UDP output</short_desc>
          <delta_ts>2015-07-27 12:52:49 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - IPv6</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Bogdan Pricope">bogdan.pricope@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-lpCwuWDzGaIkEcmHqd6fUdRa99affuUODtU4INtoDzA</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>33</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 09:05:39 +0200</bug_when>
    <thetext>IPv6 UDP output

Assigned: Bogdan

Status:
Ongoing</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>29</bug_id>
          
          <creation_ts>2015-06-03 09:06:38 +0200</creation_ts>
          <short_desc>IPv6 socket API</short_desc>
          <delta_ts>2015-07-27 12:53:33 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Socket API</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Bogdan Pricope">bogdan.pricope@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-ss_qJFsFEBMmkv-34OoU1c1LTdwkWMeZofzfom-ll4Y</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>34</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 09:06:38 +0200</bug_when>
    <thetext>IPv6 socket API

Assigned: Bogdan

Status:
Ongoing</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>30</bug_id>
          
          <creation_ts>2015-06-03 09:08:04 +0200</creation_ts>
          <short_desc>Fix socket API return code/errno values: errno vs. oipfp_return_code</short_desc>
          <delta_ts>2015-11-24 12:02:41 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Socket API</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-K5oaHlK9hJTIHJSdMt5MlJ1JFuzn1qe4WPgxCuRo5a8</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>35</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 09:08:04 +0200</bug_when>
    <thetext>Fix socket API return code/errno values: errno vs. oipfp_return_code</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>139</commentid>
    <comment_count>1</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 11:56:05 +0100</bug_when>
    <thetext>There was work in this direction recently. What is the status on this?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>141</commentid>
    <comment_count>2</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-24 12:02:41 +0100</bug_when>
    <thetext>Hi,

The return values should be documented with public API and later on internal headers.
There are 3 situations:

1.
Ofp_errno is behaving for socket calls of ofp_socket.h, as errno in Linux system calls. 
OFP does not have system calls, but code ported from Linux will bring the same return model, i.e. socket calls.
Calls from ofp_socket.h return 0 on success and -1 + errno set on failture.

The &lt;ofp_errno.h&gt; header file defines the integer variable ofp_errno, which
       is set by system calls and some library functions in the event of an
       error to indicate what went wrong.  Its value is significant only
       when the return value of the call indicated an error (i.e., -1 from
       most system calls; -1 or NULL from most library functions); a
       function that succeeds is allowed to change ofp_errno.
http://man7.org/linux/man-pages/man3/errno.3.html

2. 
On hierarchical packet processing routines return values can be ofp_return_code.
enum ofp_return_code {
	OFP_PKT_CONTINUE = 0,
	OFP_PKT_PROCESSED,
	OFP_PKT_ON_HOLD,
	OFP_PKT_DROP
};

For example:
enum ofp_return_code ofp_ipv4_processing(odp_packet_t pkt);

3. 
Like in ODP model: 
0 on success
-1 or multiple values &lt; -1 on failure but each case should be documented.

For example:
ofp_init_global() should return 0 on success and -1 on failure, as documented in API. Now it returns always 0, so it should be fixed.

Kind Regards,
Sorin</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>31</bug_id>
          
          <creation_ts>2015-06-03 09:08:52 +0200</creation_ts>
          <short_desc>Check ODPFP_INADDR_ANY support</short_desc>
          <delta_ts>2015-07-27 12:54:17 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Socket API</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Bogdan Pricope">bogdan.pricope@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356--_1sd_U9VamrNRO_q7X9KZ3Y3DHV7-5kOXq1Lb3Ylzw</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>36</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 09:08:52 +0200</bug_when>
    <thetext>Check ODPFP_INADDR_ANY support</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>37</commentid>
    <comment_count>1</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 09:09:22 +0200</bug_when>
    <thetext>Assigned: Bogdan

Status: Ongoing</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>32</bug_id>
          
          <creation_ts>2015-06-03 09:10:06 +0200</creation_ts>
          <short_desc>Static ARPs configured in Linux should be notified and saved in fastpath</short_desc>
          <delta_ts>2015-06-03 09:10:06 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - ARP/NDP</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-ybxiLi0kfztuguJ8KcPWbgbNj2MXFqdpdEBD9cMBzn8</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>38</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 09:10:06 +0200</bug_when>
    <thetext>Static ARPs configured in Linux should be notified and saved in fastpath</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>33</bug_id>
          
          <creation_ts>2015-06-03 09:11:07 +0200</creation_ts>
          <short_desc>Interface handling - &quot;hijacking&quot; interface in realtime, flagging interface in use etc</short_desc>
          <delta_ts>2015-06-03 09:11:07 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Initiation Interface</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-qlCpXPHZDQVsXghaCXZjpM9bWnTkW_PyPbjmRCv2Sow</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>39</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 09:11:07 +0200</bug_when>
    <thetext>Interface handling - &quot;hijacking&quot; interface in realtime, flagging interface in use etc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>34</bug_id>
          
          <creation_ts>2015-06-03 09:12:02 +0200</creation_ts>
          <short_desc>API to start/stop each interface during run-time</short_desc>
          <delta_ts>2015-11-30 09:04:21 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Interface configuration</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-6nqsJL3ja2cZ1suSLgR732YE6alAjIZwF4OoqGlS4Fw</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>40</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 09:12:02 +0200</bug_when>
    <thetext>Refactoring from ifup/ifdown pov</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>56</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 09:30:13 +0200</bug_when>
    <thetext>API to start/stop each interface during run-time.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>35</bug_id>
          
          <creation_ts>2015-06-03 09:13:19 +0200</creation_ts>
          <short_desc>Implement send_frame for L2 output</short_desc>
          <delta_ts>2015-08-18 13:38:41 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Egress Packet processing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Andras Berger">andras.berger@nokia.com</assigned_to>
          <cc>andras.berger@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-2bwyZCguVU-743WgNF58y9wkbhKLkhLTuXjoGrVMOL0</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>41</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 09:13:19 +0200</bug_when>
    <thetext>Implement send_frame for L2 output</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>54</commentid>
    <comment_count>1</comment_count>
    <who name="Andras Berger">andras.berger@nokia.com</who>
    <bug_when>2015-07-27 11:19:56 +0200</bug_when>
    <thetext>Requirements:
send_frame takes a valid packet as parameter with valid ethernet (IP, etc...) headers, and an output device.
The packet&apos;s ethernet header is modified to match the output device, MTU is checked before sending.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>36</bug_id>
          
          <creation_ts>2015-06-03 09:14:03 +0200</creation_ts>
          <short_desc>Multipath equal cost routing</short_desc>
          <delta_ts>2015-06-03 09:14:03 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Route and mac interface</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-H_gtSq1RYSP8SLh3xRF1LX26hwFqhPoXX5-Bo7x_If0</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>42</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 09:14:03 +0200</bug_when>
    <thetext>Multipath equal cost routing</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>37</bug_id>
          
          <creation_ts>2015-06-03 09:14:56 +0200</creation_ts>
          <short_desc>Move private header files to public for eg TCP and UDP so that the structures can be used universally</short_desc>
          <delta_ts>2015-06-03 09:14:56 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Socket API</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-GjvHnKYGGuITM5vDkkGA9Azp--bVcJJyRy2CFmbEzfA</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>43</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 09:14:56 +0200</bug_when>
    <thetext>Move private header files to public for eg TCP and UDP so that the structures can be used universally</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>38</bug_id>
          
          <creation_ts>2015-06-03 09:15:29 +0200</creation_ts>
          <short_desc>Implement/validate ICMPv6 Neighbor Advertisement and Neighbor Solicitation Messages</short_desc>
          <delta_ts>2015-11-24 12:01:20 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - ARP/NDP</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-7aEIiyho0GgwduzBpIO9ww5bxuscEvYpV601apvHOFc</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>44</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-03 09:15:29 +0200</bug_when>
    <thetext>Implement/validate ICMPv6 Neighbor Advertisement and Neighbor Solicitation Messages</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>140</commentid>
    <comment_count>1</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 12:01:20 +0100</bug_when>
    <thetext>icmpv6 seems to be implemented, is this still missing?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>39</bug_id>
          
          <creation_ts>2015-06-03 15:36:03 +0200</creation_ts>
          <short_desc>Improve performance and scalability of UDP socket when event interface is used</short_desc>
          <delta_ts>2015-06-16 15:12:25 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - UDP</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andras Berger">andras.berger@nokia.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-oyN48APf0YPi7Sn20oC2_0qtnuB1dZOfc5XAGXgaFRc</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>45</commentid>
    <comment_count>0</comment_count>
    <who name="Andras Berger">andras.berger@nokia.com</who>
    <bug_when>2015-06-03 15:36:03 +0200</bug_when>
    <thetext>Improve performance and scalability of UDP socket when event interface is used.

Investigate the possibility to use per-flow locking instead of per socket locking to improve scalability. (Idea by Sorin Vultureanu)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>47</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-06-03 17:06:44 +0200</bug_when>
    <thetext>The socket serialization problem is found here:

src/odpfp_udp_usrreq.c : udp_append()
        SOCKBUF_LOCK(&amp;so-&gt;so_rcv);
        if (odpfp_sbappendaddr_locked(&amp;so-&gt;so_rcv, append_sa, n, opts) == 0) {.
src/odpfp_uipc_sockbuf.c : odpfp_sbappendaddr_locked ()
        /* Offer to event function */
        if (packet_accepted_as_event(sb, pkt))
            return 1;

instead:

packet_accepted_as_event() should be processed within read_lock(), before calling odpfp_sbappendaddr_locked() inside the write lock.

The pcb is found with a hash per remote addr, remote port and local port (per-flow).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>51</commentid>
    <comment_count>2</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-06-16 15:11:29 +0200</bug_when>
    <thetext>Two commits done to fix this with review and testing from Andras:
b70e14880b4a6f1f7dd2c35977ceee04a7f3dfdc
4df4e624b47b8b422ff28a37caefbfa4e071659e</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>40</bug_id>
          
          <creation_ts>2015-06-12 12:45:57 +0200</creation_ts>
          <short_desc>Connect API for TCP is not blocking</short_desc>
          <delta_ts>2015-11-30 09:05:59 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Socket API</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-lcFJfBamiGynTuHXdOCjQhC0vfL_80MVL_7cWxhTwvk</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>48</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-12 12:45:57 +0200</bug_when>
    <thetext>For TCP, connect ends after SYN is sent.
It should end after the handshake is complete.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>41</bug_id>
          
          <creation_ts>2015-06-16 09:30:46 +0200</creation_ts>
          <short_desc>select API has limited functionality</short_desc>
          <delta_ts>2015-06-16 09:30:46 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Socket API</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-5m3Tod0q1Uuc-wQ3KjrGqlRR6Wtp0sBbBR9Lvv8D8AE</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>49</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-06-16 09:30:46 +0200</bug_when>
    <thetext>As far as I can tell, odpfp_select() socket API has the following limitations:
- only &quot;readfds&quot; set is processed, while &quot;writefds&quot; and &quot;exceptfds&quot; are ignored
- &quot;timeout&quot; cannot be NULL and will block execution until completion and not until a socket &quot;become ready&quot;
 - a socket cannot be part of more than one set

All those limitations need to be addressed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>42</bug_id>
          
          <creation_ts>2015-06-16 15:31:36 +0200</creation_ts>
          <short_desc>Refactor CUnit automake files</short_desc>
          <delta_ts>2015-06-24 14:17:26 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Build Environment Tools</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Low</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andras Berger">andras.berger@nokia.com</reporter>
          <assigned_to name="Andras Berger">andras.berger@nokia.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356--Kr4db3aExZ-cEZvBQeJvsYmO1qq7SSfTaRb6v3UL_s</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>52</commentid>
    <comment_count>0</comment_count>
    <who name="Andras Berger">andras.berger@nokia.com</who>
    <bug_when>2015-06-16 15:31:36 +0200</bug_when>
    <thetext>Initial build of CUnit tests fails. Fix &amp; refactor CUnit&apos;s automake files.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>43</bug_id>
          
          <creation_ts>2015-06-18 09:42:01 +0200</creation_ts>
          <short_desc>Refactor private/public API</short_desc>
          <delta_ts>2015-06-26 10:39:15 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Interface configuration</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Normal</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andras Berger">andras.berger@nokia.com</reporter>
          <assigned_to name="Andras Berger">andras.berger@nokia.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-88PXswkSwvEFYrC9bbRSUjkVt6XylzTw6wdMWkjL30s</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>53</commentid>
    <comment_count>0</comment_count>
    <who name="Andras Berger">andras.berger@nokia.com</who>
    <bug_when>2015-06-18 09:42:01 +0200</bug_when>
    <thetext>- Move functions used by examples to public API.
- Fix public headers which include private headers
- Move protocol headers to public API</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>44</bug_id>
          
          <creation_ts>2015-07-27 12:57:25 +0200</creation_ts>
          <short_desc>Add IPv6 fragmentation / reassembly</short_desc>
          <delta_ts>2015-07-27 12:57:25 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Ingress Packet processing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-8oQTNdGDhrX9P38s2Da4zmH2KBR7UkzZu364tZSFVNM</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>55</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2015-07-27 12:57:25 +0200</bug_when>
    <thetext></thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>45</bug_id>
          
          <creation_ts>2015-10-21 09:55:36 +0200</creation_ts>
          <short_desc>ofp_init_global() and ofp_init_local() don&apos;t thread the faults correctly.</short_desc>
          <delta_ts>2015-11-26 14:29:08 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Bogdan Pricope">bogdan.pricope@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-UgKW1cY6s01caOETKPa__UipWCsQDHquBh_1SoewrjQ</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>57</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 09:55:36 +0200</bug_when>
    <thetext>in ofp_init_global(), ofp_init_local() function calls don&apos;t threat error situations.
The return of these functions is always 0 even if inside there is an error.
When one calls these functions the error situation should be handled.

See bug 30 for error types.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>46</bug_id>
          
          <creation_ts>2015-10-21 09:57:15 +0200</creation_ts>
          <short_desc>Uninitialized variables should be identified by reviews</short_desc>
          <delta_ts>2015-11-24 12:08:05 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-XAMGNMJ0tlOa_qdDPDKnAjUyj4h5-68HYNLJ0O1U5Xo</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>58</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 09:57:15 +0200</bug_when>
    <thetext>Create a new issue for each situation identified by review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>142</commentid>
    <comment_count>1</comment_count>
    <who name="José Pekkarinen">jose.pekkarinen@nokia.com</who>
    <bug_when>2015-11-24 12:08:05 +0100</bug_when>
    <thetext>Uninitialized variables are identified by the compiler, during the development process. No need for a ticket like this.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>47</bug_id>
          
          <creation_ts>2015-10-21 09:58:42 +0200</creation_ts>
          <short_desc>Return values that are not handled properly should be identified by reviews</short_desc>
          <delta_ts>2015-11-26 12:19:27 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-gBia6wEPdtthykhd_eP6IhCHqeccEWeok67lb-8iPfI</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>59</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 09:58:42 +0200</bug_when>
    <thetext>Create a new issue for each situation identified by review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>143</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-26 12:19:27 +0100</bug_when>
    <thetext>Reviews done. Changes were made. We can close this.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>48</bug_id>
          
          <creation_ts>2015-10-21 10:02:25 +0200</creation_ts>
          <short_desc>The fault situations that are not handled properly or without recovery should be reported by reviews</short_desc>
          <delta_ts>2015-11-26 12:19:44 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-14gbM_B7sXxL4nBs7kDajEYSH4YyQ3tg6HpKeUYSByQ</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>60</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 10:02:25 +0200</bug_when>
    <thetext>Create a new issue for each situation identified by review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>144</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-26 12:19:44 +0100</bug_when>
    <thetext>Reviews done. Changes were made. We can close this.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>49</bug_id>
          
          <creation_ts>2015-10-21 10:06:00 +0200</creation_ts>
          <short_desc>Identify configuration points as defines/variables/parameters (with review)</short_desc>
          <delta_ts>2015-11-26 12:20:03 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>ciprian.barbu@enea.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-6XISpB-nwqNWiuaepy1wFmGJOKcJEcvPKBE-jj0F-U4</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>61</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 10:06:00 +0200</bug_when>
    <thetext>Ex: like the one that change the memory consumption inside the route table.

Create a new issue for each situation identified by review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>68</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 12:00:43 +0200</bug_when>
    <thetext>- hard-coded values such as number of ports (GRE port) and ARP timeout should be configurable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>89</commentid>
    <comment_count>2</comment_count>
    <who name="Ciprian Barbu">ciprian.barbu@enea.com</who>
    <bug_when>2015-11-02 14:35:48 +0100</bug_when>
    <thetext>ofp_arp.c:411 - ofp_arp_save_ipv4_pkt computes newarp using hardcoded value of 5; although this is inside a sanity check block I think the value should at least be explained in a comment above.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>145</commentid>
    <comment_count>3</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-26 12:20:03 +0100</bug_when>
    <thetext>Changes were made. We can close this.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>50</bug_id>
          
          <creation_ts>2015-10-21 10:08:26 +0200</creation_ts>
          <short_desc>Create a configurable model for Sync/Lock primitives.</short_desc>
          <delta_ts>2015-10-21 10:08:26 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-x17L5ljra5WaZQeLdB7kqAb_AmpCjX5xqkuv6wRJZuU</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>62</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 10:08:26 +0200</bug_when>
    <thetext>Sync/Lock primitives can be disabled in some scenarios.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>51</bug_id>
          
          <creation_ts>2015-10-21 11:48:51 +0200</creation_ts>
          <short_desc>Replicate error handling patch for fpm example to all other examples</short_desc>
          <delta_ts>2015-11-05 09:37:19 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Example applications</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Bogdan Pricope">bogdan.pricope@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-3yqcYLnqAKbH7SMfaISQFwq5pKX9Khjb6tINiEO0SdI</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>63</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 11:48:51 +0200</bug_when>
    <thetext>Title of patch: Updated README, fpm example and example/README
The changes to example/fpm/app_main.c should be migrated to all other applications.
Please find a way to not duplicate code, make some generic function and call it from all applications.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>52</bug_id>
          
          <creation_ts>2015-10-21 11:51:17 +0200</creation_ts>
          <short_desc>Check the code through static analysis tools</short_desc>
          <delta_ts>2015-10-21 11:51:17 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Other</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-WQWDmmdbKU38iEKMU_6q03mA3AFfrAVH7OdK4sLSIic</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>64</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 11:51:17 +0200</bug_when>
    <thetext>Lint ?</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>53</bug_id>
          
          <creation_ts>2015-10-21 11:52:38 +0200</creation_ts>
          <short_desc>Document public APIs with doxygen</short_desc>
          <delta_ts>2015-11-26 14:49:33 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Documentation</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>IN_PROGRESS</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jose.pekkarinen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-wsQ70kCFf4vRGWmlSE73rRaUndyXFZWS96xGg4eYk14</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>65</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 11:52:38 +0200</bug_when>
    <thetext>Already started and 4 patches were submitted.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>54</bug_id>
          
          <creation_ts>2015-10-21 11:54:29 +0200</creation_ts>
          <short_desc>Project directory/files structure</short_desc>
          <delta_ts>2015-11-26 12:45:56 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Other</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>IN_PROGRESS</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>rasmuss.graaf@enea.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-RDRGG-srQg0sshX_8wIigdjYqSQwlcHvnT2-CzBovew</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>66</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 11:54:29 +0200</bug_when>
    <thetext>Code structure:
The current structure is very flat, e.g. object files are placed in the same directory as c-files. A suggestion here is to mimic the ODP structure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>67</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 11:57:46 +0200</bug_when>
    <thetext>o	Lightly modified software e.g. AVL, hash, etc.  Would it be beneficial to migrate into a third_party/ directory as a pristine copy where it is easy to maintain and upgrade, then have ‘helpers’ in src/ ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>85</commentid>
    <comment_count>2</comment_count>
      <attachid>1</attachid>
    <who name="Rasmuss">rasmuss.graaf@enea.com</who>
    <bug_when>2015-10-23 15:51:50 +0200</bug_when>
    <thetext>Created attachment 1
OFP source file structure proposal

Attached OFP source file strucutre proposal</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>107</commentid>
    <comment_count>3</comment_count>
      <attachid>2</attachid>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-13 14:33:43 +0100</bug_when>
    <thetext>Created attachment 2
OFP tree proposal sent on mailing list for review

attached OFP tree proposal sent on mailing list for review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>108</commentid>
    <comment_count>4</comment_count>
    <who name="Rasmuss">rasmuss.graaf@enea.com</who>
    <bug_when>2015-11-13 18:51:14 +0100</bug_when>
    <thetext>Hi,

Looks good!

My comments
1) Is there a reason for not having a /net/ folder?
2) Is there a reason why ARP isn&apos;t it in /netinet/ folder? (ARP is a IPv4 protocol, IPv6 uses NDP)
3) Where will object files and libraries be placed?
4) Is there a reason why the /api/ folder is placed directly in /ofp/ instead of having a /include/api/, as is the case with ODP?
5) I guess the Makefile is located in /OFp project root/ and the location is a typo.

BR
/Rasmuss</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>109</commentid>
    <comment_count>5</comment_count>
    <who name="Rasmuss">rasmuss.graaf@enea.com</who>
    <bug_when>2015-11-13 18:52:12 +0100</bug_when>
    <thetext>Hi,

Looks good!

My comments
1) Is there a reason for not having a /net/ folder?
2) Is there a reason why ARP isn&apos;t it in /netinet/ folder? (ARP is a IPv4 protocol, IPv6 uses NDP)
3) Where will object files and libraries be placed?
4) Is there a reason why the /api/ folder is placed directly in /ofp/ instead of having a /include/api/, as is the case with ODP?
5) I guess the Makefile is located in /OFp project root/ and the location is a typo.

BR
/Rasmuss</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>110</commentid>
    <comment_count>6</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-16 12:04:15 +0100</bug_when>
    <thetext>Hi,

1. There is no /src/net/ folder as it&apos;s functionality was not ported from BSD. There are no files that could go in a /net/ similar to BSD code. Discussed with Bogdan that we need to have some files in /src/ as a place to start. The code that is now in /src/ is the init and core of packet processing that is not BSD like.
2. Same reason as above(non BSD) and the fact that ARP is more related to a /net/ folder than a /netinet/ folder
3) Final deliverable destination can be controlled at build time. Now, temporary object files are in the same directory as .c file, while libraries are in /lib/. We could change to have all object files in /obj/, but ODP also has these temporary objects with the c code. This is a simpler change that can be applied in the configure build files.
4) As all headers are with .c files we don&apos;t use an include directory as ODP. We have some debate weather to have this directory named api or include. For me it&apos;s clearer with &quot;api&quot; that this directory is for external use rather than internal when use &quot;include&quot;. include/api will have an empty include directory and it&apos;s taking longer to browse through the code.
5) Yes. Makefile remains where it is now in the root.

BR,
Sorin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>112</commentid>
    <comment_count>7</comment_count>
    <who name="Rasmuss">rasmuss.graaf@enea.com</who>
    <bug_when>2015-11-17 15:53:58 +0100</bug_when>
    <thetext>Hi,

OK, one minor comment, with the current layout there will be a mix of files belonging to IPv4 and IPv6 in the /src/ folder, e.g. ofp_ndp.c when it is implemented.

BR
/Rasmuss</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>146</commentid>
    <comment_count>8</comment_count>
      <attachid>3</attachid>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-26 12:45:42 +0100</bug_when>
    <thetext>Created attachment 3
OFP tree proposal REVIEWED on the list with Nokia and ARM

On 11/17/2015 10:41 AM, José Pekkarinen wrote:
&gt; 	Hi,
&gt; 
&gt; On Monday 16 November 2015 13:29:21 EXT Sorin. Vultureanu wrote:
&gt;&gt; &gt; Hi Brian, all,
&gt;&gt; &gt; 
&gt;&gt; &gt; Thank you for the input!
&gt;&gt; &gt; Let&apos;s continue to discuss and clarify what should be the agreed solution.
&gt;&gt; &gt; 
&gt;&gt; &gt; Kind Regards,
&gt;&gt; &gt; Sorin
&gt;&gt; &gt; 
&gt;&gt; &gt; On 11/13/2015 11:44 PM, Brian Brooks wrote:
&gt;&gt;&gt; &gt; &gt; On Fri, Nov 13, 2015 at 01:31:03PM +0000, Sorin Vultureanu wrote:
&gt;&gt;&gt;&gt; &gt; &gt;&gt; OFP project
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   ├── Makefile
&gt;&gt;&gt;&gt; &gt; &gt;&gt; ├── config
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   └── ofp_config.h
&gt;&gt;&gt;&gt; &gt; &gt;&gt; ├── api
&gt;&gt;&gt; &gt; &gt; 
&gt;&gt;&gt; &gt; &gt; &apos;include&apos; instead of &apos;api&apos; ?
&gt;&gt; &gt; 
&gt;&gt; &gt; Not sure which is the best. Let me explain my reasoning and see which is
&gt;&gt; &gt; better. For me using &quot;api&quot; shows that this directory is for external
&gt;&gt; &gt; interface only. When using &quot;include&quot; someone might not realize that this is
&gt;&gt; &gt; an external API. Leaving &quot;include/api&quot; as we have now, will have an empty
&gt;&gt; &gt; &quot;include&quot; directory and it&apos;s taking longer to browse through this
&gt;&gt; &gt; directory. Of course ODP has include directory but headers are in
&gt;&gt; &gt; &quot;include/odp/api&quot; directory.
&gt; 	I don&apos;t have any specific preference to this either. As a suggest, we can 
&gt; start using api as you plan, and we can rethink anything later.
&gt; 
&gt; 	BR.
&gt; 
&gt; 	José.
&gt; 
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   └── ofp_*.h (all files available now in include/api)
&gt;&gt;&gt;&gt; &gt; &gt;&gt; ├── src
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   ├── ofp_arp.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   ├── ofp_gre*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   ├── ofp_init*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   ├── ofp_pkt_processing*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   ├── ofp_portconf.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   ├── ofp_route*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   ├── ofp_rt_*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   ├── ofp_vxlan.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   ├── uipc
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_errno.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_hook*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_uipc_*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_sys_socket.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_sysctl.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_syscalls.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_subr_hash*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   ├── linux
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_quagga*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_netlink*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_tunthread*.[c|h]
&gt;&gt;&gt; &gt; &gt; 
&gt;&gt;&gt; &gt; &gt; Do we think that all code outside of this &apos;linux&apos; directory is free of
&gt;&gt;&gt; &gt; &gt; Linux or platform-specific code &amp; assumptions?
&gt;&gt; &gt; 
&gt;&gt; &gt; Yes. All code outside of linux/ should be free of Linux. All code outside of
&gt;&gt; &gt; this directory should be ODP-only dependent and some standard C
&gt;&gt; &gt; headers(available in all platforms). The only case where this might not be
&gt;&gt; &gt; 100% true is the CLI case, where it creates sockets to Linux stack. But
&gt;&gt; &gt; this code is also divided as a cli/ directory and can be easily
&gt;&gt; &gt; disconnected.
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   ├── netinet
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_icmp*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_ip_init*.[c|h] -&gt;rename to ofp_ip_input.c
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_in_*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_inet*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_igmp.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_reass*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_udp_*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_tcp_*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   ├── netinet6
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_udp6*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_icmp6*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_in6*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_ip6_init.[c|h]  -&gt;rename to ofp_ip6_input.c
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_nd6.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   ├── utils
&gt;&gt;&gt; &gt; &gt; 
&gt;&gt;&gt; &gt; &gt; &apos;util&apos; instead of &apos;utils&apos; ?
&gt;&gt; &gt; 
&gt;&gt; &gt; OK.
&gt;&gt; &gt; 
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_debug*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_log*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_util*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_timer*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── ofp_stat.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── 3rd_party
&gt;&gt;&gt; &gt; &gt; 
&gt;&gt;&gt; &gt; &gt; Generally, third party software is located in the top-level level
&gt;&gt;&gt; &gt; &gt; directory under third_party/. So,
&gt;&gt;&gt; &gt; &gt; 
&gt;&gt;&gt; &gt; &gt; src/third_party/ instead of src/utils/3rd_party ?
&gt;&gt; &gt; 
&gt;&gt; &gt; OK.
&gt;&gt; &gt; 
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   │   ├── ofp_avl*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   │   ├── ofp_hash*.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   │   ├── ofp_md5c.[c|h]
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   ├── cli
&gt;&gt;&gt; &gt; &gt; 
&gt;&gt;&gt; &gt; &gt; src/cli/ instead of src/utils/cli ?
&gt;&gt; &gt; 
&gt;&gt; &gt; To have less directories in src and to show that it can be disconnected from
&gt;&gt; &gt; OFP it was inside the /util/ directory. Also being in util/ directory shows
&gt;&gt; &gt; this CLI to be a useful functionality. Do we still agree to move it in
&gt;&gt; &gt; /src/ folder ?
&gt;&gt; &gt; 
&gt;&gt;&gt;&gt; &gt; &gt;&gt; │   │   │   └── ofp_cli*.[c|h]
&gt;&gt;&gt; &gt; &gt; 
&gt;&gt;&gt; &gt; &gt; test/ or src/test/ ?
&gt;&gt; &gt; 
&gt;&gt; &gt; test/ as in ODP ?
&gt;&gt; &gt; 
&gt;&gt;&gt; &gt; &gt; ________________________________
&gt;&gt;&gt; &gt; &gt; 
&gt;&gt;&gt; &gt; &gt; -- IMPORTANT NOTICE: The contents of this email and any attachments are
&gt;&gt;&gt; &gt; &gt; confidential and may also be privileged. If you are not the intended
&gt;&gt;&gt; &gt; &gt; recipient, please notify the sender immediately and do not disclose the
&gt;&gt;&gt; &gt; &gt; contents to any other person, use it for any purpose, or store or copy
&gt;&gt;&gt; &gt; &gt; the information in any medium. Thank you.
&gt;&gt; &gt; _______________________________________________
&gt;&gt; &gt; odp-fp mailing list
&gt;&gt; &gt; odp-fp@lists.enea.com
&gt;&gt; &gt; http://lists.enea.com/mailman/listinfo/odp-fp</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1</attachid>
            <date>2015-10-23 15:51:50 +0200</date>
            <delta_ts>2015-11-26 12:45:42 +0100</delta_ts>
            <desc>OFP source file structure proposal</desc>
            <filename>ofp_tree_proposal.txt</filename>
            <type>text/plain</type>
            <size>2205</size>
            <attacher name="Rasmuss">rasmuss.graaf@enea.com</attacher>
            
              <token>1485263356-RzHyenG8OpZRVxzz-n8bmKfwU86ROO7F_1xcoN8TNsE</token>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="0"
              isprivate="0"
          >
            <attachid>2</attachid>
            <date>2015-11-13 14:33:43 +0100</date>
            <delta_ts>2015-11-26 12:45:42 +0100</delta_ts>
            <desc>OFP tree proposal sent on mailing list for review</desc>
            <filename>ofp_tree_proposal.txt</filename>
            <type>text/plain</type>
            <size>2134</size>
            <attacher name="Sorin Vultureanu">sorin.vultureanu@enea.com</attacher>
            
              <token>1485263356-4TPkp-g3iF1BaS7aI7KADUTVhl2080LUG6nlAUqBmHA</token>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>3</attachid>
            <date>2015-11-26 12:45:42 +0100</date>
            <delta_ts>2015-11-26 12:45:42 +0100</delta_ts>
            <desc>OFP tree proposal REVIEWED on the list with Nokia and ARM</desc>
            <filename>ofp_tree_proposal_FINAL_REVIEWED.txt</filename>
            <type>text/plain</type>
            <size>2096</size>
            <attacher name="Sorin Vultureanu">sorin.vultureanu@enea.com</attacher>
            
              <token>1485263356-fvRQ2MwzYESGjXiFCrCcIoFIqlv3b3Hg-eOQtve-S6w</token>

          </attachment>
      

    </bug>
    <bug>
          <bug_id>55</bug_id>
          
          <creation_ts>2015-10-21 12:01:57 +0200</creation_ts>
          <short_desc>A library should avoid calling printf, exit, abort, etc.</short_desc>
          <delta_ts>2015-11-05 09:36:35 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>56</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Bogdan Pricope">bogdan.pricope@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-L9L_qtpHWtxIzDkUz2Uwc1EOXL_KBorA15JVnltU-v4</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>69</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 12:01:57 +0200</bug_when>
    <thetext></thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>97</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-05 09:36:35 +0100</bug_when>
    <thetext>

*** This bug has been marked as a duplicate of bug 56 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>56</bug_id>
          
          <creation_ts>2015-10-21 12:02:35 +0200</creation_ts>
          <short_desc>A library should avoid calling printf, exit, abort, etc. (with review)</short_desc>
          <delta_ts>2015-11-11 12:32:46 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Bogdan Pricope">bogdan.pricope@enea.com</assigned_to>
          <cc>bogdan.pricope@enea.com</cc>
    
    <cc>ciprian.barbu@enea.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-kcLjhHCayiLE_X5e9V02rnWziAhdNMosgqzE4O-XOpw</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>70</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 12:02:35 +0200</bug_when>
    <thetext></thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>88</commentid>
    <comment_count>1</comment_count>
    <who name="Ciprian Barbu">ciprian.barbu@enea.com</who>
    <bug_when>2015-11-02 14:32:52 +0100</bug_when>
    <thetext>After reviewing the odp-fp code I think these should be looked at:

ofp_arp.c:477 - show_arp_entry effectively prints to stdout (fd=1), I think a log function should be used instead.

ofp_arp.c:650 - ofp_arp_alloc_shared_memory calls abort and exit
ofp_arp_ck.c:255 - same thing for ofp_arp_alloc_shared_memory

ofp_arp.c:668 - ofp_arp_lookup_shared_memory also calls abort and exit
ofp_arp_ck.c:272 - same thing</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>98</commentid>
    <comment_count>2</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-05 09:36:35 +0100</bug_when>
    <thetext>*** Bug 55 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>57</bug_id>
          
          <creation_ts>2015-10-21 12:12:47 +0200</creation_ts>
          <short_desc>Hard-coded values such as number of port (GRE port)</short_desc>
          <delta_ts>2015-11-13 12:10:46 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - GRE</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-jj0Gcfg_-crdrRqzjMwIqQ6vTw7Fb489EMFbiMEZrQU</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>72</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 12:12:47 +0200</bug_when>
    <thetext>Hard-coded values such as number of port (GRE port) should be configurable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>100</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-13 12:10:46 +0100</bug_when>
    <thetext>Added OFP_FP_INTERFACE_MAX to global config. 
/**Maximum number of fastpath interfaces used.
 * For each fastpath interface a PKTIO in opened by OFP.*/
#define OFP_FP_INTERFACE_MAX 8

GRE_PORT is used in OFP internal. GRE_PORT = OFP_FP_INTERFACE_MAX + 1</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>58</bug_id>
          
          <creation_ts>2015-10-21 12:14:06 +0200</creation_ts>
          <short_desc>Configuration parameters like ARP timeout be configurable</short_desc>
          <delta_ts>2015-11-13 12:12:06 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - ARP/NDP</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-i8Tdwwou5QTqSX30JpZ_S_DI_jSwVwrYqGtdg8dHy2k</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>73</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-21 12:14:06 +0200</bug_when>
    <thetext></thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>101</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-13 12:12:06 +0100</bug_when>
    <thetext>Configuration parameters moved to global config.

/* Configure values */

/** Packet pool size. */
#define SHM_PKT_POOL_SIZE		(512*2048)
/** Packet pool buffer size. */
#define SHM_PKT_POOL_BUFFER_SIZE	1856
/** Packet pool user area size. */
#define SHM_PKT_POOL_USER_AREA_SIZE	16

/**Maximum number of fastpath interfaces used.
 * For each fastpath interface a PKTIO in opened by OFP.*/
#define OFP_FP_INTERFACE_MAX 8

/**Value of burst size used in default_event_dispatcher.*/
#define OFP_EVENT_BURST_SIZE 16
/**Maximum number of packets received when scheduling with schedule_multi.
 * Value in default_event_dispatcher().*/
#define OFP_PKT_SCHED_MULTI_EVENT_SIZE 16
/**Number of packets sent at once in send_pkt_burst_out() */
#define OFP_PKT_TX_BURST_SIZE 16

#ifdef MTRIE
/**Controls memory size for IPv4 MTRIE 16/8/8 data structure.
 * It defines the number of large tables (16) used to store routes.
 * MTRIE should be defined*/
#define ROUTE4_MTRIE16_TABLE_NODES 8
/**Controls memory size for IPv4 MTRIE 16/8/8 data structure.
 * It defines the number of small tables (8) used to store routes.
 * MTRIE should be defined*/
#define ROUTE4_MTRIE8_TABLE_NODES 128
/** Defines the maximum number of routes that are stored in the MTRIE.*/
#define ROUTE4_RULE_LIST_SIZE 65536
#else
/**Controls memory size for IPv4 radix tree data structure.
 * It defines the number of radix tree nodes used to store routes.
 * MTRIE feature should not be defined*/
#define ROUTE4_NODES 65536
#endif

/**Controls memory size for IPv6 radix tree data structure.
 * It defines the number of radix tree nodes used to store routes.*/
#define ROUTE6_NODES 65536

/**Arp entry table size. Controls memory size for arp entries.
 * Must be power of two */
#define ARP_ENTRY_TABLE_SIZE 2048
/**Total number of arp entries that can be stored. */
#define ARP_ENTRIES_SIZE (NUM_SETS * 4)
/**Cleanup Timer Interval (s)*/
#define ARP_CLEANUP_TIMER_INTERVAL 60
/**Arp entries are removed after this timeout interval(s)*/
#define ARP_ENTRY_TIMEOUT 1200
/**Timer trigger(s) to scan for old arp entries.*/
#define ARP_ENTRY_UPD_TIMEOUT 2
/**Time interval(s) while a packet is saved and waiting for an ARP reply. */
#define ARP_SAVED_PKT_TIMEOUT 10
/**Maximum number of saved packets waiting for an ARP reply. */
#define ARP_WAITING_PKTS_SIZE 2048</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>59</bug_id>
          
          <creation_ts>2015-10-22 10:55:59 +0200</creation_ts>
          <short_desc>Erroneously written function macros</short_desc>
          <delta_ts>2015-11-04 10:21:15 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Other</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rasmuss">rasmuss.graaf@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-f0TDroZjRM_QvGuhqs1qWlHlplS7CtykYRY69li6HnU</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>74</commentid>
    <comment_count>0</comment_count>
    <who name="Rasmuss">rasmuss.graaf@enea.com</who>
    <bug_when>2015-10-22 10:55:59 +0200</bug_when>
    <thetext>General feedback for function macros; e.g. ofp_copy_mac (ofpi_util.h).

Function macros should not contain a “;” unless it’s a multi-statement function. See https://www.securecoding.cert.org/confluence/display/c/PRE11-C.+Do+not+conclude+macro+definitions+with+a+semicolon

Function macros that are multi-statement functions should be surrounded with “do { } while(0)“, see http://stackoverflow.com/questions/257418/do-while-0-what-is-it-good-for</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>60</bug_id>
          
          <creation_ts>2015-10-22 10:59:19 +0200</creation_ts>
          <short_desc>&quot;loglevel&quot; is broken after commit 2073b2b1</short_desc>
          <delta_ts>2015-11-13 12:25:12 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>CLI - Command Line Interface</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rasmuss">rasmuss.graaf@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>sorin.vultureanu@enea.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-kF4bjuEZ047Vcqcc1sKOq8Kj52YQVplm7v0N-Jo8fYs</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>75</commentid>
    <comment_count>0</comment_count>
    <who name="Rasmuss">rasmuss.graaf@enea.com</who>
    <bug_when>2015-10-22 10:59:19 +0200</bug_when>
    <thetext>Not possible to use &quot;loglevel&quot; in the CLI after commit 2073b2b1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>77</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-22 11:03:51 +0200</bug_when>
    <thetext>Do we need to document this in bug 61 and close this case?

Fix OFP_DEBUG compile-time define
This patch fixes the situation where OFP_DEBUG_PRINT was always
passed at compile-time regardless of whether --enable-debug was
specified during the configuration stage.

With this patch, -DOFP_DEBUG will be passed iff --enable-debug
is specified. The OFP_DBG(..) logging macros will now be
compiled-out as intended.

Additionally, any code that is determined to be too much overhead
for a hot code path can be compiled out for a non-debug build:

  #if defined(OFP_DEBUG)
      // Additional debug code..
  #endif

Signed-off-by: Brian Brooks &lt;brian.brooks@arm.com&gt;
Reviewed-by: Jose Pekkarinen &lt;jose.pekkarinen@nokia.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>80</commentid>
    <comment_count>2</comment_count>
    <who name="Rasmuss">rasmuss.graaf@enea.com</who>
    <bug_when>2015-10-22 12:51:30 +0200</bug_when>
    <thetext>Hi Sorin,

Depends on how you want to treat this, as a separate bug fix or a combined bugfix and documentation effort. Anyway goes for me :)

/Rasmuss</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>81</commentid>
    <comment_count>3</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-22 12:58:00 +0200</bug_when>
    <thetext>Can we try again :) cause I don&apos;t understand what is to fix here.

The patch did this:
Only when using --enable-debug on configure operation the loglevel is available.

So this bug is not a bug, but something intended - as designed.

The only bugfix I see is to remove the loglevel command from CLI when you don&apos;t configure with --enable-debug. Is this what we suppose to do, or?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>82</commentid>
    <comment_count>4</comment_count>
    <who name="Rasmuss">rasmuss.graaf@enea.com</who>
    <bug_when>2015-10-22 16:52:35 +0200</bug_when>
    <thetext>Hi Sorin,

I haven&apos;t had time to look into the code myself yet, this is directly from E///. :)

Though, if the &apos;loglevel&apos; command do not work if the build isn&apos;t configured with &apos;--enable-debug&apos;, then not including the command in a non-debug build sounds like a reasonable approach.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>61</bug_id>
          
          <creation_ts>2015-10-22 11:00:25 +0200</creation_ts>
          <short_desc>&quot;Loglevel&quot; description is missing</short_desc>
          <delta_ts>2015-10-22 11:00:33 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Documentation</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rasmuss">rasmuss.graaf@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-YEgAmUNE7-5fUDyT7jW6vu7nsF9wIaZZN4b4X_z7p40</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>76</commentid>
    <comment_count>0</comment_count>
    <who name="Rasmuss">rasmuss.graaf@enea.com</who>
    <bug_when>2015-10-22 11:00:25 +0200</bug_when>
    <thetext></thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>62</bug_id>
          
          <creation_ts>2015-10-22 11:06:15 +0200</creation_ts>
          <short_desc>&quot;ofp_copy_mac&quot; implementation review needed</short_desc>
          <delta_ts>2015-11-04 10:20:59 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>QoS</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rasmuss">rasmuss.graaf@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-3_0CSFkFq46XBPxpPyeFsmi9py5LSBkZ67xkPwcTzHc</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>78</commentid>
    <comment_count>0</comment_count>
    <who name="Rasmuss">rasmuss.graaf@enea.com</who>
    <bug_when>2015-10-22 11:06:15 +0200</bug_when>
    <thetext>&quot;ofp_copy_mac&quot; macro consumes a lot of cycles according to E///’s measurement.

Issues with uclib compatibility, ofp_copy_mac.
Alignment requirement may be larger than 64 bit, bad alignment causes performance loss.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>63</bug_id>
          
          <creation_ts>2015-10-22 11:10:57 +0200</creation_ts>
          <short_desc>Missing configuration for ICMP redirect handling</short_desc>
          <delta_ts>2015-11-03 11:41:33 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - ICMP</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rasmuss">rasmuss.graaf@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-jMX8e_v0ZYckUsnpnDIFQwyiAV1jy8UY2BedACHYIQI</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>79</commentid>
    <comment_count>0</comment_count>
    <who name="Rasmuss">rasmuss.graaf@enea.com</who>
    <bug_when>2015-10-22 11:10:57 +0200</bug_when>
    <thetext></thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>94</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-03 11:41:33 +0100</bug_when>
    <thetext>Pushed:
Bug 63 - Missing configuration for ICMP redirect handling
70eb5247b15218ed63fbb87365c126dc7459ee1b</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>64</bug_id>
          
          <creation_ts>2015-10-22 17:01:37 +0200</creation_ts>
          <short_desc>memory allocation configuration</short_desc>
          <delta_ts>2015-11-13 12:13:27 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rasmuss">rasmuss.graaf@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-4wa0hLrGkN1mbFXZfPWgbSh--Pz1rc4OHf1MSdddaDk</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>83</commentid>
    <comment_count>0</comment_count>
    <who name="Rasmuss">rasmuss.graaf@enea.com</who>
    <bug_when>2015-10-22 17:01:37 +0200</bug_when>
    <thetext>ofp_init_global allocates a large number of GB and there is no good way for the user to control this without a deep dive into the code. It would be good to add user friendly memory configuration options.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>102</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-13 12:13:27 +0100</bug_when>
    <thetext>Added static memory configuration parameters to global config file. Lowered memory consumption on default config and build.

/**Controls memory size for IPv4 MTRIE 16/8/8 data structure.
 * It defines the number of large tables (16) used to store routes.
 * MTRIE should be defined*/
#define ROUTE4_MTRIE16_TABLE_NODES 8
/**Controls memory size for IPv4 MTRIE 16/8/8 data structure.
 * It defines the number of small tables (8) used to store routes.
 * MTRIE should be defined*/
#define ROUTE4_MTRIE8_TABLE_NODES 128
/** Defines the maximum number of routes that are stored in the MTRIE.*/
#define ROUTE4_RULE_LIST_SIZE 65536</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>65</bug_id>
          
          <creation_ts>2015-10-22 17:10:10 +0200</creation_ts>
          <short_desc>OFP automatic test framework</short_desc>
          <delta_ts>2015-11-13 12:23:21 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>ODP compatibility</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Rasmuss">rasmuss.graaf@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-NkRrm3HXgs69c8yYt49bbqnSieRvkAeqScavUECLx4M</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>84</commentid>
    <comment_count>0</comment_count>
    <who name="Rasmuss">rasmuss.graaf@enea.com</who>
    <bug_when>2015-10-22 17:10:10 +0200</bug_when>
    <thetext>Ericsson reported that ofp_init_global had compatibility issues with ODP 1.3, should a ODP version check be added to OFP?

How do we test various configurations? (what&apos;s the test scope/matrix?)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>103</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-13 12:19:17 +0100</bug_when>
    <thetext>Added support for ODP v1.4 and older versions. Older versions should be supported as build option.

All tests are applied as ODP case for latest OFP master and latest ODP version. I believe we don&apos;t intend to test all ODP versions, but only the last one, over latest master of OFP.

We should have an automatic test environment. All cunit tests should PASS with each added patch. This is done manually.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>66</bug_id>
          
          <creation_ts>2015-10-26 14:31:31 +0100</creation_ts>
          <short_desc>Implement rpl_malloc</short_desc>
          <delta_ts>2015-11-03 11:40:22 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-_vk-7SXobV5Hpi_WqAuyTEhRcF_AkVkD9JOjvUvkcYc</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>86</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-26 14:31:31 +0100</bug_when>
    <thetext>We have AC_FUNC_MALLOC in configure.h

If the malloc function is compatible with the GNU C library malloc (i.e., ‘malloc (0)’ returns a valid pointer), define HAVE_MALLOC to 1. Otherwise define HAVE_MALLOC to 0, ask for an AC_LIBOBJ replacement for ‘malloc’, and define malloc to rpl_malloc so that the native malloc is not used in the main project.

From:
https://www.gnu.org/software/autoconf/manual/autoconf-2.60/html_node/Particular-Functions.html

Implement rpl_malloc
http://paste.enea.se/NjmC/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>93</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-03 11:38:22 +0100</bug_when>
    <thetext>Pushed as:
Add rpl_malloc function for compilers that require it
1bb7c164f97b5b8388a5c8304d300fc52138c502</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>67</bug_id>
          
          <creation_ts>2015-10-26 14:43:06 +0100</creation_ts>
          <short_desc>Remove malloc from netlink where it creates odp_shm references</short_desc>
          <delta_ts>2015-10-26 14:43:06 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-KcD5wrjBSKDWZZa0F4bgmAECvrT-ia0yCvbg64jiZ1Y</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>87</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-10-26 14:43:06 +0100</bug_when>
    <thetext>malloc should not be used on Fast Path and also should not be used in the FP context.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>68</bug_id>
          
          <creation_ts>2015-11-02 14:55:08 +0100</creation_ts>
          <short_desc>ofp_arp_init_tables - unlocking does not follow the reverse order</short_desc>
          <delta_ts>2015-11-13 12:20:12 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ciprian Barbu">ciprian.barbu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-mZp9rZdKJ1xUKZ1JLqEM6M5f2MvjykQl8yHAdsfOLgQ</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>90</commentid>
    <comment_count>0</comment_count>
    <who name="Ciprian Barbu">ciprian.barbu@enea.com</who>
    <bug_when>2015-11-02 14:55:08 +0100</bug_when>
    <thetext>The function mentioned first locks all arp table entries, then other two locks (shm-&gt;arp.fr_ent_rwlock and shm-&gt;pkt.fr_ent_rwlock) but the unlock sequence is in the same order. It should rather be in reverse order.

Also these many levels of locking is potentially hazardous, it would be nice to simplify it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>104</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-13 12:20:12 +0100</bug_when>
    <thetext>available in commit:
a8aae08bf19b7f1f65371520d7d3b836f14f1924</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>69</bug_id>
          
          <creation_ts>2015-11-02 15:03:57 +0100</creation_ts>
          <short_desc>ofp_ipv4_lookup_mac - boolean variable usetime_is_old is redundant</short_desc>
          <delta_ts>2015-11-13 12:21:31 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ciprian Barbu">ciprian.barbu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-T1gG4oE-P4FUuhlbE33Fryc915Ug8hyYjiAAlmI4Vko</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>91</commentid>
    <comment_count>0</comment_count>
    <who name="Ciprian Barbu">ciprian.barbu@enea.com</who>
    <bug_when>2015-11-02 15:03:57 +0100</bug_when>
    <thetext>This variable is marked as TRUE right before the odp_unlikely statement and it&apos;s also the only place where it is set. This makes it useless and it also makes the subsequent odp_unlikely useless, time was already wasted by checking the boolean variable without branch prediction.

The following if statement (if (entry-&gt;usetime_upd_tmo == ODP_TIMER_INVALID)) is also redundant, because the check against usetime_is_old is equivalent.

The whole block should be modified to remove the usetime_is_old variable, and the check to be made like:

if (odp_unlikely(entry-&gt;usetime_upd_tmo == ODP_TIMER_INVALID))

Unless there are reasons not too (entry-&gt;usetime_upd_tmo is volatile maybe?)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>105</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-13 12:20:23 +0100</bug_when>
    <thetext>available in commit:
a8aae08bf19b7f1f65371520d7d3b836f14f1924</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>70</bug_id>
          
          <creation_ts>2015-11-02 15:17:05 +0100</creation_ts>
          <short_desc>General code style comments after code review</short_desc>
          <delta_ts>2015-11-13 12:21:18 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ciprian Barbu">ciprian.barbu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-WfmpiillU7HApnte3t4vkdwglbGLmBL8uIZcEAJtl-w</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>92</commentid>
    <comment_count>0</comment_count>
    <who name="Ciprian Barbu">ciprian.barbu@enea.com</who>
    <bug_when>2015-11-02 15:17:05 +0100</bug_when>
    <thetext>I decided to open a single bug for a number of code style comments that may or may not be entirely true for this project. Coding style is generally subjective, so I think the points I will make can be discussed and agreed upon.

1. parenthesis around macro arguments
ofp_arp.c: function ofp_ipv4_lookup_mac
This function calls the macro&apos;s ARP_IN_CACHE and ARP_SET_CACHE placing the &amp;key in parenthesis. This in my opinion should be avoided, the macro definition should place the parenthesis as a thumb rule, which makes using the parenthesis when calling the macros redundant.

2. comments aligned with code
Functions like remove_entry have comments that are not aligned to the code. This is highly subjective, but afaik ODP code does not look like this, which might be a good reason (or not) to follow the same rule in ofp code.

3. declarations in the middle of a block
Functions like entry_alloc declare variables in the middle of a block, after statements. This is of course accepted by C11, it&apos;s not accepted by C99, which is what ODP conforms to. I don&apos;t know if the FreeBSD code that is part of ofp conforms to this, and this is again a guideline, if there are arguments to not change this it can be left aside.

4. ofp_avl.c
The code is copyrighted to Sam Rushing, but some modifications were made.
The newly introduced AVL_NODEFREE, AVL_TREEFREE, AVL_TREEFREE are functions with capital letters, which is unusual for function names, they regularly indicate a macro.

5. ofp_debug_print.c
fprintf macro is confusing, it clashes with the stdio fprintf, I think it should be named to something else.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>95</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-04 11:36:35 +0100</bug_when>
    <thetext>3 patches posted on the list and waiting for review.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>96</commentid>
    <comment_count>2</comment_count>
    <who name="Ciprian Barbu">ciprian.barbu@enea.com</who>
    <bug_when>2015-11-04 15:45:07 +0100</bug_when>
    <thetext>Patches look good!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>106</commentid>
    <comment_count>3</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-13 12:21:18 +0100</bug_when>
    <thetext>available from:
8d0797adba71d1c2b6b803e4e8f9fe4a154b4986</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>71</bug_id>
          
          <creation_ts>2015-11-13 12:07:07 +0100</creation_ts>
          <short_desc>Rework of ofp_print_mac() interface</short_desc>
          <delta_ts>2015-11-13 12:07:07 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Logging</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-ETqzLdMKaklQNzBiDMKk5eScdSUWmP60WXLweBYlt-Y</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>99</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-13 12:07:07 +0100</bug_when>
    <thetext>Functionality issue:
This function can be called from two threads and provide ok results. If you call it and use it from 3 threads in the same time then it would provide bad results.

ofp_print_mac() interface is kinda unusual:
A normal usage would be:

char print_mac[24]; 
printf (&quot;mac:%s\n&quot;, ofp_print_mac(mac, print_mac));

New interface proposal would be:
char *ofp_print_mac(uint8_t* mac, char* printed_mac);

If printed_mac is NULL then the functionality is as now.
If printed_mac is valid then use this address to store mac and also return it as return value.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>72</bug_id>
          
          <creation_ts>2015-11-16 14:53:23 +0100</creation_ts>
          <short_desc>Locally access to a hosted webserver is not implemented.</short_desc>
          <delta_ts>2015-11-16 14:53:23 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>TAP / Host OS packet fallback processing</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-CseQE8p1fQCC8WyBdqbaoZl9oCf_ggXSM-T370IUdgM</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>111</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-16 14:53:23 +0100</bug_when>
    <thetext>Locally access to a hosted webserver is not implemented.

We don’t push trafic sent from slowpath to fastpath, but we push it to the real physical interface.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>73</bug_id>
          
          <creation_ts>2015-11-23 15:10:44 +0100</creation_ts>
          <short_desc>Document the existence of  fastpath_local_hook()</short_desc>
          <delta_ts>2015-11-23 15:10:44 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Example applications</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-v8H-kszzZIB6iaM-qwY1ZINkRfVwnQQGF5ae24G2-cE</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>113</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2015-11-23 15:10:44 +0100</bug_when>
    <thetext>fastpath_local_hook() function apparently does nothing.
It was created to demo the use of the hook functionality.
Some comment above the function to explain why is it here would be nice.

/** local hook
 *
 * @param pkt odp_packet_t
 * @param protocol int
 * @return int
 *
 */
static enum ofp_return_code fastpath_local_hook(odp_packet_t pkt, void *arg)
{
	int protocol = *(int *)arg;
	(void) pkt;
	(void) protocol;
	return OFP_PKT_CONTINUE;
}</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>74</bug_id>
          
          <creation_ts>2016-01-14 09:47:36 +0100</creation_ts>
          <short_desc>Ping sent from Linux is not working</short_desc>
          <delta_ts>2016-01-14 14:23:16 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>TAP / Host OS packet fallback processing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-bZpynE3S-vx6f_IDgzRQ3vzlsVDJN_xfdcBVRSsYWrM</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>147</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-01-14 09:47:36 +0100</bug_when>
    <thetext>The ICMP Reply is captured by OFP. We should fallback the ICMP Replies to Slow path.

The solution might be a oneline change on the return value of ICMP reply processing function.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>148</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-01-14 14:23:16 +0100</bug_when>
    <thetext>David Nystrom: there seems to be some ARP table bouncing if a ping over TAP interface is attempted. It also makes a laptop usable as a test environment without loosing local network connectivity :)</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>75</bug_id>
          
          <creation_ts>2016-01-20 14:53:42 +0100</creation_ts>
          <short_desc>Test ODP ordered queue support</short_desc>
          <delta_ts>2016-01-20 14:57:07 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>ODP compatibility</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Bogdan Pricope">bogdan.pricope@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-ZK04Q8hF8waCVvBSy1n1oSu2khH50KkeufxDmJj0ViM</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>149</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2016-01-20 14:53:42 +0100</bug_when>
    <thetext>Test ODP ordered queue support</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>76</bug_id>
          
          <creation_ts>2016-02-08 11:08:37 +0100</creation_ts>
          <short_desc>Pointers in shared memory work only in some environments</short_desc>
          <delta_ts>2016-03-04 10:45:55 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Route and mac interface</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-gSe-_LrLiIw1OdLV4cHv6HD-fGdsnqIVw4TfxqdIYwk</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>150</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-02-08 11:08:37 +0100</bug_when>
    <thetext>free_* pointers and pointers in ofp_rtl_node structure should be avoided.

A SHM will have different pointer values on each context.

Now it seems this works because threads have access to the same addresses.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>156</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-03-04 10:45:55 +0100</bug_when>
    <thetext>The shm pointers should be equall on all threads/processes.
On linux environment this happens, but this might be true for all environments.

In this case the redesign work to replace pointers with some indexes in shm would be masive.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>77</bug_id>
          
          <creation_ts>2016-02-08 11:16:36 +0100</creation_ts>
          <short_desc>Socket memory is not shared so using multiple processes hangs execution</short_desc>
          <delta_ts>2016-11-22 15:04:04 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Socket API</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-tg0FxLE3600f1xSokIi8b3sf-uELSouJKdE5W0su-3U</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>151</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-02-08 11:16:36 +0100</bug_when>
    <thetext>1. //static __thread struct ofp_socket_mem *shm;
static struct ofp_socket_mem *shm;

2. sleep_list and free_sockets should not use pointers

Consequence:
Because of no shared structure and the sleeper_list, when using multi-process workers these can hang in ofp_msleep waiting for other processes to wake them up. This seems to work for thread workers that have access to a global structure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>205</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-11-22 15:04:04 +0100</bug_when>
    <thetext>Fixed in:

commit a235384b252f26a4f019b873311b19edaefa3717
Author: Hannu Jokinen &lt;hannu.jokinen@nokia.com&gt;
Date:   Tue Jul 5 09:29:08 2016 +0300

    Sleeper structs moved to shared memory and sched_yield called instead of usleep.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>78</bug_id>
          
          <creation_ts>2016-02-08 14:53:02 +0100</creation_ts>
          <short_desc>select NULL timeout not supported</short_desc>
          <delta_ts>2016-03-04 10:41:41 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Socket API</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-8HIY0oasobccD9jkWpso1EO6GNJdtjoTZ_1sFiGlviQ</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>152</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-02-08 14:53:02 +0100</bug_when>
    <thetext>NULL parameter on timeout value for select should be supported.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>155</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-03-04 10:41:41 +0100</bug_when>
    <thetext>Bug fixed and pushed in:
bc63e1adae186c89f960d5e18e2af86f246c6312

Patch name: &quot;Handle timeout 0 or NULL in select.&quot;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>79</bug_id>
          
          <creation_ts>2016-03-04 10:31:56 +0100</creation_ts>
          <short_desc>Parameters from ofp_config.h should be configurable.</short_desc>
          <delta_ts>2016-03-04 10:31:56 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Initiation Interface</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-v55GlQ8DfR-_y0U5W9ri1ZFrfzq4OUXU-nSxkOGsk5Y</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>153</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-03-04 10:31:56 +0100</bug_when>
    <thetext>Need to find a way on how to init these from application or to have more predefined patterns activated from configure script.

For example, in the TCP webserver usecase one needs to have a patch over OFP:
 /** Packet pool size. */
-#define SHM_PKT_POOL_SIZE              (512*2048)
+#define SHM_PKT_POOL_SIZE              (512*2048*8*2)
 
 /**Maximum number of sockets. */
-#define OFP_NUM_SOCKETS_MAX 1024
+#define OFP_NUM_SOCKETS_MAX 60000</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>80</bug_id>
          
          <creation_ts>2016-03-04 10:40:26 +0100</creation_ts>
          <short_desc>In Ubuntu 15.04 the network route is removed</short_desc>
          <delta_ts>2016-03-04 10:40:26 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Netlink config notifications</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-gFnZiy3JUlcZbYEBXVxIu-k_IAxuuakU6FsJA1xuk_w</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>154</commentid>
    <comment_count>0</comment_count>
      <attachid>4</attachid>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-03-04 10:40:26 +0100</bug_when>
    <thetext>Created attachment 4
Patch that solves the problem for me.

When moving to Ubuntu 15.04 there are two add notifications for a network and then one erase notification.

The route table will then be erased and the next hop route is not found.

I made a hack but then figured out that one should investigate if Netlink code really sends two identic notifications as seen from the log trace.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>4</attachid>
            <date>2016-03-04 10:40:26 +0100</date>
            <delta_ts>2016-03-04 10:40:26 +0100</delta_ts>
            <desc>Patch that solves the problem for me.</desc>
            <filename>0001-Fix-for-Ubuntu-15.04.patch</filename>
            <type>application/mbox</type>
            <size>2852</size>
            <attacher name="Sorin Vultureanu">sorin.vultureanu@enea.com</attacher>
            
              <token>1485263356-bawIdlWDrOOpvGWTwa2Lw1qkTbez3699n5z731rMXrg</token>

          </attachment>
      

    </bug>
    <bug>
          <bug_id>81</bug_id>
          
          <creation_ts>2016-03-10 19:47:43 +0100</creation_ts>
          <short_desc>UDP multicast send is broken (as is UDP broadcast)</short_desc>
          <delta_ts>2016-11-22 15:00:47 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - UDP</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="David Yoakley">david.yoakley@gmail.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-9DjUL5z1Zdd3lgG7h3zv0pvTgMM3IPS4sOTna_FTrjU</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>157</commentid>
    <comment_count>0</comment_count>
    <who name="David Yoakley">david.yoakley@gmail.com</who>
    <bug_when>2016-03-10 19:47:43 +0100</bug_when>
    <thetext>I extended the multicast example so that it sends multicast (it currently receives mulitcast and then replies unicast to the sender which works) but I can&apos;t find a path to actually sending multicast.  

To narrow it down, I created a separate socket and attempted to send to the mc group.  First I tried sending to the group without first binding the socket (which should work).  I get &quot;invalid arg&quot; errno.  Binding the socket to my interface/ip then I get an I/O error errno.

Finally I also testing broadcast.  It does not work either (I think I got i/o error on that too and looking at the code I don&apos;t see where it resolves the broadcast address; perhaps this is still a work in progress).

#define IP4(a, b, c, d) (a|(b&lt;&lt;8)|(c&lt;&lt;16)|(d&lt;&lt;24))
#define MY_PORT 2048
#define MCAST_IP IP4(234,7,7,7)

--- snip ----

    memset(&amp;my_addr, 0, sizeof(my_addr));
    my_addr.sin_family = OFP_AF_INET;
    my_addr.sin_port = odp_cpu_to_be_16(MY_PORT +1);
    my_addr.sin_addr.s_addr = myaddr;
    my_addr.sin_len = sizeof(my_addr);

    if (ofp_bind(bcastFd, (struct ofp_sockaddr *)&amp;my_addr,
               sizeof(struct ofp_sockaddr)) &lt; 0) {
        lmDebug(LM_DEBUG, lmInternode, &quot;Cannot bind mcast socket (%s)!\n&quot;, ofp_strerror(ofp_errno));
        return NULL;
    }
    for(;;) {
    --- snip ---

        //
        // Send multicast
        //
        char buff2[20];
        sprintf(buff2, &quot;hello\n&quot;);

        struct ofp_sockaddr_in bcast_addr;
        memset(&amp;bcast_addr, 0, sizeof(bcast_addr));
        bcast_addr.sin_family = OFP_AF_INET;
        bcast_addr.sin_port = odp_cpu_to_be_16(MY_PORT +1);
        bcast_addr.sin_addr.s_addr = MCAST_IP;
        bcast_addr.sin_len = sizeof(bcast_addr);

        if (ofp_sendto(bcastFd, buff2, strlen(buff2), 0,
                   (struct ofp_sockaddr *)&amp;bcast_addr,
                   sizeof(bcast_addr)) == -1) {
            lmDebug(LM_DEBUG, lmInternode,&quot;run %d Faild to send data (errno = %s)\n&quot;, i, ofp_strerror(ofp_errno));
        }
    }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>158</commentid>
    <comment_count>1</comment_count>
      <attachid>5</attachid>
    <who name="David Yoakley">david.yoakley@gmail.com</who>
    <bug_when>2016-03-10 19:56:48 +0100</bug_when>
    <thetext>Created attachment 5
full source for mcast test thread</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>5</attachid>
            <date>2016-03-10 19:56:48 +0100</date>
            <delta_ts>2016-03-10 19:56:48 +0100</delta_ts>
            <desc>full source for mcast test thread</desc>
            <filename>mcast.c</filename>
            <type>text/x-csrc</type>
            <size>7643</size>
            <attacher name="David Yoakley">david.yoakley@gmail.com</attacher>
            
              <token>1485263356-FXfTC32p-J3fnvr9BBbOJQWcWxy5O92NUfmSx-pAisQ</token>

          </attachment>
      

    </bug>
    <bug>
          <bug_id>82</bug_id>
          
          <creation_ts>2016-04-07 16:44:50 +0200</creation_ts>
          <short_desc>tcp corruption during ingress</short_desc>
          <delta_ts>2016-11-22 15:19:24 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Ingress Packet processing</component>
          <version>unspecified</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>blocker</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="David Yoakley">david.yoakley@gmail.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>jpreston@infiniteio.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-K88WX20dWoRIQ81dufQIBtOszUjDBhxShMuaSNJ9DzU</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>159</commentid>
    <comment_count>0</comment_count>
    <who name="David Yoakley">david.yoakley@gmail.com</who>
    <bug_when>2016-04-07 16:44:50 +0200</bug_when>
    <thetext>Tested in 1.0 and also on commit e836e37e190891e34635c7ca4722e78886d1a780 (April 6).

I believe I&apos;ve uncovered a tcp receive problem and need advice on how to narrow it further as this is a blocking issue for us.

This is what I have observed:
1) inbound packets sometimes get garbled on the socket (e.g. not on the wire).
2) I&apos;ve only been able to reproduce when testing message bursts. 
3) The amount of data received is always what is expected and asked for in the blocking call but the data content is garbled.
4) The garbled data is composed of valid data that is expected for that inbound message body but it is shifted. The amount of shift varies but its usually small, usually 64 bits.
5) Not shown here but I&apos;ve logged the data just as its put on the socket and its never corrupted there.  I&apos;ve also wire sharked this and verified that the data looks correct over the wire.  This what makes me think its a receive problem.
6) I tried it with a non-blocking receiver (e.g. socket timeout and test for bytes received) and seems to occur that way too.

Details: 

Using tcp for messaging.  The message length is written to the socket and then the message, and pulled off in a similar fashion (see code below).

The problem can be reproduced with a pair of sockets on the same node (a local loop back) or between between two nodes.  The PCAP looks right with no evident corruption so the problem seems to be on the socket receive.  As mentioned it reproduces in both 1.0 and in current code as of today.  

Here is the code receiving tcp data.  Note: I realize this is a naive framing solution but it was enough to demonstrate tcp messaging and to surface the problem.

    char buf[2048];
    InternodeMsg_t * iMsg;
    int r;

    if (ofp_init_local()) {
        logError(&quot;CLIENT RX: Error: OFP local init failed.&quot;);
        return NULL;
    }

    while(!closed)
    {
        uint32_t msgLength;

        // Put a debug pattern on the buffer so we can distinguish what we receive
        // This way we know that the data logged really did come off the socket.
        memset(buf, &apos;#&apos;, sizeof(buf));

        iMsg = (InternodeMsg_t *)&amp;buf[0];

        r = ofp_recv(fd, &amp;msgLength, sizeof(msgLength), 0);

        if (r &gt; 0) {

            r = ofp_recv(fd, buf, msgLength, 0);

            if (r &gt; 0 &amp;&amp; iMsgSmellsValid(iMsg, r)) {
                // dump the message
                char label[50];
                sprintf(label,&quot;CLIENT RX #%d: iMSG:&quot;, rxCount);
                hexDump(lmInternode, label, iMsg, msgLength);

--- snip ---

// A modest frame checker...

// The first condition below is the one that triggers because the magic cookie
// in the message header is not correct.  But the message length prefix and the
// the number of bytes received (the message body) seems to always be correct. 

static int iMsgSmellsValid(InternodeMsg_t *iMsg, int bytesReceived){
   int dump = MAX(bytesReceived, internode_msg_size(iMsg));
   if (iMsg-&gt;header.magic != INM_MAGIC) {
       logWarn(&quot;CLIENT RX #%d: Discarding invalid internode message. Framing error.&quot;, rxCount);
       hexDump(lmInternode, &quot;CLIENT RX: iMSG:&quot;, iMsg, dump);
       return 0;
   }
   if (iMsg-&gt;header.msgType &lt;= 0 || iMsg-&gt;header.msgType &gt;= MSG_MAX_TYPES) {
       logWarn(&quot;CLIENT RX #%d: Discarding invalid internode message. Invalid msgType %s&quot;, rxCount, iMsg-&gt;header.msgType);
       hexDump(lmInternode, &quot;CLIENT RX: iMSG:&quot;, iMsg, dump);
       return 0;
   }
   if (bytesReceived &lt; (int) sizeof(((InternodeMsg_t*)0)-&gt;header)) {
       logWarn(&quot;CLIENT RX: Discarding invalid internode message. Framing error, insufficient bytes received&quot;);
       return 0;
   }

   return 1;
}


Below are two typical packet messages.  Note the 0a, its the message version.  

Note the Z4, its the magic cookie in the header that we look for to know if the message was framed correctly (we also test message length for the given message type but the message length is always produced correctly).

The &quot;AAAA...&quot; starts the data portion then a timestamp (cpu cycles) then the data ends in the same &quot;AAAA...&quot; sequence.

DEBUG INTERNODE CLIENT RX #356: iMSG: @0x7fffe0ff1d20 length=92
DEBUG INTERNODE     0000  0a 00 00 00 5a 34 12 a5 01 00 00 00 02 01 00 00  ....Z4..........
DEBUG INTERNODE     0010  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
DEBUG INTERNODE     0020  87 01 00 00 00 00 00 00 41 41 41 41 41 41 41 41  ........AAAAAAAA
DEBUG INTERNODE     0030  41 41 41 41 41 41 41 41 41 41 41 41 00 00 00 00  AAAAAAAAAAAA....
DEBUG INTERNODE     0040  5b 4f 90 d9 e5 1a 00 00 41 41 41 41 41 41 41 41  [O......AAAAAAAA
DEBUG INTERNODE     0050  41 41 41 41 41 41 41 41 41 41 41 41              AAAAAAAAAAAA
DEBUG INTERNODE --------------- tcpSelfTestResponse loopback success: 67432107 cycles (0.027035 seconds) -------------

Note in this message the header is the same and data portion now has &quot;BBB...&quot; sequences.

DEBUG INTERNODE CLIENT RX #357: iMSG: @0x7fffe0ff1d20 length=92
DEBUG INTERNODE     0000  0a 00 00 00 5a 34 12 a5 01 00 00 00 02 01 00 00  ....Z4..........
DEBUG INTERNODE     0010  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
DEBUG INTERNODE     0020  88 01 00 00 00 00 00 00 42 42 42 42 42 42 42 42  ........BBBBBBBB
DEBUG INTERNODE     0030  42 42 42 42 42 42 42 42 42 42 42 42 00 00 00 00  BBBBBBBBBBBB....
DEBUG INTERNODE     0040  c7 50 90 d9 e5 1a 00 00 42 42 42 42 42 42 42 42  .P......BBBBBBBB
DEBUG INTERNODE     0050  42 42 42 42 42 42 42 42 42 42 42 42              BBBBBBBBBBBB

Here is where things go bad.  We get no header but instead get then &quot;CCCCC...&quot; that is expected to follow the header.

DEBUG INTERNODE --------------- tcpSelfTestResponse loopback success: 67522991 cycles (0.027072 seconds) -------------
WARN INTERNODE CLIENT RX #358: Discarding invalid internode message. Framing error.
DEBUG INTERNODE CLIENT RX: iMSG: @0x7fffe0ff1d20 length=92
DEBUG INTERNODE     0000  43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43  CCCCCCCCCCCCCCCC
DEBUG INTERNODE     0010  00 00 00 00 58 f4 91 d9 e5 1a 00 00 43 43 43 43  ....X.......CCCC
DEBUG INTERNODE     0020  43 43 43 43 43 43 43 43 43 43 43 43 43 43 43 43  CCCCCCCCCCCCCCCC
DEBUG INTERNODE     0030  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
DEBUG INTERNODE     0040  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
DEBUG INTERNODE     0050  00 00 00 00 00 00 00 00 00 00 00 00              ............

The next message is fine (everything heals and the app carries on for a while).

DEBUG INTERNODE CLIENT RX #359: iMSG: @0x7fffe0ff1d20 length=92
DEBUG INTERNODE     0000  0a 00 00 00 5a 34 12 a5 01 00 00 00 02 01 00 00  ....Z4..........
DEBUG INTERNODE     0010  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
DEBUG INTERNODE     0020  8a 01 00 00 00 00 00 00 44 44 44 44 44 44 44 44  ........DDDDDDDD
DEBUG INTERNODE     0030  44 44 44 44 44 44 44 44 44 44 44 44 00 00 00 00  DDDDDDDDDDDD....
DEBUG INTERNODE     0040  36 ff 91 d9 e5 1a 00 00 44 44 44 44 44 44 44 44  6.......DDDDDDDD
DEBUG INTERNODE     0050  44 44 44 44 44 44 44 44 44 44 44 44              DDDDDDDDDDDD</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>160</commentid>
    <comment_count>1</comment_count>
    <who name="David Yoakley">david.yoakley@gmail.com</who>
    <bug_when>2016-04-14 16:45:30 +0200</bug_when>
    <thetext>Hi David,
 
I have started the investigation on this issue.
It seems the data is provided to application at the wrong offset. As you report the offset is (always) wrong by 52 bytes.
This offset shift can happen on the many odp_packet_pull_head() operations or in odp_packet_copydata_out().
 
The data flow to receive a data on a socket is like this:
Receive TCP packet.
First processing phase is to drop headers, alling data, and save packet on sockbuf for the next phase:
ofp_tcp_input() -&gt; ofp_tcp_do_segment() -&gt; ofp_sbappendstream_locked()
The second asynchronous phase is triggered by receive call from application. This will copy data from packet saved on sockbuf to buffer provided by application:
ofp_soreceive_generic() -&gt; odp_packet_copydata_out()
 
To move forward I can provide you a patch to debug the offsets.
Please confirm that you are willing to help debugging this issue on your side.
 
Meanwhile, I will try to reproduce this on our side.

Kind Regards,
Sorin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>161</commentid>
    <comment_count>2</comment_count>
      <attachid>6</attachid>
    <who name="David Yoakley">david.yoakley@gmail.com</who>
    <bug_when>2016-04-14 17:05:52 +0200</bug_when>
    <thetext>Created attachment 6
tpc receive patch

Patch with instrumentation</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>164</commentid>
    <comment_count>3</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-04-15 16:27:41 +0200</bug_when>
    <thetext>Hi,

Can you try if the problem reproduces with latest OFP master at commit:
commit f6aee6c3503ddf827096139525c2a9169bef8ca4

I am not sure if this change is needed:
@@ -1875,10 +1894,18 @@
 					goto release;
 				}
 			}
-			m = ofp_sockbuf_remove_first(&amp;so-&gt;so_rcv);
+
+			m = ofp_sockbuf_get_first(&amp;so-&gt;so_rcv);

Kind Regards,
Sorin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>166</commentid>
    <comment_count>4</comment_count>
    <who name="Jason Preston">jpreston@infiniteio.com</who>
    <bug_when>2016-04-16 00:32:09 +0200</bug_when>
    <thetext>That change from the last comment was mine.  I think it&apos;s needed in the case when we are waiting for x bytes (MSG_WAITALL) and we receive a packet with more than x bytes.  If we remove the first packet we can satisfy the current request but throw away the remaining data in the packet.  If instead we call get_first we keep the remaining data.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>206</commentid>
    <comment_count>5</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-11-22 15:19:13 +0100</bug_when>
    <thetext>Fixed by bbee2ffe577ac72a64dd48ae426e541237d0de1d and b91dcb2a5cd9871fcb5692f6144458b6cd22ee38.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>207</commentid>
    <comment_count>6</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-11-22 15:19:24 +0100</bug_when>
    <thetext>Fixed by bbee2ffe577ac72a64dd48ae426e541237d0de1d and b91dcb2a5cd9871fcb5692f6144458b6cd22ee38.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>6</attachid>
            <date>2016-04-14 17:05:52 +0200</date>
            <delta_ts>2016-04-14 17:05:52 +0200</delta_ts>
            <desc>tpc receive patch</desc>
            <filename>recv</filename>
            <type>text/plain</type>
            <size>3333</size>
            <attacher name="David Yoakley">david.yoakley@gmail.com</attacher>
            
              <token>1485263356-Nv9Dd0vfHkoDQ60krqSlrAEXahRWSf3p7sQycIKvmmA</token>

          </attachment>
      

    </bug>
    <bug>
          <bug_id>83</bug_id>
          
          <creation_ts>2016-04-14 20:36:21 +0200</creation_ts>
          <short_desc>Data duplication on transmit</short_desc>
          <delta_ts>2016-11-22 15:20:01 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Egress Packet processing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jason Preston">jpreston@infiniteio.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-dB-OLtSxOVDmdxb5Ex1TrPohCjOQTddfgYuufLNoshA</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>162</commentid>
    <comment_count>0</comment_count>
    <who name="Jason Preston">jpreston@infiniteio.com</who>
    <bug_when>2016-04-14 20:36:21 +0200</bug_when>
    <thetext>I&apos;ve encountered a problem which causes data sent on a socket to sometimes be transmitted twice on the wire.  It appears that when there is a recv call waiting for more data to fulfill a request (MSG_WAITALL set) and there is a send call, the rx and tx threads can both call into ofp_tcp_output at the same time resulting in duplicate data on the wire.

I instrumented my build and captured the following events when trying to send four bytes of data:

ofp_tcp_input:594: enter
ofp_tcp_do_segment:1350: enter, tp-&gt;snd_nxt: 2775647912, snd_max: 2775647912, sb_cc: 0, t_flags=3E0
ofp_tcp_do_segment:1742: calling output, tp-&gt;snd_nxt: 2775647912, snd_max: 2775647912, sb_cc: 0, t_flags=3E0
ofp_tcp_output:187: enter, tp-&gt;snd_nxt: 2775647912, snd_max: 2775647912, snd_una: 2775647912, sb_cc: 0, t_flags=3E1
ofp_tcp_output:483: tp-&gt;snd_nxt: 2775647912, sb_cc: 0
ofp_tcp_output:1369: exit
tcp_output_rcvd:301: calling ofp_tcp_output
ofp_tcp_output:187: enter, tp-&gt;snd_nxt: 2775647912, snd_max: 2775647912, snd_una: 2775647912, sb_cc: 0, t_flags=3E0
ofp_tcp_output:483: tp-&gt;snd_nxt: 2775647912, sb_cc: 0
ofp_tcp_output:638: exit
tcp_output_rcvd:301: calling ofp_tcp_output
ofp_tcp_output:187: enter, tp-&gt;snd_nxt: 2775647912, snd_max: 2775647912, snd_una: 2775647912, sb_cc: 0, t_flags=3E0
ofp_tcp_output:483: tp-&gt;snd_nxt: 2775647912, sb_cc: 0
ofp_tcp_output:638: exit
tcp_output_rcvd:301: calling ofp_tcp_output
ofp_tcp_output:187: enter, tp-&gt;snd_nxt: 2775647912, snd_max: 2775647912, snd_una: 2775647912, sb_cc: 0, t_flags=3E0
ofp_tcp_output:483: tp-&gt;snd_nxt: 2775647912, sb_cc: 0
ofp_tcp_output:638: exit
tcp_output_rcvd:301: calling ofp_tcp_output
ofp_tcp_output:187: enter, tp-&gt;snd_nxt: 2775647912, snd_max: 2775647912, snd_una: 2775647912, sb_cc: 0, t_flags=3E0
ofp_tcp_output:483: tp-&gt;snd_nxt: 2775647912, sb_cc: 0
ofp_tcp_output:638: exit
tcp_output_rcvd:301: calling ofp_tcp_output
ofp_tcp_output:187: enter, tp-&gt;snd_nxt: 2775647912, snd_max: 2775647912, snd_una: 2775647912, sb_cc: 0, t_flags=3E0
ofp_tcp_output:483: tp-&gt;snd_nxt: 2775647912, sb_cc: 0
ofp_tcp_output:638: exit
tcp_output_rcvd:301: calling ofp_tcp_output
ofp_tcp_output:187: enter, tp-&gt;snd_nxt: 2775647912, snd_max: 2775647912, snd_una: 2775647912, sb_cc: 0, t_flags=3E0
ofp_tcp_output:483: tp-&gt;snd_nxt: 2775647912, sb_cc: 0
ofp_tcp_output:638: exit
tcp_output_rcvd:301: calling ofp_tcp_output
ofp_tcp_output:187: enter, tp-&gt;snd_nxt: 2775647912, snd_max: 2775647912, snd_una: 2775647912, sb_cc: 0, t_flags=3E0
ofp_tcp_output:483: tp-&gt;snd_nxt: 2775647912, sb_cc: 0
tcp_usr_send:861: calling tcp_output_send, snd_nxt: 2775647912
tcp_output_send:289: calling ofp_tcp_output
ofp_tcp_output:187: enter, tp-&gt;snd_nxt: 2775647912, snd_max: 2775647912, snd_una: 2775647912, sb_cc: 4, t_flags=3E0
ofp_tcp_output:483: tp-&gt;snd_nxt: 2775647912, sb_cc: 4
ofp_tcp_output:850: copyout snd_nxt: 2775647912, snd_una: 2775647912, sb_cc: 4, len: 4, off: 0
ofp_tcp_output:483: tp-&gt;snd_nxt: 2775647916, sb_cc: 4
// ??????????
ofp_tcp_output:850: copyout snd_nxt: 2775647916, snd_una: 2775647912, sb_cc: 4, len: 4, off: 0
ofp_tcp_output:1369: exit
tcp_output_rcvd:301: calling ofp_tcp_output
ofp_tcp_output:187: enter, tp-&gt;snd_nxt: 2775647920, snd_max: 2775647920, snd_una: 2775647912, sb_cc: 4, t_flags=3E0
ofp_tcp_output:483: tp-&gt;snd_nxt: 2775647920, sb_cc: 4
ofp_tcp_output:638: exit
tcp_output_rcvd:301: calling ofp_tcp_output
ofp_tcp_output:187: enter, tp-&gt;snd_nxt: 2775647920, snd_max: 2775647920, snd_una: 2775647912, sb_cc: 4, t_flags=3E0
ofp_tcp_output:483: tp-&gt;snd_nxt: 2775647920, sb_cc: 4
ofp_tcp_output:638: exit
tcp_output_rcvd:301: calling ofp_tcp_output
ofp_tcp_output:187: enter, tp-&gt;snd_nxt: 2775647920, snd_max: 2775647920, snd_una: 2775647912, sb_cc: 4, t_flags=3E0
ofp_tcp_output:483: tp-&gt;snd_nxt: 2775647920, sb_cc: 4
ofp_tcp_output:638: exit

In this case I would expect snd_nxt to advance from 2775647912 to 2775647916 with one copyout.  I have a pcap that confirms the 4 bytes of data appear on the wire twice.  

I wonder if this could be related to the no_unlock behavior in ofp_do_tcp_segment, but I don&apos;t really understand what that&apos;s trying to do.  It sure seems like some serialization is missing though.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>163</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-04-15 16:09:26 +0200</bug_when>
    <thetext>Hi,

Please try if this patch posted to the mailing-list fixes the issue:

[openfastpath] [RFQ PATCH] BUG-FIX 83 so_snd lock should cover more

Kind Regards,
Sorin</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>165</commentid>
    <comment_count>2</comment_count>
    <who name="Jason Preston">jpreston@infiniteio.com</who>
    <bug_when>2016-04-16 00:14:48 +0200</bug_when>
    <thetext>Yup, that patch helped.  Thanks for the prompt turnaround on this.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>84</bug_id>
          
          <creation_ts>2016-04-19 14:46:44 +0200</creation_ts>
          <short_desc>ofp example applications are missing from instalation</short_desc>
          <delta_ts>2016-04-19 14:46:44 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Example applications</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Razvan">razvan.grama@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-Ied4VbVzCz5lr2G8ucb5sDLp5IoYaTFGxxAc_ny-aKo</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>167</commentid>
    <comment_count>0</comment_count>
    <who name="Razvan">razvan.grama@enea.com</who>
    <bug_when>2016-04-19 14:46:44 +0200</bug_when>
    <thetext>scripts and example applications (fpm) are not automatically installed along with the libs and binaries when using --prefix option</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>85</bug_id>
          
          <creation_ts>2016-04-22 09:33:29 +0200</creation_ts>
          <short_desc>Adding new rules is inefficient</short_desc>
          <delta_ts>2016-12-07 14:53:42 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Antero Nousiainen">antero.nousiainen@nokia.com</reporter>
          <assigned_to name="Dapeng Liu">dapeng.liu@linaro.org</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-AzrLgvEGMu09pCOzLIOWNnZtM0FfAyCpUbSjIjVIE_A</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>168</commentid>
    <comment_count>0</comment_count>
      <attachid>7</attachid>
    <who name="Antero Nousiainen">antero.nousiainen@nokia.com</who>
    <bug_when>2016-04-22 09:33:29 +0200</bug_when>
    <thetext>Created attachment 7
A unit test case that reveals the inefficiency

Filling up the rule table (ofp_rt_rule_add() function defined in ofp_rt_mtrie_lookup.c) takes far too long (on one environment it took over 30s). This is because the whole table is first searched for an existing rule and if none is found the table is searched again for the first unused rule which in the worst case will again go through the whole table.

Attached a patch for a unit test case that reveals this issue.

# test/cunit/ofp_test_rt_mtrie_lookup


     CUnit - A unit testing framework for C - Version 2.1-2
     http://cunit.sourceforge.net/


Suite: ofp rt mtrie lookup
  Test: Insert returns data when allocation fails ...passed
  Test: Insert does nothing when current mask is bigger ...passed
  Test: Insert with second level mask updates unset mask ...passed
  Test: Insert with second level mask allocates new nodes ...passed
  Test: Print nothing when no rules added ...passed
  Test: When adding rule existing is updated ...passed
  Test: When adding rule first unused slot is used ...passed
  Test: Adding rule when full discards rule ...passed
  Test: Removing unset rule does nothing ...passed

Run Summary:    Type  Total    Ran Passed Failed Inactive
              suites      1      1    n/a      0        0
               tests      9      9      9      0        0
             asserts     20     20     20      0      n/a

Elapsed time =   35.546 seconds</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>7</attachid>
            <date>2016-04-22 09:33:29 +0200</date>
            <delta_ts>2016-04-22 09:33:29 +0200</delta_ts>
            <desc>A unit test case that reveals the inefficiency</desc>
            <filename>add_rules.patch</filename>
            <type>text/plain</type>
            <size>1395</size>
            <attacher name="Antero Nousiainen">antero.nousiainen@nokia.com</attacher>
            
              <token>1485263356--xdvMsj7f0wM44bn5g0rIMMgVgb5g9Cua0eXluzp6KI</token>

          </attachment>
      

    </bug>
    <bug>
          <bug_id>86</bug_id>
          
          <creation_ts>2016-05-10 14:34:58 +0200</creation_ts>
          <short_desc>DNS address hard-coded in reset scripts</short_desc>
          <delta_ts>2016-05-10 14:34:58 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Testing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Razvan">razvan.grama@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-jpkUcAh1G3ZZHffTr9VDm0Vr4DFehyxjAfhs7K8ptqY</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>169</commentid>
    <comment_count>0</comment_count>
    <who name="Razvan">razvan.grama@enea.com</who>
    <bug_when>2016-05-10 14:34:58 +0200</bug_when>
    <thetext>Following scripts set the nameserver to some hard-coded value instead of previous working address:

reset_classifier.sh
reset_device.sh
reset_socket.sh

This is something that can be changed/improved</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>87</bug_id>
          
          <creation_ts>2016-05-10 14:55:26 +0200</creation_ts>
          <short_desc>socket tests results format</short_desc>
          <delta_ts>2016-05-10 14:55:26 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Testing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Razvan">razvan.grama@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-1mmB6kRNNcwDyBDHBwK0UB7UMx0V8F9Fk9PWF9Ei_TI</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>170</commentid>
    <comment_count>0</comment_count>
    <who name="Razvan">razvan.grama@enea.com</who>
    <bug_when>2016-05-10 14:55:26 +0200</bug_when>
    <thetext>In order to make it easy to automate and interpret the socket test results (./example/socket/socket), they should be provided in more friendly way. 

Currently for every test suite, you have the status returned by the underlying workers, but not the results of the whole suite, which I think is what matters when deciding if a suite is passed or failed:

Suite: IPv4 UDP socket: create and close.
43.262  I 505 0:1669326592 socket_create_close.c:41] SUCCESS.
43.264  I 505 0:1677719296 socket_create_close.c:24] SUCCESS.
43.266  I 505 3:1942341696 socket_main.c:141] Test ended.
43.268  I 505 3:1942341696 socket_main.c:143]

43.424  Suite: IPv6 UDP socket: connect + shutdown.
43.427  E 510 0:1677719296 socket_connect_udp.c:219] Faild to bind socket (errno = 49)
43.429  I 510 0:1669326592 socket_connect_udp.c:203] SUCCESS.
43.431  I 510 3:1942341696 socket_main.c:238] Test ended.
43.433  I 510 3:1942341696 socket_main.c:240]

Having the results output like below will make it easier to parse and count:
Suite:&lt;IPver Prot&gt;:&lt;Suite Name&gt;:&lt;SUCCESS|FAIL|SKIP&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>88</bug_id>
          
          <creation_ts>2016-05-25 09:26:33 +0200</creation_ts>
          <short_desc>Inbound TCP connection has erroneous packet flow</short_desc>
          <delta_ts>2016-10-05 11:29:11 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - TCP</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-kjqFbZe3F7Xf7jAt4Z_HLM9xCVBIIBiG9B8o3BStE00</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>171</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2016-05-25 09:26:33 +0200</bug_when>
    <thetext>Inbound TCP connection has erroneous packet flow 

In attached capture file, for the first connection, we can see a number of duplicated FIN + ACK segments. After that, connection is cleared with RESET.

This may have significant impact on connection rate performance indicator.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>188</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-10-05 11:29:11 +0200</bug_when>
    <thetext>Was fixed in:
ff17ff7aa0fe62ff4a776e13951ce6146b489bfb

TCP: remove the setting of ACKNOW flag when processing tcp input
Even needoutput is 1, it does&apos;t mean that we can send ACK directly
under any conditions, more will be checked in ofp_tcp_output.
This fixes the following bug when tcp connection is closing.
https://issues.openipfastpath.org/show_bug.cgi?id=88

Signed-off-by: Jianbo Liu &lt;jianbo.liu@arm.com&gt;
Reviewed-by: Bogdan Pricope &lt;Bogdan.Pricope@enea.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>89</bug_id>
          
          <creation_ts>2016-07-05 07:30:16 +0200</creation_ts>
          <short_desc>ofp_config.h: replace with more flexible approach</short_desc>
          <delta_ts>2016-07-05 07:30:16 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Other</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ivan Koveshnikov">ikoveshnik@gmail.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-cBe1jrqifb3czUe2xFVAqONeqJxOt5nq1ygQ1OxCug8</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>172</commentid>
    <comment_count>0</comment_count>
    <who name="Ivan Koveshnikov">ikoveshnik@gmail.com</who>
    <bug_when>2016-07-05 07:30:16 +0200</bug_when>
    <thetext>OFP has 3 different configuration sets: default, webserver, netwrap-webserver; and some options are contolled by configure.ac, such as INET, INET6, SP

All the configurations should be in the same location. The best way to organize them up is to use menuconfig-like approach, this can help storing a bunch of configuration options, dependencies.

Current configuration sets can be implemented as defconfig samples.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>90</bug_id>
          
          <creation_ts>2016-07-05 07:58:42 +0200</creation_ts>
          <short_desc>Message-based API</short_desc>
          <delta_ts>2016-07-05 07:58:42 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>CLI - Command Line Interface</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ivan Koveshnikov">ikoveshnik@gmail.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-kgjAPPb3iFERKCclGz3gstAnNLxkVkkMBuzWKth86s0</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>173</commentid>
    <comment_count>0</comment_count>
    <who name="Ivan Koveshnikov">ikoveshnik@gmail.com</who>
    <bug_when>2016-07-05 07:58:42 +0200</bug_when>
    <thetext>Feature request. 

Message based API can be used for controlling OFP behavior from 3d-party applications.
Such message-based API contains two parts: 
* OFP-side library, which listens for serialized applications requests and translates them into API calls. should be linked with OFP application (e.g. fpm)
* Control application side library. Control application can use OFP API, but instead of direct function call request should be serialized and sent out to OFP. Should be linked up with control application

This feature is platform independent and very generic.

Use case: 3d party CLI application which controls both Data Plane and Control Plane. Common in network equipment</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>91</bug_id>
          
          <creation_ts>2016-08-09 23:22:55 +0200</creation_ts>
          <short_desc>OFP/TCP dropping data</short_desc>
          <delta_ts>2016-11-22 15:33:20 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - TCP</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Justin Riggs">justin.riggs@gemalto.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-nXZCen8a64qH_CnEy8x9bTjZQIJk1D1Yaiji0F9N3RY</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>174</commentid>
    <comment_count>0</comment_count>
    <who name="Justin Riggs">justin.riggs@gemalto.com</who>
    <bug_when>2016-08-09 23:22:55 +0200</bug_when>
    <thetext>I’ve written a simple TCP forwarder that sits between 2 computers and forwards message back and forth between them.

The program is working okay as long as I send small messages.  For example, 1KB messages work fine.  But when I send a larger message that has to be split across multiple Ethernet frames the program seems to lose some of the data.  For example, if I send a 16KB hunk to the OFP program, it might only receive 12KB or 13KB of the message.  It forwards that data along just fine, but the remainder of the message never seems to show up.  Wireshark traces show the data is being sent to my app correctly, but the app doesn’t see all of that data.

As a different test, I modified the “IPv4 TCP socket local IP: send + recv” test in the ofp/example/socket program so I could connect to it from a remote computer.  I made the buf in _receive_tcp() larger so I could send it a bigger message.  I ran the ofp/example/socket/socket program and connected from a remote computer (actually, I was running from 2 VMware VMs.  When I sent a 4,500 byte message from the remote computer, the socket program only received 3,964 bytes.  This happens every time.  It’s 100% reproducible.  3,964 bytes seems to be the maximum size it can receive.  I could see in a Wireshark trace that a 4,500 byte Ethernet frame arrived on the fp0 interface, but it was truncated somewhere between the Ethernet driver and the socket program.

I also ran the same test with debugging turned on (“debug 0x1f” from the cli).  I could see that the entire message was received by ODP.  I think it was 4,552 bytes at that point.  The program always crashes if I receive a large message with debugging turned on.  It complains about a “Too long message!”, and then it crashes.

So that’s what I’m seeing.  Is there a limit on the size of Ethernet frames?  Do I need to force it to run with MTU=1500?  Or maybe is there an easy way to increase the limitation within the software at build time or run time?

Here&apos;s an analysis from Bogdan:

So, you have a large MTU and want to transfer big eth frames, right?

First thing to check is SHM_PKT_POOL_BUFFER_SIZE: OFP is creating an ODP packet pool of (SHM_PKT_POOL_SIZE / SHM_PKT_POOL_BUFFER_SIZE) elements of SHM_PKT_POOL_BUFFER_SIZE size.
(Of course, ODP is adding a headroom (ODP_CONFIG_PACKET_HEADROOM) and tailroom (ODP_CONFIG_PACKET_TAILROOM) per packet and is doing some align stuff but this is not important for this case).

From this pkt pool buffer size you need to subtract eth, IP (IPv6 + other headers), TCP header sizes and remaining size should be large enough to accommodate the maximum payload you want to transport.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>92</bug_id>
          
          <creation_ts>2016-08-20 00:23:53 +0200</creation_ts>
          <short_desc>the misleading return code of ofp_connect() function</short_desc>
          <delta_ts>2016-11-22 15:20:29 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Socket API</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>Highest</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Lin Zhang">lin.zhang@sihuatech.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>chong.chen@sihuatech.com</cc>
    
    <cc>lin.zhang@sihuatech.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-Cnu5b3RsFPi8-Qbptll69xuEVLnTYGroN0aOLc4NYSA</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>175</commentid>
    <comment_count>0</comment_count>
      <attachid>8</attachid>
    <who name="Lin Zhang">lin.zhang@sihuatech.com</who>
    <bug_when>2016-08-20 00:23:53 +0200</bug_when>
    <thetext>Created attachment 8
tcpserver.c

Hello,

It seems to be a bug as the return error code is still 0 even the socket is not connected. Please have the details as below:

***Environment***
OFP version 1.1
ODP version 1.10.1
DPDK version 16.04

***our TCP program***
We created a TCP program based on the example of &quot;webserver2&quot;. However the return code of ofp_connection() caused lots of misleading. 

&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; test 1
For example, even we gave the wrong IP address and it indicated the socket connection failed, but the return code is still 0. The details are as follows:


 ./tcpserver -i 0 -c 2 -l 192.168.100.10 -p 2000 -f ofp.conf &lt;&lt;&lt;&lt; binding 
address is 192.168.100.10, however OFP is given 192.168.100.2

&lt;snip&gt;
E 220 0:1864473344 tcpserver.c:157] ofp_bind failed, err=&apos;Can&apos;t assign requested address&apos;
odp_thread.c:166:odp_thread_init_local():There is a thread already running on core 0
0
E 220 0:1675736832 tcpserver.c:49] try to connecting###############with result 0  &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; here the return code is 0

E 320 0:1675736832 tcpserver.c:25] ofp_send failed n=-1, err=&apos;Socket is not connected&apos; 
&lt;/snip&gt;

&lt;output of ofp.conf&gt;
debug 0
loglevel set abort
ifconfig fp0 192.168.100.2/24 &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
&lt;/output of ofp.conf&gt;


&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; test 2
if we didn&apos;t pass the port parameter to the program, it will report return code with -1 as expected.

 ./tcpserver -i 0 -c 2 -l 192.168.100.10 -f ofp.conf &lt;&lt;&lt;&lt;&lt; missing -p #port#
&lt;snip&gt;
E 219 0:3849726720 tcpserver.c:157] ofp_bind failed, err=&apos;Can&apos;t assign requested address&apos;
odp_thread.c:166:odp_thread_init_local():There is a thread already running on core 0
-1
E 220 0:3659642624 tcpserver.c:49] try to connecting###############with result -1 &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; here is return code is -1

E 320 0:3659642624 ofp_uipc_socket.c:1285] OFP_ENOTCONN: state = 0
E 320 0:3659642624 tcpserver.c:25] ofp_send failed n=-1, err=&apos;Socket is not connected&apos;
&lt;/snip&gt;


&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; snip of tcpserver.c
int tcp_send(struct ofp_sockaddr_in addr){
        int sendfd;
        /*build and connect socketfd*/
        sendfd=ofp_socket(OFP_AF_INET, OFP_SOCK_STREAM,
                                OFP_IPPROTO_TCP);

        int optval= 1;
        ofp_setsockopt(sendfd, OFP_SOL_SOCKET, OFP_SO_REUSEADDR,
                &amp;optval, sizeof(optval));
        int connected=ofp_connect(sendfd, (struct ofp_sockaddr *)&amp;addr,
                        sizeof(addr)); &lt;&lt;&lt;&lt;&lt; call ofp_connect() function
    printf(&quot;%d\n&quot;, connected);
        OFP_ERR(&quot;try to connecting###############with result %d\n&quot;,connected);  &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; here print connected
        /*if(ofp_connect(sendfd, (struct ofp_sockaddr *)&amp;addr,
                        sizeof(addr)) == -1) {
                OFP_ERR(&quot;Faild to connect sleeping for 5 seconds\n&quot;);
                sleep(5);
                return -1;
        }*/
        /*start working on the send operation*/
        sleep(1);
        mysend(sendfd,tcp_buf,strlen(tcp_buf)+1);

        return sendfd;

}


&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; paste the content of app_main.c in below and attached tcpserver.c in attachment.

/* Copyright (c) 2014, ENEA Software AB
 * Copyright (c) 2014, Nokia
 * All rights reserved.
 *
 * SPDX-License-Identifier:	BSD-3-Clause
 */

#include &lt;getopt.h&gt;
#include &lt;string.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;unistd.h&gt;
#include &lt;inttypes.h&gt;

#include &quot;ofp.h&quot;
#include &quot;tcpserver.h&quot;

#define MAX_WORKERS		32
#define IP4(a, b, c, d) (a|(b&lt;&lt;8)|(c&lt;&lt;16)|(d&lt;&lt;24))
/**
 * Parsed command line application arguments
 */
typedef struct {
	int core_count;
	int if_count;		/**&lt; Number of interfaces to be used */
	char **if_names;	/**&lt; Array of pointers to interface names */
	char *conf_file;
	char *root_dir;
	char *laddr;
	uint16_t lport;
} appl_args_t;

/*the remote sever address used for client function*/
struct ofp_sockaddr_in server_addr = {0};

/* helper funcs */
static void parse_args(int argc, char *argv[], appl_args_t *appl_args);
static void print_info(char *progname, appl_args_t *appl_args);
static void usage(char *progname);
static void *client_thread(void *arg);
ofp_init_global_t app_init_params; /**&lt; global OFP init parms */

/** Get rid of path in filename - only for unix-type paths using &apos;/&apos; */
#define NO_PATH(file_name) (strrchr((file_name), &apos;/&apos;) ? \
				strrchr((file_name), &apos;/&apos;) + 1 : (file_name))


/** local hook
 *
 * @param pkt odp_packet_t
 * @param protocol int
 * @return int
 *
 */
static enum ofp_return_code fastpath_local_hook(odp_packet_t pkt, void *arg)
{
	int protocol = *(int *)arg;
	(void) pkt;
	(void) protocol;
	return OFP_PKT_CONTINUE;
}


/** main() Application entry point
 *
 * @param argc int
 * @param argv[] char*
 * @return int
 *
 */
#include &lt;sys/time.h&gt;
#include &lt;sys/resource.h&gt;

int main(int argc, char *argv[])
{
	odph_linux_pthread_t thread_tbl[MAX_WORKERS];
	appl_args_t params;
	int core_count, num_workers;
	odp_cpumask_t cpumask;
	char cpumaskstr[64];
	odph_linux_thr_params_t thr_params;
	odp_instance_t instance;

	struct rlimit rlp;

	getrlimit(RLIMIT_CORE, &amp;rlp);
	printf(&quot;RLIMIT_CORE: %ld/%ld\n&quot;, rlp.rlim_cur, rlp.rlim_max);
	rlp.rlim_cur = 200000000;
	printf(&quot;Setting to max: %d\n&quot;, setrlimit(RLIMIT_CORE, &amp;rlp));

	/* Parse and store the application arguments */
	parse_args(argc, argv, &amp;params);

	if (odp_init_global(&amp;instance, NULL, NULL)) {
		OFP_ERR(&quot;Error: ODP global init failed.\n&quot;);
		exit(EXIT_FAILURE);
	}
	if (odp_init_local(instance, ODP_THREAD_CONTROL)) {
		OFP_ERR(&quot;Error: ODP local init failed.\n&quot;);
		exit(EXIT_FAILURE);
	}

	/* Print both system and application information */
	print_info(NO_PATH(argv[0]), &amp;params);

	core_count = odp_cpu_count();
	num_workers = core_count;

	if (params.core_count)
		num_workers = params.core_count;
	if (num_workers &gt; MAX_WORKERS)
		num_workers = MAX_WORKERS;

	/*
	 * By default core #0 runs Linux kernel background tasks.
	 * Start mapping thread from core #1
	 */
	memset(&amp;app_init_params, 0, sizeof(app_init_params));

	app_init_params.linux_core_id = 0;

	if (core_count &gt; 1)
		num_workers--;

	num_workers = odp_cpumask_default_worker(&amp;cpumask, num_workers);
	odp_cpumask_to_str(&amp;cpumask, cpumaskstr, sizeof(cpumaskstr));

	printf(&quot;Num worker threads: %i\n&quot;, num_workers);
	printf(&quot;first CPU:          %i\n&quot;, odp_cpumask_first(&amp;cpumask));
	printf(&quot;cpu mask:           %s\n&quot;, cpumaskstr);

	app_init_params.if_count = params.if_count;
	app_init_params.if_names = params.if_names;
	app_init_params.pkt_hook[OFP_HOOK_LOCAL] = fastpath_local_hook;
	if (ofp_init_global(instance, &amp;app_init_params)) {
		OFP_ERR(&quot;Error: OFP global init failed.\n&quot;);
		exit(EXIT_FAILURE);
	}

	memset(thread_tbl, 0, sizeof(thread_tbl));
	/* Start dataplane dispatcher worker threads */

	thr_params.start = default_event_dispatcher;
	thr_params.arg = ofp_eth_vlan_processing;
	thr_params.thr_type = ODP_THREAD_WORKER;
	thr_params.instance = instance;
	odph_linux_pthread_create(thread_tbl,
				  &amp;cpumask,
				  &amp;thr_params);

	/* other app code here.*/
	/* Start CLI */
	ofp_start_cli_thread(instance, app_init_params.linux_core_id,
		params.conf_file);

	sleep(2);
	/* tcpserver*/
	if (setup_tcpserver(params.root_dir, params.laddr, params.lport)) {
		OFP_ERR(&quot;Error: Failed to setup tcpserver .\n&quot;);
		exit(EXIT_FAILURE);
	}
	/*start a socket thread as control thread to send the tcp message through ofp*/
	odph_linux_pthread_t sock_pthread1;
        odp_cpumask_t sock_cpumask;

        odp_cpumask_zero(&amp;sock_cpumask);
	/*use linux core for the socket */
        odp_cpumask_set(&amp;sock_cpumask, app_init_params.linux_core_id);

        thr_params.start = client_thread;
        thr_params.arg = tcp_send;
        thr_params.thr_type = ODP_THREAD_CONTROL;
        thr_params.instance = instance;

	/*set the server address*/
	server_addr.sin_len=sizeof(struct ofp_sockaddr);
	server_addr.sin_family = OFP_AF_INET;
	server_addr.sin_port = odp_cpu_to_be_16(params.lport);
	server_addr.sin_addr.s_addr = IP4(192, 168, 100, 2);

        odph_linux_pthread_create(&amp;sock_pthread1,
                        &amp;sock_cpumask,
                        &amp;thr_params);


	odph_linux_pthread_join(thread_tbl, num_workers);
	odph_linux_pthread_join(&amp;sock_pthread1, 1);

	printf(&quot;End Main()\n&quot;);

	return 0;
}

static void *client_thread(void *arg)
{
        run_function run_func = (run_function)arg;

        if (ofp_init_local()) {
                OFP_ERR(&quot;Error: OFP local init failed.\n&quot;);
                return NULL;
        }

        (void)run_func(server_addr);

        return NULL;
}


/**
 * Parse and store the command line arguments
 *
 * @param argc       argument count
 * @param argv[]     argument vector
 * @param appl_args  Store application arguments here
 */
static void parse_args(int argc, char *argv[], appl_args_t *appl_args)
{
	int opt;
	int long_index;
	char *names, *str, *token, *save;
	size_t len;
	int i;
	static struct option longopts[] = {
		{&quot;count&quot;, required_argument, NULL, &apos;c&apos;},
		{&quot;interface&quot;, required_argument, NULL, &apos;i&apos;},	/* return &apos;i&apos; */
		{&quot;help&quot;, no_argument, NULL, &apos;h&apos;},		/* return &apos;h&apos; */
		{&quot;configuration file&quot;, required_argument,
			NULL, &apos;f&apos;},/* return &apos;f&apos; */
		{&quot;root&quot;, required_argument, NULL, &apos;r&apos;},	/* return &apos;r&apos; */
		{&quot;laddr&quot;, required_argument, NULL, &apos;l&apos;},	/* return &apos;l&apos; */
		{&quot;lport&quot;, required_argument, NULL, &apos;p&apos;},	/* return &apos;p&apos; */
		{NULL, 0, NULL, 0}
	};

	memset(appl_args, 0, sizeof(*appl_args));

	while (1) {
		opt = getopt_long(argc, argv, &quot;+c:i:hf:r:l:p:&quot;,
				  longopts, &amp;long_index);

		if (opt == -1)
			break;	/* No more options */

		switch (opt) {
		case &apos;c&apos;:
			appl_args-&gt;core_count = atoi(optarg);
			break;
			/* parse packet-io interface names */
		case &apos;i&apos;:
			len = strlen(optarg);
			if (len == 0) {
				usage(argv[0]);
				exit(EXIT_FAILURE);
			}
			len += 1;	/* add room for &apos;\0&apos; */

			names = malloc(len);
			if (names == NULL) {
				usage(argv[0]);
				exit(EXIT_FAILURE);
			}

			/* count the number of tokens separated by &apos;,&apos; */
			strcpy(names, optarg);
			for (str = names, i = 0;; str = NULL, i++) {
				token = strtok_r(str, &quot;,&quot;, &amp;save);
				if (token == NULL)
					break;
			}
			appl_args-&gt;if_count = i;

			if (appl_args-&gt;if_count == 0) {
				usage(argv[0]);
				exit(EXIT_FAILURE);
			}

			/* allocate storage for the if names */
			appl_args-&gt;if_names =
				calloc(appl_args-&gt;if_count, sizeof(char *));

			/* store the if names (reset names string) */
			strcpy(names, optarg);
			for (str = names, i = 0;; str = NULL, i++) {
				token = strtok_r(str, &quot;,&quot;, &amp;save);
				if (token == NULL)
					break;
				appl_args-&gt;if_names[i] = token;
			}
			break;

		case &apos;h&apos;:
			usage(argv[0]);
			exit(EXIT_SUCCESS);
			break;

		case &apos;f&apos;:
			len = strlen(optarg);
			if (len == 0) {
				usage(argv[0]);
				exit(EXIT_FAILURE);
			}
			len += 1;	/* add room for &apos;\0&apos; */

			appl_args-&gt;conf_file = malloc(len);
			if (appl_args-&gt;conf_file == NULL) {
				usage(argv[0]);
				exit(EXIT_FAILURE);
			}

			strcpy(appl_args-&gt;conf_file, optarg);
			break;
		case &apos;r&apos;:
			len = strlen(optarg);
			if (len == 0) {
				usage(argv[0]);
				exit(EXIT_FAILURE);
			}
			len += 1;	/* add room for &apos;\0&apos; */

			appl_args-&gt;root_dir = malloc(len);
			if (appl_args-&gt;root_dir == NULL) {
				usage(argv[0]);
				exit(EXIT_FAILURE);
			}

			strcpy(appl_args-&gt;root_dir, optarg);
			break;
		case &apos;l&apos;:
			len = strlen(optarg);
			if (len == 0) {
				usage(argv[0]);
				exit(EXIT_FAILURE);
			}
			len += 1;	/* add room for &apos;\0&apos; */

			appl_args-&gt;laddr = malloc(len);
			if (appl_args-&gt;laddr == NULL) {
				usage(argv[0]);
				exit(EXIT_FAILURE);
			}

			strcpy(appl_args-&gt;laddr, optarg);
			break;
		case &apos;p&apos;:
			len = strlen(optarg);
			if (len == 0) {
				usage(argv[0]);
				exit(EXIT_FAILURE);
			}
			len += 1;	/* add room for &apos;\0&apos; */

			appl_args-&gt;lport = (uint64_t)atoi(optarg);
			break;

		default:
			break;
		}
	}

	if (appl_args-&gt;if_count == 0) {
		usage(argv[0]);
		exit(EXIT_FAILURE);
	}

	optind = 1;		/* reset &apos;extern optind&apos; from the getopt lib */
}

/**
 * Print system and application info
 */
static void print_info(char *progname, appl_args_t *appl_args)
{
	int i;

	printf(&quot;\n&quot;
		   &quot;ODP system info\n&quot;
		   &quot;---------------\n&quot;
		   &quot;ODP API version: %s\n&quot;
		   &quot;CPU model:       %s\n&quot;
		   &quot;CPU freq (hz):   %&quot;PRIu64&quot;\n&quot;
		   &quot;Cache line size: %i\n&quot;
		   &quot;Core count:      %i\n&quot;
		   &quot;\n&quot;,
		   odp_version_api_str(), odp_cpu_model_str(),
		   odp_cpu_hz(), odp_sys_cache_line_size(),
		   odp_cpu_count());

	printf(&quot;Running ODP appl: \&quot;%s\&quot;\n&quot;
		   &quot;-----------------\n&quot;
		   &quot;IF-count:        %i\n&quot;
		   &quot;Using IFs:      &quot;,
		   progname, appl_args-&gt;if_count);
	for (i = 0; i &lt; appl_args-&gt;if_count; ++i)
		printf(&quot; %s&quot;, appl_args-&gt;if_names[i]);
	printf(&quot;\n\n&quot;);
	fflush(NULL);
}

/**
 * Prinf usage information
 */
static void usage(char *progname)
{
	printf(&quot;\n&quot;
		   &quot;Usage: %s OPTIONS\n&quot;
		   &quot;  E.g. %s -i eth1,eth2,eth3\n&quot;
		   &quot;\n&quot;
		   &quot;ODPFastpath application.\n&quot;
		   &quot;\n&quot;
		   &quot;Mandatory OPTIONS:\n&quot;
		   &quot;  -i, --interface Eth interfaces (comma-separated, no spaces)\n&quot;
		   &quot;\n&quot;
		   &quot;Optional OPTIONS\n&quot;
		   &quot;  -c, --count &lt;number&gt; Core count.\n&quot;
		   &quot;  -r, --root &lt;web root folder&gt; Webserver root folder.\n&quot;
			&quot;\tDefault: &quot;DEFAULT_ROOT_DIRECTORY&quot;\n&quot;
		   &quot;  -l, --laddr &lt;IPv4 address&gt; IPv4 address were webserver binds.\n&quot;
			&quot;\tDefault: %s\n&quot;
		   &quot;  -p, --lport &lt;port&gt; Port address were webserver binds.\n&quot;
			&quot;\tDefault: %d\n&quot;
		   &quot;  -h, --help           Display help and exit.\n&quot;
		   &quot;\n&quot;, NO_PATH(progname), NO_PATH(progname),
		   ofp_print_ip_addr(DEFAULT_BIND_ADDRESS), DEFAULT_BIND_PORT
		);
}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>176</commentid>
    <comment_count>1</comment_count>
      <attachid>9</attachid>
    <who name="Lin Zhang">lin.zhang@sihuatech.com</who>
    <bug_when>2016-08-20 00:25:02 +0200</bug_when>
    <thetext>Created attachment 9
app_main.c</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>8</attachid>
            <date>2016-08-20 00:23:53 +0200</date>
            <delta_ts>2016-08-20 00:25:20 +0200</delta_ts>
            <desc>tcpserver.c</desc>
            <filename>tcpserver.c</filename>
            <type>text/x-csrc</type>
            <size>4275</size>
            <attacher name="Lin Zhang">lin.zhang@sihuatech.com</attacher>
            
              <token>1485263356-tMQfxC_zWGlixxb1IRJRnyX7NEkZbuzx1UMuiR5qQ3c</token>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>9</attachid>
            <date>2016-08-20 00:25:02 +0200</date>
            <delta_ts>2016-08-20 00:25:02 +0200</delta_ts>
            <desc>app_main.c</desc>
            <filename>app_main.c</filename>
            <type>text/x-csrc</type>
            <size>10411</size>
            <attacher name="Lin Zhang">lin.zhang@sihuatech.com</attacher>
            
              <token>1485263356-W318GWLz747eDE3hFKFsTb8P5Rjkfeu1rU4fC0TRcRQ</token>

          </attachment>
      

    </bug>
    <bug>
          <bug_id>93</bug_id>
          
          <creation_ts>2016-09-06 23:27:23 +0200</creation_ts>
          <short_desc>Data corruption - tcp packets dropped in the receive path</short_desc>
          <delta_ts>2016-12-09 10:07:16 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - TCP</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jason Preston">jpreston@infinite.io</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          <cc>sorin.vultureanu@enea.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-SqBH9G7TpdGZqV63dKZFQyvo7-cL7Y0528EikPI4pvs</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>177</commentid>
    <comment_count>0</comment_count>
    <who name="Jason Preston">jpreston@infinite.io</who>
    <bug_when>2016-09-06 23:27:23 +0200</bug_when>
    <thetext>Using v1.1 

I&apos;ve hit a problem where data received in a tcp connection is silently dropped.  It occurs when the socket so_rcv doesn&apos;t have room to hold the new socket.  In this case ofp_sockbuf_put_last() fails and drops the packet, returning -1.  This return code is not propagated back up because ofp_sbcompress returns void.  The caller (ofp_tcp_do_segment, ofp_tcp_reass, etc) generates an ACK for the data that was dropped. 

So the data is correct on the wire and is acknowledged, but there are gaps in the stream coming out of ofp_recv.  I have confirmed that the gaps correspond to times when I see messages like this on the console:

E 4970 2:4044535552 ofp_uipc_sockbuf.c:132] No more room, next=14</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>209</commentid>
    <comment_count>1</comment_count>
      <attachid>11</attachid>
    <who name="Jason Preston">jpreston@infinite.io</who>
    <bug_when>2016-11-22 16:17:45 +0100</bug_when>
    <thetext>Created attachment 11
Proposed fix

I had previously submitted this patch to the mailing list.  It adds a check for space before trying to add to the so_rcv sockbuf.  If there is no space the packet is dropped and not acked.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>217</commentid>
    <comment_count>2</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-12-09 10:07:16 +0100</bug_when>
    <thetext>tcp: Fix data dropped when receive sockbuf is full.
Packets can be dropped if the receive sockbuf is full.
This happens after data has been acked.

Socket buffer space check was added before trying to add data to the sockbuf.

If there is no space the packet is dropped and ack the previous data to trigger
a retransmit.

Fixes: #93 Data corruption - tcp packets dropped in the receive path

Patch-by: Jason Preston &lt;jpreston@infinite.io&gt;
Signed-off-by: Sorin Vultureanu &lt;Sorin.Vultureanu@enea.com&gt;
Reviewed-by: Jere Leppänen &lt;jere.leppanen@nokia.com&gt;

94c10be66255a69c04abc81f1f79f9a681e95650</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>11</attachid>
            <date>2016-11-22 16:17:45 +0100</date>
            <delta_ts>2016-11-22 16:17:45 +0100</delta_ts>
            <desc>Proposed fix</desc>
            <filename>ofp_rx.patch</filename>
            <type>text/plain</type>
            <size>4952</size>
            <attacher name="Jason Preston">jpreston@infinite.io</attacher>
            
              <token>1485263356-2Jn-DpzpFPFboe0kwH27DyuVeWYl3Fc_J4bEzZ7p-2M</token>

          </attachment>
      

    </bug>
    <bug>
          <bug_id>94</bug_id>
          
          <creation_ts>2016-09-14 20:21:36 +0200</creation_ts>
          <short_desc>LD_PRELOAD is not a supported libary</short_desc>
          <delta_ts>2016-09-14 20:21:36 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Example applications</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Mike Holmes">mike.holmes@linaro.org</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-dMN6lhmoFzfgRFlTYlSsJ7xNs6MbRL31bNRsgHcsUNA</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>178</commentid>
    <comment_count>0</comment_count>
    <who name="Mike Holmes">mike.holmes@linaro.org</who>
    <bug_when>2016-09-14 20:21:36 +0200</bug_when>
    <thetext>The LD_PRELOAD functionality is critically important to a major use case when applications are not modified to use OFP.

The support library should be migrated from a simple example to a deliverable product than can be installed and used. 
The next step is to allow it to be packaged for use in debian, RPM etc</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>95</bug_id>
          
          <creation_ts>2016-09-20 08:32:08 +0200</creation_ts>
          <short_desc>can not show fastpath and get some error</short_desc>
          <delta_ts>2016-09-30 11:17:38 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Example applications</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="xiaowen yang">xiaowen.1.yang@gmail.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>xiaowen.1.yang@gmail.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-rNwIvlmbdJwO5fxSG035Y3YmTRjHMWuJDKfycLZUnNU</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>179</commentid>
    <comment_count>0</comment_count>
    <who name="xiaowen yang">xiaowen.1.yang@gmail.com</who>
    <bug_when>2016-09-20 08:32:08 +0200</bug_when>
    <thetext>I builded  ODP and OFP on my ubuntu VM , then running ofp example fpm -i ens33  output as below
 
    17 udp RW Node  (UDP)
      1 checksum RW int  (compute udp checksum)
      3 maxdgram RW u_long  (Maximum outgoing UDP datagram size)
      4 recvspace RW u_long  (Maximum space for incoming UDP datagrams)
      256 blackhole RW int  (Do not send port unreachables for refused connects)
      257 log_in_vain RW int  (Log all incoming UDP packets)
    255 raw RW Node  (RAW)
I 0 0:407821056 ofp_uma.c:44] Creating pool &apos;udp_inpcb&apos;, nitems=1024 size=904 total=925696
I 0 0:407821056 ofp_uma.c:44] Creating pool &apos;tcp_inpcb&apos;, nitems=2048 size=904 total=1851392
I 0 0:407821056 ofp_uma.c:44] Creating pool &apos;tcpcb&apos;, nitems=2048 size=784 total=1605632
I 0 0:407821056 ofp_uma.c:44] Creating pool &apos;tcptw&apos;, nitems=409 size=80 total=32720
I 0 0:407821056 ofp_uma.c:44] Creating pool &apos;syncache&apos;, nitems=30720 size=168 total=5160960
I 0 0:407821056 ofp_uma.c:44] Creating pool &apos;tcpreass&apos;, nitems=320 size=48 total=15360
I 0 0:407821056 ofp_uma.c:44] Creating pool &apos;sackhole&apos;, nitems=65536 size=40 total=2621440
I 0 0:407821056 ofp_init.c:191] Slow path threads on core 0
I 0 0:407821056 ofp_ifnet.c:143] Device &apos;ens33&apos; addr  00:0c:29:2a:f5:fd
I 0 0:407821056 ofp_ifnet.c:152] Device &apos;ens33&apos; MTU=1500
I 0 0:238683904 ofp_cli.c:1599] CLI server started on core 0
 
 
but can not see the fastpath when telnet CLI
 
&gt; show ifconfig 
fp0     (7) (ens33) slowpath: on
        Link encap:Ethernet     HWaddr:  00:0c:29:2a:f5:fd
        inet6 addr: fe80:0000:0000:0000:020c:29ff:fe2a:f5fd Scope:Link
        MTU: 1500
 
fp1     (0) () slowpath: off
        Link encap:Ethernet     HWaddr:  02:01:73:e6:8f:57
        inet6 addr: 0000:0000:0000:0000:0000:0000:0000:0000 Scope:Link
        MTU: 1500
 
fp2     (0) () slowpath: off
        Link encap:Ethernet     HWaddr:  02:02:b3:ad:06:d7
        inet6 addr: 0000:0000:0000:0000:0000:0000:0000:0000 Scope:Link
        MTU: 1500
 
fp3     (0) () slowpath: off
        Link encap:Ethernet     HWaddr:  02:03:45:24:e9:49
        inet6 addr: 0000:0000:0000:0000:0000:0000:0000:0000 Scope:Link
        MTU: 1500
 
fp4     (0) () slowpath: off
        Link encap:Ethernet     HWaddr:  02:04:f6:14:c2:13
        inet6 addr: 0000:0000:0000:0000:0000:0000:0000:0000 Scope:Link
        MTU: 1500
 
fp5     (0) () slowpath: off
        Link encap:Ethernet     HWaddr:  02:05:ec:e1:dd:14
        inet6 addr: 0000:0000:0000:0000:0000:0000:0000:0000 Scope:Link
        MTU: 1500
 
fp6     (0) () slowpath: off
        Link encap:Ethernet     HWaddr:  02:06:90:0f:f1:70
        inet6 addr: 0000:0000:0000:0000:0000:0000:0000:0000 Scope:Link
        MTU: 1500
 
fp7     (0) () slowpath: off
        Link encap:Ethernet     HWaddr:  02:07:1a:2a:a5:c1
        inet6 addr: 0000:0000:0000:0000:0000:0000:0000:0000 Scope:Link
        MTU: 1500
 
gre
        Link not configured
 
vxlan
        Link not configured
 
lo
        Link not configured
 
 
root@ubuntu:~# ifconfig
ens33     Link encap:Ethernet  HWaddr 00:0c:29:2a:f5:fd  
          inet addr:192.168.75.128  Bcast:192.168.75.255  Mask:255.255.255.0
          inet6 addr: fe80::7e20:f368:9e00:2399/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:5918 errors:0 dropped:0 overruns:0 frame:0
          TX packets:7768 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:492520 (492.5 KB)  TX bytes:1260645 (1.2 MB)
 
ens37     Link encap:Ethernet  HWaddr 00:0c:29:2a:f5:07  
          inet addr:192.168.75.130  Bcast:192.168.75.255  Mask:255.255.255.0
          inet6 addr: fe80::ccf4:29ec:680:e471/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:208 errors:0 dropped:0 overruns:0 frame:0
          TX packets:60 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:26339 (26.3 KB)  TX bytes:7523 (7.5 KB)
 
fp0       Link encap:Ethernet  HWaddr 00:0c:29:2a:f5:fd  
          inet6 addr: fe80::20c:29ff:fe2a:f5fd/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:68 errors:0 dropped:0 overruns:0 frame:0
          TX packets:24 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:5819 (5.8 KB)  TX bytes:2940 (2.9 KB)
 
lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:982 errors:0 dropped:0 overruns:0 frame:0
          TX packets:982 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1 
          RX bytes:67774 (67.7 KB)  TX bytes:67774 (67.7 KB)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>180</commentid>
    <comment_count>1</comment_count>
    <who name="xiaowen yang">xiaowen.1.yang@gmail.com</who>
    <bug_when>2016-09-20 08:41:51 +0200</bug_when>
    <thetext>there are some error information as below:
E 237 0:335931136 ofp_portconf.c:1126] port:65535 is outside the valid interval
E 237 0:335931136 ofp_netlink.c:426]  ! Interface index 2 not found</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>181</commentid>
    <comment_count>2</comment_count>
    <who name="xiaowen yang">xiaowen.1.yang@gmail.com</who>
    <bug_when>2016-09-21 08:08:18 +0200</bug_when>
    <thetext>--==--==--==--==--==--==--
-- WELCOME to OFP CLI --
--==--==--==--==--==--==--



&gt; 

&gt; 

&gt; show ifconfig
fp0     (3) (ens33) slowpath: on
        Link encap:Ethernet     HWaddr:  00:0c:29:44:55:6b
        inet6 addr: fe80:0000:0000:0000:020c:29ff:fe44:556b Scope:Link
        MTU: 1500

fp1     (0) () slowpath: off
        Link encap:Ethernet     HWaddr:  02:01:2a:9d:c9:50
        inet6 addr: 0000:0000:0000:0000:0000:0000:0000:0000 Scope:Link
        MTU: 1500

fp2     (0) () slowpath: off
        Link encap:Ethernet     HWaddr:  02:02:4e:d6:1b:c8
        inet6 addr: 0000:0000:0000:0000:0000:0000:0000:0000 Scope:Link
        MTU: 1500

fp3     (0) () slowpath: off
        Link encap:Ethernet     HWaddr:  02:03:28:b6:39:de
        inet6 addr: 0000:0000:0000:0000:0000:0000:0000:0000 Scope:Link
        MTU: 1500

fp4     (0) () slowpath: off
        Link encap:Ethernet     HWaddr:  02:04:10:79:30:81
        inet6 addr: 0000:0000:0000:0000:0000:0000:0000:0000 Scope:Link
        MTU: 1500

fp5     (0) () slowpath: off
        Link encap:Ethernet     HWaddr:  02:05:36:85:35:96
        inet6 addr: 0000:0000:0000:0000:0000:0000:0000:0000 Scope:Link
        MTU: 1500

fp6     (0) () slowpath: off
        Link encap:Ethernet     HWaddr:  02:06:28:a4:59:03
        inet6 addr: 0000:0000:0000:0000:0000:0000:0000:0000 Scope:Link
        MTU: 1500

fp7     (0) () slowpath: off
        Link encap:Ethernet     HWaddr:  02:07:3a:59:00:bf
        inet6 addr: 0000:0000:0000:0000:0000:0000:0000:0000 Scope:Link
        MTU: 1500

gre
        Link not configured

vxlan
        Link not configured

lo
        Link not configured


&gt; show stat
Settings: 
  compute latency - no
  compute performance - no

Packets:
              Core:          0          1

         ODP to FP:          0         56
         FP to ODP:          0          0
          FP to SP:         56          0
         SP to ODP:         22          0
           Tx frag:          0          0
        Rx IP frag:          0          0
       RX IP reass:          0          0

Allocated memory:
avl tree alloc now=12 max=12 total=16384
rt tree alloc now=0 max=0 total=128
rt6 tree alloc now=1 max=1 total=65536</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>184</commentid>
    <comment_count>3</comment_count>
    <who name="xiaowen yang">xiaowen.1.yang@gmail.com</who>
    <bug_when>2016-09-30 11:17:38 +0200</bug_when>
    <thetext>it is a configuration issue,fixed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>96</bug_id>
          
          <creation_ts>2016-09-21 11:36:32 +0200</creation_ts>
          <short_desc>Design of interaction between GRE, vxlan and IPSec needs to be rethought</short_desc>
          <delta_ts>2016-09-21 11:36:32 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - GRE</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dan Lilliehorn - Enea">dan.lilliehorn@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-FqniYV84046Csjw4Adh4lovxX1Co4fcd01H0QtTfGjs</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>182</commentid>
    <comment_count>0</comment_count>
    <who name="Dan Lilliehorn - Enea">dan.lilliehorn@enea.com</who>
    <bug_when>2016-09-21 11:36:32 +0200</bug_when>
    <thetext></thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>97</bug_id>
          
          <creation_ts>2016-09-22 03:12:17 +0200</creation_ts>
          <short_desc>Unexpected wakeups in sleeper</short_desc>
          <delta_ts>2016-09-22 03:12:17 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Ingress Packet processing</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>brian.brooks@linaro.org</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-lOfUjRj-X-ckWHqp7eendsbLdOrpjbOgzmHQqNOAp8Q</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>183</commentid>
    <comment_count>0</comment_count>
    <who name="">brian.brooks@linaro.org</who>
    <bug_when>2016-09-22 03:12:17 +0200</bug_when>
    <thetext>The &quot;sleeper&quot; async mechanism may cause unexpected wakeups on fds that are not actually ready.

http://www.openfastpath.org/pipermail/openfastpath/2016-September/001245.html</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>98</bug_id>
          
          <creation_ts>2016-10-05 11:08:38 +0200</creation_ts>
          <short_desc>TCP timers problems</short_desc>
          <delta_ts>2016-12-08 15:46:28 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - TCP</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>critical</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-rcZIOCexb2aVScQDsUiNrf-qxA9DJRhDx_HcSc43AnU</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>185</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-10-05 11:08:38 +0200</bug_when>
    <thetext>&gt; -----Original Message-----
&gt; From: openfastpath [mailto:openfastpath-bounces@list.openfastpath.org]
&gt; On Behalf Of Jason Preston
&gt; Sent: Friday, September 23, 2016 7:14 PM
&gt; To: openfastpath@list.openfastpath.org
&gt; Subject: [openfastpath] - TCP timers patch
&gt; 
&gt; Sorry if this show up twice.  I had sent this earlier from the wrong email
&gt; account.
&gt; 
&gt; I found a few things that were preventing tcp timers from working.  This
&gt; affected retransmit, keepalives, etc.
&gt; 
&gt; First, the argument passed to the callback needed one more level of
&gt; dereference:
&gt; 
&gt; diff --git a/src/ofp_tcp_timer.c b/src/ofp_tcp_timer.c index 44c4322..0fd7c7f
&gt; 100644
&gt; --- a/src/ofp_tcp_timer.c
&gt; +++ b/src/ofp_tcp_timer.c
&gt; @@ -153,7 +153,7 @@ static int tcp_timer_race; void
&gt; ofp_tcp_timer_delack(void *xtp) {
&gt; -       struct tcpcb *tp = xtp;
&gt; +       struct tcpcb *tp = *(struct tcpcb **)xtp;
&gt;        struct inpcb *inp;
&gt; 
&gt;        if (tp-&gt;t_timers)
&gt; @@ -188,7 +188,7 @@ ofp_tcp_timer_delack(void *xtp) void
&gt; ofp_tcp_timer_2msl(void *xtp) {
&gt; -       struct tcpcb *tp = xtp;
&gt; +       struct tcpcb *tp = *(struct tcpcb **)xtp;
&gt;        struct inpcb *inp;
&gt; #ifdef TCPDEBUG
&gt;        int ostate;
&gt; @@ -258,7 +258,7 @@ ofp_tcp_timer_2msl(void *xtp) void
&gt; ofp_tcp_timer_keep(void *xtp) {
&gt; -       struct tcpcb *tp = xtp;
&gt; +       struct tcpcb *tp = *(struct tcpcb **)xtp;
&gt;        struct tcptemp *t_template;
&gt;        struct inpcb *inp;
&gt; #ifdef TCPDEBUG
&gt; @@ -353,7 +353,7 @@ dropit:
&gt; void
&gt; ofp_tcp_timer_persist(void *xtp)
&gt; {
&gt; -       struct tcpcb *tp = xtp;
&gt; +       struct tcpcb *tp = *(struct tcpcb **)xtp;
&gt;        struct inpcb *inp;
&gt; #ifdef TCPDEBUG
&gt;        int ostate;
&gt; @@ -419,7 +419,7 @@ out:
&gt; void
&gt; ofp_tcp_timer_rexmt(void * xtp)
&gt; {
&gt; -       struct tcpcb *tp = xtp;
&gt; +       struct tcpcb *tp = *(struct tcpcb **)xtp;
&gt;        int rexmt;
&gt;        int headlocked;
&gt;        struct inpcb *inp;
&gt; @@ -563,7 +563,7 @@ out:
&gt; void
&gt; tcp_timer_reassdl(void *xtp)
&gt; {
&gt; -       struct tcpcb *tp = xtp;
&gt; +       struct tcpcb *tp = *(struct tcpcb **)xtp;
&gt;        struct inpcb *inp;
&gt; 
&gt;        inp = tp-&gt;t_inpcb;
&gt; 
&gt; 
&gt; Next, there is a hardcoded value returned for callout_pending which caused
&gt; the handlers to always return without doing anything.  The
&gt; CALLOUT_PENDING flag is never set so I just changed the hardcoded return
&gt; value to something that works.
&gt; 
&gt; diff --git a/include/ofpi_callout.h b/include/ofpi_callout.h index
&gt; 48564fb..62e6ad5 100644
&gt; --- a/include/ofpi_callout.h
&gt; +++ b/include/ofpi_callout.h
&gt; @@ -81,7 +81,7 @@ extern int ncallout;
&gt; 
&gt; #define        callout_active(c)       ((c)-&gt;c_flags &amp; CALLOUT_ACTIVE)
&gt; #define        callout_deactivate(c)   ((c)-&gt;c_flags &amp;= ~CALLOUT_ACTIVE)
&gt; -#define        callout_pending(c)      (1 /* always true (c)-&gt;c_flags &amp;
&gt; CALLOUT_PENDING*/)
&gt; +#define        callout_pending(c)      (0 /* never true (c)-&gt;c_flags &amp;
&gt; CALLOUT_PENDING*/)
&gt; 
&gt; #define        callout_drain(c)        _callout_stop_safe(c, 1)
&gt; 
&gt; 
&gt; Finally, an incorrect #ifdef/#else/#endif which prevented us from allocating a
&gt; packet when trying to send a keepaalive.
&gt; 
&gt; diff --git a/src/ofp_tcp_subr.c b/src/ofp_tcp_subr.c index ed50e64..57f7da9
&gt; 100644
&gt; --- a/src/ofp_tcp_subr.c
&gt; +++ b/src/ofp_tcp_subr.c
&gt; @@ -547,7 +547,7 @@ ofp_tcp_respond(struct tcpcb *tp, void *ipgen, struct
&gt; ofp_tcphdr *th, odp_packet
&gt;                        odp_packet_l3_offset_set(m, 0);
&gt;                        odp_packet_l4_offset_set(m, sizeof(struct ofp_ip6_hdr));
&gt;                } else
&gt; -#else
&gt; +#endif
&gt;                {
&gt;                        m = ofp_packet_alloc(sizeof(struct ofp_ip) +
&gt;                                       sizeof(struct ofp_tcphdr)); @@ -558,7 +558,6 @@
&gt; ofp_tcp_respond(struct tcpcb *tp, void *ipgen, struct ofp_tcphdr *th,
&gt; odp_packet
&gt;                        odp_packet_l3_offset_set(m, 0);
&gt;                        odp_packet_l4_offset_set(m, sizeof(struct ofp_ip));
&gt;                }
&gt; -#endif
&gt;                flags = OFP_TH_ACK;
&gt;        }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>208</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-11-22 15:25:57 +0100</bug_when>
    <thetext>We should review and push these changes upstream.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>215</commentid>
    <comment_count>2</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-12-08 15:46:28 +0100</bug_when>
    <thetext>Patched with:

tcp: Fix allocation of keepalive packets
fb5f6968200feefeec9b1a3602732b9860eb87db

tcp: Fix callout_pending value
82566800f1cc31ffdf2c96aa6dd25ba213a69aca

tcp: Fix timer functions argument dereference.
42668844f565f354ba79a2bd6ca664871e3f1451</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>99</bug_id>
          
          <creation_ts>2016-10-05 11:11:55 +0200</creation_ts>
          <short_desc>TCP speed limitation with big file transfer</short_desc>
          <delta_ts>2016-11-22 15:37:40 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - TCP</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-21XkuT4Qslrpzfe70UlNS_bjW7AvB7WmGkYO-mN5TM4</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>186</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-10-05 11:11:55 +0200</bug_when>
    <thetext>The webserver performance is limited by this, intermittently I am able to get 260MB/s of traffic using one core, other times it reduces speed because of the filling of so-&gt;so_snd and synchronisation needed.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>100</bug_id>
          
          <creation_ts>2016-10-05 11:20:24 +0200</creation_ts>
          <short_desc>TCP notify callback hangs after few tens of packets are sent in the same context.</short_desc>
          <delta_ts>2016-11-22 15:48:11 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - TCP</component>
          <version>unspecified</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-gJF7JJJX1BZZfuGhboSb_HSzL07UX_QD05r7ZIxXYVw</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>187</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-10-05 11:20:24 +0200</bug_when>
    <thetext>The context of notify locks the socket and puts many packets in to transmission. At a point it can&apos;t put more packets (remains in a loop) while the send buffer is not depleted, as the socket is locked.

This needs some redesign.

The change suggested by Rujun does not work as there is observed a loop that was not observed before.
The original FreeBSD code has the same here and this if treats a different case and it is not related to the reported problem.


From: Li, Rujun [mailto:rujun.li@intel.com] 
Sent: Tuesday, August 30, 2016 11:48 AM
To: Sorin Vultureanu &lt;Sorin.Vultureanu@enea.com&gt;; Riggs Justin &lt;Justin.Riggs@gemalto.com&gt;
Cc: openfastpath@list.openfastpath.org
Subject: RE: the ofp-tcp cannot work when send a relatively big file in my environment

Hi Sorin

I found that the if condition in ofp_tcp_output.c in line around 344 

len = ((long)ulmin(so-&gt;so_snd.sb_cc, sendwin) - off)

may cause the problem. When the so_snd.sb_cc is larger than sendwin, the len won’t be changed and cause 

len &gt;= tp-&gt;t_maxseg always be false.

When I change it into 

len= (long)so-&gt;so_snd.sb_cc – off 

and set the SOCKBUF_LEN larger, I can request for 100K files successfully.

I wish this may help!

Best Wishes,
Rujun, Li

From: Sorin Vultureanu [mailto:Sorin.Vultureanu@enea.com] 
Sent: Tuesday, August 30, 2016 3:19 PM
To: Li, Rujun &lt;rujun.li@intel.com&gt;; Riggs Justin &lt;Justin.Riggs@gemalto.com&gt;
Cc: openfastpath@list.openfastpath.org
Subject: RE: the ofp-tcp cannot work when send a relatively big file in my environment

Hi Rujun, Justin,

Thank you for feedback and support on this issue.

I am able to reproduce the two issues on my side with big transfers and also the hang of webserver2.
The webserver performance is limited by this, intermittently I am able to get 260MB of traffic using one core, other times it reduces speed because of the filling of so-&gt;so_snd and synchronisation needed.
The webserver2 hang seems to be also caused by the filling of so-&gt;so_snd.

Rujun, I will continue the investigation using your observation and to work on a solution.

Kind Regards,
Sorin

From: Li, Rujun [mailto:rujun.li@intel.com] 
Sent: Tuesday, August 30, 2016 4:08 AM
To: Riggs Justin &lt;Justin.Riggs@gemalto.com&gt;; Sorin Vultureanu &lt;Sorin.Vultureanu@enea.com&gt;
Cc: openfastpath@list.openfastpath.org
Subject: RE: the ofp-tcp cannot work when send a relatively big file in my environment

Hi 

When I add some additional info to be printed I found that in function ofp_tcp_output in ofp_tcp_output.c,  the variable snd_una is unchanged, and the snd_nxt – snd_una keeps growing, finally makes the window have no space to hold more data. I guess this maybe the problem?
Follow is part of my output:

I 6313 68:2031253248 ofp_tcp_output.c:218] snd_una = 2119005760
I 6313 68:2031253248 ofp_tcp_output.c:219] snd_nxt-snd_una = 27789
I 6313 68:2031253248 ofp_tcp_output.c:345] the buffer or window size we can use is 928
I 6313 68:2031253248 ofp_tcp_output.c:218] snd_una = 2119005760
I 6313 68:2031253248 ofp_tcp_output.c:219] snd_nxt-snd_una = 28313
I 6313 68:2031253248 ofp_tcp_output.c:345] the buffer or window size we can use is 404
I 6313 68:2031253248 ofp_tcp_output.c:218] snd_una = 2119005760
I 6313 68:2031253248 ofp_tcp_output.c:219] snd_nxt-snd_una = 28313
I 6313 68:2031253248 ofp_tcp_output.c:345] the buffer or window size we can use is 916
I 6313 68:2031253248 ofp_tcp_output.c:218] snd_una = 2119005760
I 6313 68:2031253248 ofp_tcp_output.c:219] snd_nxt-snd_una = 28837
I 6313 68:2031253248 ofp_tcp_output.c:345] the buffer or window size we can use is 392
I 6313 68:2031253248 ofp_tcp_output.c:218] snd_una = 2119005760
I 6313 68:2031253248 ofp_tcp_output.c:219] snd_nxt-snd_una = 28837
I 6313 68:2031253248 ofp_tcp_output.c:345] the buffer or window size we can use is 859
I 6313 68:2031253248 ofp_tcp_output.c:218] snd_una = 2119005760
I 6313 68:2031253248 ofp_tcp_output.c:219] snd_nxt-snd_una = 29361
I 6313 68:2031253248 ofp_tcp_output.c:345] the buffer or window size we can use is 335
I 6313 68:2031253248 ofp_tcp_output.c:218] snd_una = 2119005760
I 6313 68:2031253248 ofp_tcp_output.c:219] snd_nxt-snd_una = 29361
I 6313 68:2031253248 ofp_tcp_output.c:345] the buffer or window size we can use is 335
I 6313 68:2031253248 ofp_tcp_output.c:218] snd_una = 2119005760
I 6313 68:2031253248 ofp_tcp_output.c:219] snd_nxt-snd_una = 29361
I 6313 68:2031253248 ofp_tcp_output.c:345] the buffer or window size we can use is 335
I 6313 68:2031253248 ofp_tcp_output.c:218] snd_una = 2119005760
I 6313 68:2031253248 ofp_tcp_output.c:219] snd_nxt-snd_una = 29361
I 6313 68:2031253248 ofp_tcp_output.c:345] the buffer or window size we can use is 335
I 6313 68:2031253248 ofp_tcp_output.c:218] snd_una = 2119005760
I 6313 68:2031253248 ofp_tcp_output.c:219] snd_nxt-snd_una = 29361
I 6313 68:2031253248 ofp_tcp_output.c:345] the buffer or window size we can use is 335
I 6313 68:2031253248 ofp_tcp_output.c:218] snd_una = 2119005760
I 6313 68:2031253248 ofp_tcp_output.c:219] snd_nxt-snd_una = 29361


Best Wishes,
Rujun, Li

From: Riggs Justin [mailto:Justin.Riggs@gemalto.com] 
Sent: Tuesday, August 30, 2016 1:02 AM
To: Sorin Vultureanu &lt;Sorin.Vultureanu@enea.com&gt;
Cc: openfastpath@list.openfastpath.org; Li, Rujun &lt;rujun.li@intel.com&gt;
Subject: RE: the ofp-tcp cannot work when send a relatively big file in my environment


Hi Sorin,

I will try to get the gdb stack traces today.  I’ll pass them along after I have them.

In the meantime, I’m wondering if other people are having similar problems with TCP.  It seems odd that I can’t run one of the example apps for more than a few minutes.  So I’m wondering if there are known problems with TCP robustness.

I’m concerned that I might be doing something incorrect that is causing the problem to occur.  Is there a preferred way to start the webserver2 app regarding cmdline switches and ODP_PLATFORM_PARAMS?

Thanks,

Justin Riggs


From: Sorin Vultureanu [mailto:Sorin.Vultureanu@enea.com] 
Sent: Thursday, August 25, 2016 2:16 AM
To: Riggs Justin &lt;Justin.Riggs@gemalto.com&gt;
Cc: openfastpath@list.openfastpath.org; Li, Rujun &lt;rujun.li@intel.com&gt;
Subject: RE: the ofp-tcp cannot work when send a relatively big file in my environment

Hi Justin,

1.	Can you attach with gdb and send a call trace for the hanged thread or run through gdb the whole application and catch the application dump?

2.	200% means that two worker thread cores are working. What is the number of cores that you start the application with?

Kind Regards,
Sorin

From: openfastpath [mailto:openfastpath-bounces@list.openfastpath.org] On Behalf Of Li, Rujun
Sent: Thursday, August 25, 2016 3:27 AM
To: Riggs Justin &lt;Justin.Riggs@gemalto.com&gt;; openfastpath@list.openfastpath.org
Subject: Re: [openfastpath] the ofp-tcp cannot work when send a relatively big file in my environment

I use command tcpdump and try to figure out where the problems locate. I found that when I request for a 100K file, ofp cannot send all the content in the file and finish a normal close. When it stops, no arp reply is sent by the webserver. I think maybe the network stack is dump. And then I use top command to see my CPU and memory condition, I found memory is only used 0.5% but CPU is always 200% in my 16 cpus server.

Best Wishes,
Rujun, Li

From: openfastpath [mailto:openfastpath-bounces@list.openfastpath.org] On Behalf Of Riggs Justin
Sent: Wednesday, August 24, 2016 7:35 PM
To: openfastpath@list.openfastpath.org
Subject: Re: [openfastpath] the ofp-tcp cannot work when send a relatively big file in my environment


Hi,

I’ve seen the same problem with the webserver2 program.  I’ve also written a program of my own, and it shows the same problem.  Small files are okay, but if you get over about 10KB they will fail.  I modified my own little program so that it doesn’t use the “notify()” function to get notifications (it’s strictly driven via ofp_select()), and it still has the same problem.

Another variation on this problem is that the webserver2 will eventually stop working if I try to download a lot of small files.  I can usually download about a thousand files that are around 2KB, and then it stops.  The size of my hugepage space or number of mbufs affects when it stops, but it always eventually stops.  So in this particular scenario it seems like it’s leaking buffers, and then it stops once they’re all gone.  But that’s just a guess.  I haven’t tracked it all the way down yet.

Justin Riggs

From: openfastpath [mailto:openfastpath-bounces@list.openfastpath.org] On Behalf Of Li, Rujun
Sent: Wednesday, August 24, 2016 1:47 AM
To: openfastpath@list.openfastpath.org
Subject: [++SPAM++]: [openfastpath] the ofp-tcp cannot work when send a relatively big file in my environment

Hi everyone

When I run the example webserver2 in the ofp, and use another machine to work as a client and request for a 100K txt file, it cannot correctly return and I think this manner makes the network stack dump because no arp reply anymore. But when I restart and request for a 10K file, it works correctly in the same environment. Whether there are some limits on the sizes of files? Or some other problems that I haven’t noticed? Thanks!

My test command is wget http://192.168.77.76:6789/index_100.txt as i set the ip and change the port.

Best Wishes,
Rujun, Li</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>101</bug_id>
          
          <creation_ts>2016-10-13 14:11:18 +0200</creation_ts>
          <short_desc>Wrong netmask when configuring interface address through CLI</short_desc>
          <delta_ts>2016-11-28 15:31:27 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Interface configuration</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>janne.peltonen@nokia.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          <cc>sorin.vultureanu@enea.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263356-iQkblfWVGP_hKiNH6lh8quMrX2inbQ34yHOm6Uo27Qw</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>189</commentid>
    <comment_count>0</comment_count>
    <who name="">janne.peltonen@nokia.com</who>
    <bug_when>2016-10-13 14:11:18 +0200</bug_when>
    <thetext>When an interface address and subnet is configured through the CLI,
the fast path tries to sync the configuration to the OS kernel
with an incorrect netmask.

For example, ifconfig fp0 10.0.0.1/24 command in CLI results in
fast path invoking ifconfig fp0 11.0.0.1 netmask 0.255.255.255 up

Since the netmask is invalid, my system seems to fall back to
mask lenght of 8 bits so that in kernel the interface gets the
address 11.0.0.1/8. The incorrect subnet in kernel config
gets then synced back to fast path through a netlink notification
so that also the fast path ends up having an incorrect netmask.

The bug is caused by ofp_config_interface_up_v4() keeping
netmask in a local variable in the big endian byte order but
failing to convert it back to the native byte order before
calculating the arguments for ifconfig.

OFP version: 2.0.0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>212</commentid>
    <comment_count>1</comment_count>
    <who name="Jere Leppänen">jere.leppanen@nokia.com</who>
    <bug_when>2016-11-28 15:31:27 +0100</bug_when>
    <thetext>*** Bug 105 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>102</bug_id>
          
          <creation_ts>2016-10-13 14:13:58 +0200</creation_ts>
          <short_desc>VLAN configuration has undocumented restrictions</short_desc>
          <delta_ts>2016-10-13 14:13:58 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Documentation</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>janne.peltonen@nokia.com</reporter>
          <assigned_to name="Sorin Vultureanu">sorin.vultureanu@enea.com</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-JL13bDAcO10EyEXeI816hQMzsVapRKq_QC98FIV0HhI</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>190</commentid>
    <comment_count>0</comment_count>
    <who name="">janne.peltonen@nokia.com</who>
    <bug_when>2016-10-13 14:13:58 +0200</bug_when>
    <thetext>Creating VLAN interfaces through Linux works only
if the interfaces are named in a certain specific
way, but this is not documented anywhere. I could
not create a VLAN interface before I peeked into
the code.

This does not work:

ip link add link fp0 name myvlan type vlan id 100

But this does seem to work:

ip link add link fp0 name myvlan.100 type vlan id 100

IOW, the name of the VLAN interface is expected to
end with a dot and the VLAN ID.

A related issue is that the way to create VLANs
through the CLI is not documented (in the CLI
help text or elsewhere). In CLI VLAN creation
works by ifconfig&apos;ing a not-yet-existing interface
with a name that starts with a physical port and
ends with a dot and a VLAN ID.

OFP version: 2.0.0.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>103</bug_id>
          
          <creation_ts>2016-10-15 11:28:21 +0200</creation_ts>
          <short_desc>Documentation issues with GRE tunnels</short_desc>
          <delta_ts>2016-10-15 11:28:21 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Interface configuration</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>janne.peltonen@nokia.com</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-p3bA__nYx4UmTSjSRs0mx1epOhUlwjoNLoSBqC6AXx0</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>191</commentid>
    <comment_count>0</comment_count>
    <who name="">janne.peltonen@nokia.com</who>
    <bug_when>2016-10-15 11:28:21 +0200</bug_when>
    <thetext>Similar to VLANs (see bug 102), GRE tunneling expects
certain tunnel interface naming convention, which is
not documented. In addition, the examples in the
CLI help text for GRE tunnel configuration are
syntactically incorrect.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>104</bug_id>
          
          <creation_ts>2016-10-15 11:37:38 +0200</creation_ts>
          <short_desc>route lookup sometimes returns incorrect result</short_desc>
          <delta_ts>2016-10-15 11:58:17 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - IPv4</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>janne.peltonen@nokia.com</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-gU9tvcVj0Lroad6l2_JgTSo2T0-7LTsXuZakSaMejYA</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>192</commentid>
    <comment_count>0</comment_count>
    <who name="">janne.peltonen@nokia.com</who>
    <bug_when>2016-10-15 11:37:38 +0200</bug_when>
    <thetext>Route lookup sometimes returns an incorrect next hop. The problem
was noticed with GRE tunnels, but it looks like it may be a more
generic problem in OFP 2.0.0.

I tried GRE tunnels with this setup through cli:

  ifconfig fp0 11.0.0.1/24
  ifconfig fp1 12.0.0.1/24
  route add 20.0.0.0/24 gw 12.0.0.2 dev fp1
  ifconfig tunnel gre gre1 local 12.0.0.1 remote 20.0.0.1 peer 200.0.0.1 100.0.0.1

Traffic to 200.0.0.1 was forwarded by the fast path, all looked fine 
(I did not check the actual GRE pakets sent out, though).

After adding the following second GRE tunnel, forwarding to the first
tunnel stopped working.

  ifconfig tunnel gre gre2 local 12.0.0.1 remote 20.0.0.2 peer 200.0.1.1 100.0.1.1

After some investigation it seems that forwarding lookup for packets
destined to 200.0.0.1 returns the second tunnel as the next hop,
not the first one as it should.

With GDB I can see that routes in ofp_rt_mtrie_lookup.c look ok in here
(rules[7] and rules[8] correspond to the two GRE tunnels):

(gdb) p shm-&gt;rules[0]
$46 = {used = 1 &apos;\001&apos;, masklen = 32 &apos; &apos;, vrf = 0, addr = 16777227, data = {{
      flags = 2097152, gw = 0, port = 0, vlan = 0}, {flags = 0, gw = 0,
      port = 0, vlan = 0}, {flags = 0, gw = 0, port = 0, vlan = 0}, {
      flags = 0, gw = 0, port = 0, vlan = 0}}}
(gdb) p shm-&gt;rules[1]
$47 = {used = 1 &apos;\001&apos;, masklen = 24 &apos;\030&apos;, vrf = 0, addr = 11, data = {{
      flags = 1, gw = 0, port = 0, vlan = 0}, {flags = 0, gw = 0, port = 0,
      vlan = 0}, {flags = 0, gw = 0, port = 0, vlan = 0}, {flags = 0, gw = 0,
      port = 0, vlan = 0}}}
(gdb) p shm-&gt;rules[2]
$48 = {used = 1 &apos;\001&apos;, masklen = 8 &apos;\b&apos;, vrf = 0, addr = 11, data = {{
      flags = 2, gw = 0, port = 0, vlan = 0}, {flags = 0, gw = 0, port = 0,
      vlan = 0}, {flags = 0, gw = 0, port = 0, vlan = 0}, {flags = 0, gw = 0,
      port = 0, vlan = 0}}}
(gdb) p shm-&gt;rules[3]
$49 = {used = 1 &apos;\001&apos;, masklen = 32 &apos; &apos;, vrf = 0, addr = 16777228, data = {{
      flags = 2097152, gw = 0, port = 1, vlan = 0}, {flags = 0, gw = 0,
      port = 0, vlan = 0}, {flags = 0, gw = 0, port = 0, vlan = 0}, {
      flags = 0, gw = 0, port = 0, vlan = 0}}}
(gdb) p shm-&gt;rules[4]
$50 = {used = 1 &apos;\001&apos;, masklen = 24 &apos;\030&apos;, vrf = 0, addr = 12, data = {{
      flags = 1, gw = 0, port = 1, vlan = 0}, {flags = 0, gw = 0, port = 0,
      vlan = 0}, {flags = 0, gw = 0, port = 0, vlan = 0}, {flags = 0, gw = 0,
      port = 0, vlan = 0}}}
(gdb) p shm-&gt;rules[5]
$51 = {used = 1 &apos;\001&apos;, masklen = 8 &apos;\b&apos;, vrf = 0, addr = 12, data = {{
      flags = 2, gw = 0, port = 1, vlan = 0}, {flags = 0, gw = 0, port = 0,
      vlan = 0}, {flags = 0, gw = 0, port = 0, vlan = 0}, {flags = 0, gw = 0,
      port = 0, vlan = 0}}}
(gdb) p shm-&gt;rules[6]
$52 = {used = 1 &apos;\001&apos;, masklen = 24 &apos;\030&apos;, vrf = 0, addr = 20, data = {{
      flags = 2, gw = 33554444, port = 1, vlan = 0}, {flags = 0, gw = 0,
      port = 0, vlan = 0}, {flags = 0, gw = 0, port = 0, vlan = 0}, {
      flags = 0, gw = 0, port = 0, vlan = 0}}}
(gdb) p shm-&gt;rules[7]
$53 = {used = 1 &apos;\001&apos;, masklen = 32 &apos; &apos;, vrf = 0, addr = 16777416, data = {{
      flags = 2, gw = 0, port = 10, vlan = 1}, {flags = 0, gw = 0, port = 0,
      vlan = 0}, {flags = 0, gw = 0, port = 0, vlan = 0}, {flags = 0, gw = 0,
      port = 0, vlan = 0}}}
(gdb) p shm-&gt;rules[8]
$54 = {used = 1 &apos;\001&apos;, masklen = 32 &apos; &apos;, vrf = 0, addr = 16842952, data = {{
      flags = 2, gw = 0, port = 10, vlan = 2}, {flags = 0, gw = 0, port = 0,
      vlan = 0}, {flags = 0, gw = 0, port = 0, vlan = 0}, {flags = 0, gw = 0,
      port = 0, vlan = 0}}}
(gdb) p shm-&gt;rules[9]
$55 = {used = 0 &apos;\000&apos;, masklen = 0 &apos;\000&apos;, vrf = 0, addr = 0, data = {{
      flags = 0, gw = 0, port = 0, vlan = 0}, {flags = 0, gw = 0, port = 0,
      vlan = 0}, {flags = 0, gw = 0, port = 0, vlan = 0}, {flags = 0, gw = 0,
      port = 0, vlan = 0}}}

However, ofp_rtl_search() for 200.0.0.1 returns the second tunnel
(vlan = 2) as the next hop. Here we are inside the lookup
(addr=16777416 i.e. 200.0.0.1):

(gdb) bt
#0  ofp_rtl_search (tree=&lt;optimized out&gt;, addr_be=&lt;optimized out&gt;)
    at ofp_rt_mtrie_lookup.c:428
#1  0x00000000004136e2 in ofp_get_next_hop (vrf=&lt;optimized out&gt;,
    addr=16777416, flags=flags@entry=0x7f0c361f9a1c) at ofp_route.c:449
#2  0x0000000000407182 in ofp_ipv4_processing (pkt=0x7f0c231e7ac0)
    at ofp_pkt_processing.c:329
#3  0x0000000000407ee2 in ofp_packet_input (pkt=0x7f0c231e7ac0,
    in_queue=in_queue@entry=0x0, pkt_func=0x407c80 &lt;ofp_eth_vlan_processing&gt;)
    at ofp_pkt_processing.c:1419
#4  0x000000000040596b in pkt_io_recv (arg=&lt;optimized out&gt;) at app_main.c:77
#5  0x00007f0c65322b6f in odp_run_start_routine (arg=0x7ffca4e7ff48)
    at linux.c:40
#6  0x00007f0c64ab560a in start_thread () from /lib64/libpthread.so.0
#7  0x00007f0c647efbbd in clone () from /lib64/libc.so.6

But the search returns the wrong next hop:

(gdb) fin
Run till exit from #0  ofp_rtl_search (tree=&lt;optimized out&gt;,
    addr_be=&lt;optimized out&gt;) at ofp_rt_mtrie_lookup.c:428
ofp_get_next_hop (vrf=&lt;optimized out&gt;, addr=16777416,
    flags=flags@entry=0x7f0c361f9a1c) at ofp_route.c:456
456     }
Value returned is $56 = (struct ofp_nh_entry *) 0x7f0c39410044

(gdb) p *(struct ofp_nh_entry *) 0x7f0c39410044
$57 = {flags = 2, gw = 0, port = 10, vlan = 2}</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>105</bug_id>
          
          <creation_ts>2016-10-17 15:28:24 +0200</creation_ts>
          <short_desc>error message &apos;SIOCSIFNETMASK: Invalid argument&apos;</short_desc>
          <delta_ts>2016-11-28 15:31:27 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Interface configuration</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>DUPLICATE</resolution>
          <dup_id>101</dup_id>
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sorin Vultureanu">sorin.vultureanu@enea.com</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          <cc>jere.leppanen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-i9xqlMl25kIKX88SV0KtHwi4GA9BtTLbRnK8B71p240</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>193</commentid>
    <comment_count>0</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-10-17 15:28:24 +0200</bug_when>
    <thetext>From oleh.slabak@ostware-services.com :

In file ofp_portconf.c function *ofp_config_interface_up_v4* we have wrong
conversion for network mask:

Now we have:
snprintf(cmd, sizeof(cmd), &quot;ifconfig %s %s netmask %d.%d.%d.%d up&quot;,
           ofp_port_vlan_to_ifnet_name(port, 0),
           ofp_print_ip_addr(addr),
           (uint8_t)(*mask &gt;&gt; **24*),
           (uint8_t)(*mask &gt;&gt; 16*),
           (uint8_t)(*mask &gt;&gt; 8*),
           (uint8_t)*mask*);

But it should be:

snprintf(cmd, sizeof(cmd), &quot;ifconfig %s %s netmask %d.%d.%d.%d up&quot;,
           ofp_port_vlan_to_ifnet_name(port, 0),
           ofp_print_ip_addr(addr),*(uint8_t)mask*,
           (uint8_t)(*mask &gt;&gt; 8*),
           (uint8_t)(*mask &gt;&gt; 16*),
           (uint8_t)(*mask &gt;&gt; 24*));</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>211</commentid>
    <comment_count>1</comment_count>
    <who name="Jere Leppänen">jere.leppanen@nokia.com</who>
    <bug_when>2016-11-28 15:31:27 +0100</bug_when>
    <thetext>

*** This bug has been marked as a duplicate of bug 101 ***</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>106</bug_id>
          
          <creation_ts>2016-10-18 13:16:22 +0200</creation_ts>
          <short_desc>Implement epoll() in ofp_netwrap_crt example</short_desc>
          <delta_ts>2016-11-21 08:23:23 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Example applications</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          <see_also>https://issues.openfastpath.org/show_bug.cgi?id=94</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Josep Puigdemont">josep.puigdemont@linaro.org</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          <cc>antero.nousiainen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-ulqDLmy5mIjhTtMq9ZCGbz_GYhgjASY9LMe4DUOS434</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>194</commentid>
    <comment_count>0</comment_count>
    <who name="Josep Puigdemont">josep.puigdemont@linaro.org</who>
    <bug_when>2016-10-18 13:16:22 +0200</bug_when>
    <thetext>Most Linux applications use poll() or epoll() instead of select(), thus it would be beneficial to OFP if the netwrap example application had an implementation of those system calls too.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>202</commentid>
    <comment_count>1</comment_count>
    <who name="Antero Nousiainen">antero.nousiainen@nokia.com</who>
    <bug_when>2016-11-21 08:23:23 +0100</bug_when>
    <thetext>Fixed with &quot;1943840 Add epoll to Netwrap CRT example library&quot;.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>107</bug_id>
          
          <creation_ts>2016-10-20 08:22:30 +0200</creation_ts>
          <short_desc>Angelfish: Compilation failure with gcc-6 and GLIBC 2.24</short_desc>
          <delta_ts>2016-11-22 13:55:24 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Other</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Antero Nousiainen">antero.nousiainen@nokia.com</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          <cc>sorin.vultureanu@enea.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-3LF4-EQnQTxhYN0NZ9rf9HbN50k5GY_I0KdM3_9Ozp4</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>195</commentid>
    <comment_count>0</comment_count>
    <who name="Antero Nousiainen">antero.nousiainen@nokia.com</who>
    <bug_when>2016-10-20 08:22:30 +0200</bug_when>
    <thetext>The Angelfish branch fails to compile with gcc-6 and GLIBC 2.24 with the following error message:

In file included from /usr/include/linux/if_tunnel.h:6:0,
                 from ofp_netlink.c:16:
/usr/include/linux/ip.h:85:8: error: redefinition of ‘struct iphdr’
 struct iphdr {
        ^~~~~
In file included from ofp_netlink.c:12:0:
/usr/include/netinet/ip.h:44:8: note: originally defined here
 struct iphdr
        ^~~~~

The compilation worked still with gcc-5 and GLIBC 2.23. The compilation problem is introduced by a change in /usr/include/linux/if_tunnel.h:

@@ -2,6 +2,9 @@
 #define _IF_TUNNEL_H_
 
 #include &lt;linux/types.h&gt;
+#include &lt;linux/if.h&gt;
+#include &lt;linux/ip.h&gt;
+#include &lt;linux/in6.h&gt;
 #include &lt;asm/byteorder.h&gt;

To fix this the following change is needed in src/ofp_netlink.c:

@@ -9,7 +9,7 @@
 #include &lt;stdio.h&gt;
 #include &lt;string.h&gt;
 #include &lt;netinet/in.h&gt;
-#include &lt;netinet/ip.h&gt;
+#include &lt;linux/ip.h&gt;
 #include &lt;linux/netlink.h&gt;
 #include &lt;linux/rtnetlink.h&gt;
 #include &lt;linux/if_arp.h&gt;

The fix has already been pushed to master in a0a4c46.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>203</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-11-22 13:46:28 +0100</bug_when>
    <thetext>Can we close this thing?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>204</commentid>
    <comment_count>2</comment_count>
    <who name="Antero Nousiainen">antero.nousiainen@nokia.com</who>
    <bug_when>2016-11-22 13:55:24 +0100</bug_when>
    <thetext>(In reply to Sorin Vultureanu from comment #1)
&gt; Can we close this thing?

This is still yet to be fixed on Angelfish branch, I&apos;m still getting the same compilation error. The fix from master should be merged to Angelfish to fix this.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>108</bug_id>
          
          <creation_ts>2016-10-20 09:03:43 +0200</creation_ts>
          <short_desc>The number of pktin queues in NGiNX should be dynamically assigned</short_desc>
          <delta_ts>2016-10-20 09:03:43 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Example applications</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Josep Puigdemont">josep.puigdemont@linaro.org</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-S98-7Rw6ZdhBYGU0ZehteMU0bhmwBSl_WceVsZKoxJc</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>196</commentid>
    <comment_count>0</comment_count>
    <who name="Josep Puigdemont">josep.puigdemont@linaro.org</who>
    <bug_when>2016-10-20 09:03:43 +0200</bug_when>
    <thetext>The number of pktin queues used by NGiNX is currently set at compile time, making the server restricted to use only one worker with the current defaults. This option should instead be configured dynamically at run-time, and it should honor the worker_processes option in the nginx.conf configuration file.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>109</bug_id>
          
          <creation_ts>2016-10-21 07:27:52 +0200</creation_ts>
          <short_desc>OFP performance measurement procedure Mpps also be 0.000</short_desc>
          <delta_ts>2016-10-21 11:04:06 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Testing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="xiaowen yang">xiaowen.1.yang@gmail.com</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          <cc>xiaowen.1.yang@gmail.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-KUdPxusHlySxCH7bWtURn-k__XQ3RJQkOpBAakJdfCk</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>197</commentid>
    <comment_count>0</comment_count>
      <attachid>10</attachid>
    <who name="xiaowen yang">xiaowen.1.yang@gmail.com</who>
    <bug_when>2016-10-21 07:27:52 +0200</bug_when>
    <thetext>Created attachment 10
test result

I used free SW tool iperf to generate data. But it is odd.
Below is the testing data.
Bandwidth is 1.42 Gbits/Sec without OFP
Bandwidth is 974Mbits/Sec with OFP.
 
and node2 show Mpps aslo 0.
 
Why does the performance drop with OFP ? 
Node3 : 192.168.30.3
Node2: 192.168.30.1 and 192.168.10.1 OFP and ODP with platform linux-generic (no DPDK) on Node2
Node1:192.168.10.3

case steps:
1.       Start application that uses OFP on node 2. Ex:

./fpm -i interface0,interface1 -c 3 -p

2.       Connect with telnet to OFP CLI on port 2345. To connect remotely you need to have a management interface/IP on node 2.

telnet 127.0.0.1 2345

3.       Configure IPs on fpX interfaces with commands:

ifconfig fp0 192.168.10.1/24

ifconfig fp1 192.168.30.1/24

4.       Ping node 2 from node 3 in order to populate the ARP table. Doing this prior to the high load test start avoids the loss of ARP responses due to depleted packet buffers. I.e. before they can be handled by the normal ARP request / ARP response procedure.

5.       Generate traffic from packet generator (node 1)

6.       Collect results from destination (node 3) or from OFP application (node 2).

testing reslut link as below:

https://mail.google.com/mail/?ui=2&amp;ik=625a950c90&amp;view=fimg&amp;th=157e25ef18698fbc&amp;attid=0.1&amp;disp=emb&amp;attbid=ANGjdJ91ho0HOQcDry-m4LpONrvemYh-NifQsi-lUfUBNbhCT8cRO0SHAHW9IkG_mQpH3lSGpaNmf-7kn-4cZMcC3J90GRJi6uFYAW7Io9vBcfKtUVcOb6peFO5zySs&amp;sz=w1524-h858&amp;ats=1477026903255&amp;rm=157e25ef18698fbc&amp;zw&amp;atsh=1



https://mail.google.com/mail/?ui=2&amp;ik=625a950c90&amp;view=fimg&amp;th=157e25ef18698fbc&amp;attid=0.2&amp;disp=emb&amp;attbid=ANGjdJ8kSa4dgZn9jrf36jThARmFr265q_muZu7CK_asCkFwqT7nnZfB9PU6GGa6A1oPcg-etg-0WXgQx5-aRLGLYuTCZXVS4hFU3pReB-i-FHlPK-aa0ldTY-4EJnw&amp;sz=w1420-h966&amp;ats=1477026903255&amp;rm=157e25ef18698fbc&amp;zw&amp;atsh=1</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>10</attachid>
            <date>2016-10-21 07:27:52 +0200</date>
            <delta_ts>2016-10-21 07:27:52 +0200</delta_ts>
            <desc>test result</desc>
            <filename>OFP1.png</filename>
            <type>image/png</type>
            <size>67206</size>
            <attacher name="xiaowen yang">xiaowen.1.yang@gmail.com</attacher>
            
              <token>1485263357-pzD2TPc9SFAaNsYe443Z_x4UmmbXIpmJHbcNR_bq4vI</token>

          </attachment>
      

    </bug>
    <bug>
          <bug_id>110</bug_id>
          
          <creation_ts>2016-10-21 09:01:54 +0200</creation_ts>
          <short_desc>Slowpath interfaces not recognized by the fast path</short_desc>
          <delta_ts>2016-10-21 09:01:54 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>janne.peltonen@nokia.com</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-H2_4MKEA6-cfaa-dYWWw41WhcVfV57ZQ_MJT0nRizVs</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>198</commentid>
    <comment_count>0</comment_count>
    <who name="">janne.peltonen@nokia.com</who>
    <bug_when>2016-10-21 09:01:54 +0200</bug_when>
    <thetext>It is unclear if and how OFP is supposed to work when fast path is
given only a subset of the physical network interfaces and some
interfaces remain under Linux control.
 
When I run OFP so that fast path gets only a couple of the interfaces
(e.g. ./fpm_burstmode -c 1 -i 0,1), the Linux owned interfaces do not
appear to be known by the fast path.

Netlink notifications (e.g. about adding an address) for such interfaces
result in fast path spitting out error messages like these:

E 6451 0:1551890176 ofp_portconf.c:1126] port:65535 is outside the valid interval
E 6451 0:1551890176 ofp_netlink.c:426]  ! Interface index 6 not found
E 6451 0:1551890176 ofp_portconf.c:1126] port:65535 is outside the valid interval

The physical slow path interfaces and their addresses are not visible in
the fast path so I cannot receive traffic destined to a local slow path
address though a fast path interface.

And if I try to add (in Linux) a route via a GW behind a slow path
interface, the route does not get synchronized to the fast path. This
means that I cannot forward fast path traffic to slow path interfaces
and that fast path may forward such traffic to a wrong GW (if another
matching route with a shorter prefix exists and is known to the fast
path (its next hop is behind a fast path interface)).

At the very least OFP should fix the error messages and provide
documentation on how the slow path and fast path are supposed to
work together, how transparent the fast path really is and how
things work when there are both fast path and slow path owned
interfaces in the system.

Then depending on how things are supposed to work, the non-visibility
of slow path interfaces and related addresses and routes in fast path
may be considered a bug or something for future improvement.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>111</bug_id>
          
          <creation_ts>2016-10-26 12:36:11 +0200</creation_ts>
          <short_desc>Dubious piece of dead code in add_link()</short_desc>
          <delta_ts>2016-10-26 12:36:11 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Netlink config notifications</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>trivial</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>janne.peltonen@nokia.com</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-qKpzjbEVd4S_4jY5Nd11bl6biZd9fmjgwBiueXxmqHo</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>199</commentid>
    <comment_count>0</comment_count>
    <who name="">janne.peltonen@nokia.com</who>
    <bug_when>2016-10-26 12:36:11 +0200</bug_when>
    <thetext>There is this piece of code in in ofp_netlink.c:add_link()

                if (!dev-&gt;linux_index) {
                        dev-&gt;linux_index = ifinfo_entry-&gt;ifi_index;
                        ofp_update_ifindex_lookup_tab(dev);
                } else if (dev-&gt;linux_index == 0) {
                        dev-&gt;linux_index = ifinfo_entry-&gt;ifi_index;
                        ofp_update_ifindex_lookup_tab(dev);
                }

This obviously cannot be right. Maybe the latter branch is just a piece of
accidental dead code or maybe this is evidence of a brain fart with
more severe consequences. I did not investigate further, but I suspect
the former and thus filed this a trivial bug.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>112</bug_id>
          
          <creation_ts>2016-10-28 14:43:23 +0200</creation_ts>
          <short_desc>OFP TCP crash with sigevent</short_desc>
          <delta_ts>2016-12-08 15:50:22 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Ingress Packet processing</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bogdan Pricope">bogdan.pricope@enea.com</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          <cc>sorin.vultureanu@enea.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-nMUiTLaYGAepq6geXiqtYYyO9kjJN-pFxtiOvHNFqcQ</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>200</commentid>
    <comment_count>0</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2016-10-28 14:43:23 +0200</bug_when>
    <thetext>I am testing with webserver2 (has 0-copy “sigevent” functionality) and am getting crashes for multi-worker tests:

Setup:
targets: two x86 connected b2b
odp: odp-linux monarch_lts
ofp: at commit c1616bcec86eef7ce57ed92f4ad09ce7c4f39f00

I am getting crashes:
1.	In “scheduler” mode for more than one worker when I am changing scheduling sync from atomic to parallel 
-               queue_param-&gt;sched.sync = ODP_SCHED_SYNC_ATOMIC;
+               queue_param-&gt;sched.sync = /*ODP_SCHED_SYNC_ATOMIC*/ODP_SCHED_SYNC_PARALLEL;
2.	In “direct” mode for more than one worker when using same pktin/pktout for multiple workers (in multithread safe mode).


It is working fine with one worker, so I guess is a race condition between workers due to special conditions of “sigevent” executions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>210</commentid>
    <comment_count>1</comment_count>
    <who name="Bogdan Pricope">bogdan.pricope@enea.com</who>
    <bug_when>2016-11-25 15:46:39 +0100</bug_when>
    <thetext>I proposed a fix for sigevent crash. It was tested with pktio in ‘direct’ mode plus RSS.

Some things to mention:
OFP TCP does not cope with situations when incoming packets for one socket are processed by different cores in the same time: the processing order is affected and some packets may be dropped due to invalid socket state, etc.

Workarounds: 
1.	pktio in scheduling mode with sync mode ODP_SCHED_SYNC_ATOMIC. This is default operation mode for OFP. Downside is drop in performance.
2.	pktio in “direct” mode plus RSS (TCPv4): this will determine pkts belonging to a socket to be processed on only one core.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>216</commentid>
    <comment_count>2</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-12-08 15:50:22 +0100</bug_when>
    <thetext>Patched with:
tcp: Fix crash with sigevent
Fix a crash generated when processing TCP packets through sigevent
mechanism. Basically, it is caused by the fact that same memory zone
is used (unprotected) by all accepted TCP sockets.

Each socket contains a local struct ofp_sigevent. It is initialized
when sigevent functionality is enabled on a sockets (TCP listening
socket) and is copied on each TCP accepted socket. That means, for
each TCP accepted socket (+ listening socket),
so-&gt;so_sigevent.ofp_sigev_value.sival_ptr is pointing to the same
memory area. This is fine for a read-only operations but not fine for
write operations.

Fix is to provide to sigevent callback a locally stored (and
independent) sigval.

Fixes: #112 OFP TCP crash with sigevent

Signed-off-by: Bogdan Pricope &lt;bogdan.pricope@linaro.org&gt;
Reviewed-by: Jere Leppänen &lt;jere.leppanen@nokia.com&gt;</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>113</bug_id>
          
          <creation_ts>2016-11-16 17:42:18 +0100</creation_ts>
          <short_desc>ofp_recv() on server returns some random data when clien terminates TCP session with RST</short_desc>
          <delta_ts>2016-11-22 15:47:45 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - TCP</component>
          <version>unspecified</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andriy Berestovskyy">Andriy.Berestovskyy@cavium.com</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          <cc>sorin.vultureanu@enea.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-EthNWbysidt6OHqv7KKhwEeJ7O-Zd7P17WHth5DUXag</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>201</commentid>
    <comment_count>0</comment_count>
    <who name="Andriy Berestovskyy">Andriy.Berestovskyy@cavium.com</who>
    <bug_when>2016-11-16 17:42:18 +0100</bug_when>
    <thetext>NginX/OFP: mainline, d1820415edf8d319a1f345a2d00e92d752b81883
OFP: mainline, 35bc38ac4592800a2c3d13b001a0b66679c8f0b7
ODP/ThunderX, mainline, 1f484d353499853a123c458c4ea04f979afaf9f4

There are few NginX error logs like:
2016/11/16 10:17:47 [info] 0#0: *76362 client sent invalid method while reading client request line, client: 172.16.1.3, server: localhost, request: &quot;E &amp;�@@�Ҭ�+�PM:0H�q��&gt;��&quot;

It seems ofp_recv() on server (NginX) returns some random data when client reset TCP session with RST. No issues with normal TCP termination (FIN-ACK-FIN-ACK).

To reproduce TCP session reset we can press Ctrl+C during httperf benchmark or use wrk, for example:

wrk -t12 -c400 -d10s http://172.16.1.1/index.html</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>114</bug_id>
          
          <creation_ts>2016-12-07 14:52:13 +0100</creation_ts>
          <short_desc>ofp_rt_rule_find_prefix_match mix use of big-endian data and cpu-endian data</short_desc>
          <delta_ts>2017-01-08 12:46:03 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>118</blocked>
    
    <blocked>119</blocked>
    
    <blocked>115</blocked>
    
    <blocked>116</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Dapeng Liu">dapeng.liu@linaro.org</reporter>
          <assigned_to name="Dapeng Liu">dapeng.liu@linaro.org</assigned_to>
          <cc>antero.nousiainen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-8-Kdexfsi7t6Js14XA_2c2NqL7JDvS91KSNGzEl9q4o</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>213</commentid>
    <comment_count>0</comment_count>
    <who name="Dapeng Liu">dapeng.liu@linaro.org</who>
    <bug_when>2016-12-07 14:52:13 +0100</bug_when>
    <thetext>equal_most_significant_bits expects cpu endian arguments, but ofp_rt_rule_find_prefix_match pass in rule-&gt;addr which is big-endian and addr which is cpu-endian. The comparison result is definitely unexpected.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>221</commentid>
    <comment_count>1</comment_count>
    <who name="Dapeng Liu">dapeng.liu@linaro.org</who>
    <bug_when>2016-12-20 09:02:44 +0100</bug_when>
    <thetext>Fixed by 8d23ada558fa98d65694168b0edbd05e83a64abb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>115</bug_id>
          
          <creation_ts>2016-12-07 18:12:29 +0100</creation_ts>
          <short_desc>ofp_rt_rule_find_prefix_match use incorrect masklen to search in rule table</short_desc>
          <delta_ts>2017-01-08 12:46:03 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>118</dependson>
    
    <dependson>119</dependson>
    
    <dependson>114</dependson>
          <blocked>116</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Dapeng Liu">dapeng.liu@linaro.org</reporter>
          <assigned_to name="Dapeng Liu">dapeng.liu@linaro.org</assigned_to>
          <cc>antero.nousiainen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-6D4b1y1TfI-insPqYhP2sW7NMXJqefPHLVjxDeeOHGM</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>214</commentid>
    <comment_count>0</comment_count>
    <who name="Dapeng Liu">dapeng.liu@linaro.org</who>
    <bug_when>2016-12-07 18:12:29 +0100</bug_when>
    <thetext>The code logic in ofp_rt_rule_find_prefix_match is trying to search such a rule that hold below conditions:
       1) the rule remain in the same interval as being deleted route
       2) the rule has with shorter or equal masklen than being deleted route
       3) the rule has the same prefix as being deleted route
       when test the third condition it should use the shorter masklen which is rule-&gt;masklen, but currently the code use the masklen of route being deleted. With this bug in current code no rule except the exact rule corresponding the route being deleted can hold all three conditions above, which is not expected behavior. To clarify again, the expected behavior is to find a rule that can &quot;cover&quot; the route being deleted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>222</commentid>
    <comment_count>1</comment_count>
    <who name="Dapeng Liu">dapeng.liu@linaro.org</who>
    <bug_when>2016-12-20 09:05:30 +0100</bug_when>
    <thetext>Fixed by 8d23ada558fa98d65694168b0edbd05e83a64abb</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>116</bug_id>
          
          <creation_ts>2016-12-09 19:23:49 +0100</creation_ts>
          <short_desc>ofp_rtl_remove will re-insert the route it just removed</short_desc>
          <delta_ts>2017-01-08 12:46:03 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>118</dependson>
    
    <dependson>119</dependson>
    
    <dependson>114</dependson>
    
    <dependson>115</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dapeng Liu">dapeng.liu@linaro.org</reporter>
          <assigned_to name="Dapeng Liu">dapeng.liu@linaro.org</assigned_to>
          <cc>antero.nousiainen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-iMK8K1xZVHfMPbn1kniXv1B33m7nKZ3AnlVpFQ4GWtA</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>218</commentid>
    <comment_count>0</comment_count>
      <attachid>12</attachid>
    <who name="Dapeng Liu">dapeng.liu@linaro.org</who>
    <bug_when>2016-12-09 19:23:49 +0100</bug_when>
    <thetext>Created attachment 12
patch of test case to tesitify the existence of this issue

- ofp_rtl_remove re-insert the mtrie entry that it just removed. Walking through the code path in ofp_rtl_remove, it takes below steps
         step-1) lookup the rule table to find the rule corresponding to the route that it is about to delete. If rule is not found then return because the route doen&apos;t exist. If rule is found then proceed to step-2
         step-2) delete mtrie entry 
         step-3) lookup the rule table again. It looks for a rule which has shorter and equal masklen with the deleted route and has the same prefix with the deleted route, i.e. a covering rule. If it finds such a rule then it insert the route corresponding to this rule in mtrie. 
         *The expected behaviour* Use two examples to elaborate. Example-1 it deleted 10.10.128.0/24 in mtrie, then it finds there is 10.10.128.0/20 in rule table so it insert 10.10.128.0/20 in mtrie to fill the &apos;hole&apos; caused by digging 10.10.128.0/24. Example-2 it deletd 10.10.128.0/24 in mtrie, then it finds a different 10.10.128.0/24 which was overriden by current being deleted one, so it inserts the another 10.10.128.0/24 in mtrie.
         *here the error happens* Instead of finding a covering rule it actually would find exactly the same rule as step-1 which corresponds to the deleted route. So it reinserts route it just deleted in mtrie! 
         *The key missing logic is* that when the code walks through rule table for a covering rule it needs to make sure the rule being examined is not the exact rule being deleted. It&apos;s not as easy as compare the masklen because case like example-2 exists... 
         *fix* I will use the index into the rule table as identifier of a rule. With this identifier we can dodge the deleted rule when searching in the rule table
         step-4) when ofp_rtl_remove return to del_route. del_route delete the rule found in step-1. You could see the bug has below two serious consequence. 
         1) The route supposed to be delete is not deleted
         2) mtrie has the route while rule table has not corresponding rule, which leaves a inconsistent state.
       - Why the issue doesn&apos;t emerge before
         The issue is hidden by bug114. In bug114 ofp_rt_rule_find_prefix_match compares a big-endian addr with host-endian addr when searching the rule table. Therefore ofp_rt_rule_find_prefix_match in most case would find nothing, neither a true covering rule or the rule corresponding to the deleted route. So *the ofp_rtl_remove happens to work before.* Now with bug114 fixed in another patch the ofp_rtl_remove issue is exposed.
       - test case to testify the existence of the issue
         + patch of the test case to expose the issue
           1) add a route 
           2) query the route. expect to find the route.
           3) delete the route 
           4) query. expect not to find the route.
         + test report
           - with --enable-mtrie i.e. use mtrie not radix tree
             [root@localhost cunit]# ./ofp_test_route_perf 
             CUnit - A unit testing framework for C - Version 2.1-3
             http://cunit.sourceforge.net/

             Suite: ofp route perf
               Test: Insert one route and query then delete it and query ...FAILED
             - ofp_test_route_perf.c:164  - CU_ASSERT_PTR_NULL(node)

             Run Summary:    Type  Total    Ran Passed Failed Inactive
                           suites      1      1    n/a      0        0
                            tests      1      1      0      1        0
                          asserts      5      5      4      1      n/a
           - with --enable-mtrie=no i.e. use radix tree not mtrie
             [root@localhost cunit]# ./ofp_test_route_perf 
             CUnit - A unit testing framework for C - Version 2.1-3
             http://cunit.sourceforge.net/

             Suite: ofp route perf
               Test: Insert one route and query then delete it and query ...passed

             Run Summary:    Type  Total    Ran Passed Failed Inactive
                           suites      1      1    n/a      0        0
                            tests      1      1      1      0        0
                          asserts      5      5      5      0      n/a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>223</commentid>
    <comment_count>1</comment_count>
    <who name="Dapeng Liu">dapeng.liu@linaro.org</who>
    <bug_when>2016-12-20 09:06:44 +0100</bug_when>
    <thetext>Fixed by 943d29c91ce125e9d07f468f443eb7f5e546b261</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>12</attachid>
            <date>2016-12-09 19:23:49 +0100</date>
            <delta_ts>2016-12-09 19:23:49 +0100</delta_ts>
            <desc>patch of test case to tesitify the existence of this issue</desc>
            <filename>test_case_to_reveal_bug116</filename>
            <type>text/plain</type>
            <size>7141</size>
            <attacher name="Dapeng Liu">dapeng.liu@linaro.org</attacher>
            
              <token>1485263357-ViykJ01RIheEBbpm5slJvXN3WJic6Pw0wDaW2JHdskE</token>

          </attachment>
      

    </bug>
    <bug>
          <bug_id>117</bug_id>
          
          <creation_ts>2016-12-13 09:07:07 +0100</creation_ts>
          <short_desc>multiple invoking ofp_socket_sigevent with different sockfd in one thread may lead crash</short_desc>
          <delta_ts>2016-12-13 10:29:33 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>API - Hook interface</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Tao Zhang">tao.zhang@kaixiangtech.com</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          <cc>sorin.vultureanu@enea.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-ASCyNqDQ7SgCFho7xRguCrv3Ub41sBWz-59bBMv24ZI</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>219</commentid>
    <comment_count>0</comment_count>
    <who name="Tao Zhang">tao.zhang@kaixiangtech.com</who>
    <bug_when>2016-12-13 09:07:07 +0100</bug_when>
    <thetext>In the case one client thread handles more than two sockets, when each socket connects to servers and after then each one sets in notify mode with ofp_socket_sigevent(), the notify callback function doesn&apos;t works, sometimes thread may crash or hang.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>220</commentid>
    <comment_count>1</comment_count>
    <who name="Sorin Vultureanu">sorin.vultureanu@enea.com</who>
    <bug_when>2016-12-13 10:29:33 +0100</bug_when>
    <thetext>Hi Tao,

Can you add the piece of code that is affected by this issue?

Kind Regards,
Sorin</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>118</bug_id>
          
          <creation_ts>2017-01-08 12:05:16 +0100</creation_ts>
          <short_desc>NODEALLOC does not reset next pointer and lead to erroneous routing lookup</short_desc>
          <delta_ts>2017-01-08 12:46:03 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>114</dependson>
          <blocked>119</blocked>
    
    <blocked>115</blocked>
    
    <blocked>116</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Dapeng Liu">dapeng.liu@linaro.org</reporter>
          <assigned_to name="Dapeng Liu">dapeng.liu@linaro.org</assigned_to>
          <cc>antero.nousiainen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-bTxDz91TNGE07umTDdQlcdPpsolvihmFozKMi8hiAcg</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>224</commentid>
    <comment_count>0</comment_count>
    <who name="Dapeng Liu">dapeng.liu@linaro.org</who>
    <bug_when>2017-01-08 12:05:16 +0100</bug_when>
    <thetext>NODEALLOC doesn&apos;t rtl_node-&gt;next. The consequence is: during mtrie searching, the next pointer is followed to the originally next free node. If this node now is allocated already, then it will be taken as the child node by mistake. This issue was found during scaling test of route provision for bug85.
Will provide a patch soon.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>119</bug_id>
          
          <creation_ts>2017-01-08 12:46:03 +0100</creation_ts>
          <short_desc>Left bit shift result in UB</short_desc>
          <delta_ts>2017-01-08 12:46:15 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>118</dependson>
    
    <dependson>114</dependson>
          <blocked>115</blocked>
    
    <blocked>116</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Dapeng Liu">dapeng.liu@linaro.org</reporter>
          <assigned_to name="Dapeng Liu">dapeng.liu@linaro.org</assigned_to>
          <cc>antero.nousiainen@nokia.com</cc>
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-vbPkU0BLYOqyrHQBJOQN6Csg_0Y0s7RKqWvnPeuRPVc</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>225</commentid>
    <comment_count>0</comment_count>
    <who name="Dapeng Liu">dapeng.liu@linaro.org</who>
    <bug_when>2017-01-08 12:46:03 +0100</bug_when>
    <thetext>For E1 &lt;&lt; E2, according to C programming language, the result is undefined if the right operand is negative, or greater than or equal to the number of bits in the left expression’s type. On my testbed 0xFFFFFFFF &lt;&lt; (32 - masklen) in to_network_prefix result in 0xFFFFFFFF when masklen is 0, which is clearly wrong. Will check all bit shift operation and provide fix soon.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>120</bug_id>
          
          <creation_ts>2017-01-16 11:02:07 +0100</creation_ts>
          <short_desc>Nexthops may be used after freed and while being modified</short_desc>
          <delta_ts>2017-01-16 11:02:07 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>janne.peltonen@nokia.com</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-sQX4umv4p__WehyoqdcJavb3OdgbJkSNRd7NPJmTNDg</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>226</commentid>
    <comment_count>0</comment_count>
    <who name="">janne.peltonen@nokia.com</who>
    <bug_when>2017-01-16 11:02:07 +0100</bug_when>
    <thetext>ofp_get_next_hop() returns a pointer to ofp_nh_entry but does
not guarantee for how long the returned pointer will be valid.
There is no mechanism that would protect next hop modification
and deletion from concurrent access by the forwarding code.

When the packet forwarding code is using an ofp_nh_entry
returned by ofp_get_next_hop, another thread may be processing
a configuration change that deletes or modifies the next hop.

Possible consequences of the bug include packets getting
forwarded to a wrong next hop or dropped during route changes.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>121</bug_id>
          
          <creation_ts>2017-01-16 11:03:41 +0100</creation_ts>
          <short_desc>Race condition in MAC address lookup</short_desc>
          <delta_ts>2017-01-16 11:03:41 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - ARP/NDP</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>minor</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>janne.peltonen@nokia.com</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-zWdiZdQpIDgEm8KXCSaz07k7z1_xe79ksgw-GU1iD38</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>227</commentid>
    <comment_count>0</comment_count>
    <who name="">janne.peltonen@nokia.com</who>
    <bug_when>2017-01-16 11:03:41 +0100</bug_when>
    <thetext>ofp_arp.c:ofp_ipv4_lookup_mac() caches arp table lookup results
in shm-&gt;arp.cache[set]. Use of the cache is not protected
against simultaneous modifications of the cache by other
threads.

This can result in some sent packets getting a wrong
destination MAC address.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>122</bug_id>
          
          <creation_ts>2017-01-16 11:05:18 +0100</creation_ts>
          <short_desc>ifnets may be used after freed</short_desc>
          <delta_ts>2017-01-16 11:05:18 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>OpenFP  - Core</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>janne.peltonen@nokia.com</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-glwBVGkSMSq2ow5qgjh9j4s4ssziqcWw4fJlZooedEw</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>228</commentid>
    <comment_count>0</comment_count>
    <who name="">janne.peltonen@nokia.com</who>
    <bug_when>2017-01-16 11:05:18 +0100</bug_when>
    <thetext>ofp_get_ifnet() returns a pointer to ofp_ifnet but does
not guarantee for how long the returned pointer will be valid.
The returned ifnet may get deleted due to a configuration
change at the same time when it is being used by the
packet forwarding code. 

This can result in memory corruption, crashes and other
undesired behaviour.</thetext>
  </long_desc>
      
      

    </bug>
    <bug>
          <bug_id>123</bug_id>
          
          <creation_ts>2017-01-16 11:06:53 +0100</creation_ts>
          <short_desc>Missing locking around the avl_tree used for VLANs</short_desc>
          <delta_ts>2017-01-16 11:06:53 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>OpenFP</product>
          <component>Protocol - Ethernet and VLAN</component>
          <version>unspecified</version>
          <rep_platform>PC</rep_platform>
          <op_sys>Other</op_sys>
          <bug_status>CONFIRMED</bug_status>
          <resolution></resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>---</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>janne.peltonen@nokia.com</reporter>
          <assigned_to name="openfastpath@list.openfastpath.org">openfastpath@list.openfastpath.org</assigned_to>
          
          <estimated_time>0.00</estimated_time>
          <remaining_time>0.00</remaining_time>
          <actual_time>0.00</actual_time>
          

      
          <token>1485263357-LNRU0eGq0w1T76PZpUyn9xx0pMkKwPv0jLSUNb_E5ho</token>

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>229</commentid>
    <comment_count>0</comment_count>
    <who name="">janne.peltonen@nokia.com</who>
    <bug_when>2017-01-16 11:06:53 +0100</bug_when>
    <thetext>Deletion of a VLAN or loopback interface uses
avl_delete() without any locking. This allows
e.g. the forwarding code to search the avl tree
through ofp_vlan_get_by_key() at the same time
when an entry is being deleted from the tree
and when the tree may be undergoing balancing
rotations.

This can lead to corruption of the avl_tree.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>